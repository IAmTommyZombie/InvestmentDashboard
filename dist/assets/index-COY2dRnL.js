(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function q_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dg={exports:{}},rl={},fg={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eo=Symbol.for("react.element"),Y_=Symbol.for("react.portal"),G_=Symbol.for("react.fragment"),H_=Symbol.for("react.strict_mode"),W_=Symbol.for("react.profiler"),Q_=Symbol.for("react.provider"),K_=Symbol.for("react.context"),X_=Symbol.for("react.forward_ref"),J_=Symbol.for("react.suspense"),Z_=Symbol.for("react.memo"),ew=Symbol.for("react.lazy"),zf=Symbol.iterator;function tw(t){return t===null||typeof t!="object"?null:(t=zf&&t[zf]||t["@@iterator"],typeof t=="function"?t:null)}var pg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mg=Object.assign,gg={};function Ns(t,e,n){this.props=t,this.context=e,this.refs=gg,this.updater=n||pg}Ns.prototype.isReactComponent={};Ns.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ns.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yg(){}yg.prototype=Ns.prototype;function ah(t,e,n){this.props=t,this.context=e,this.refs=gg,this.updater=n||pg}var lh=ah.prototype=new yg;lh.constructor=ah;mg(lh,Ns.prototype);lh.isPureReactComponent=!0;var $f=Array.isArray,vg=Object.prototype.hasOwnProperty,uh={current:null},_g={key:!0,ref:!0,__self:!0,__source:!0};function wg(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)vg.call(e,r)&&!_g.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:eo,type:t,key:i,ref:a,props:s,_owner:uh.current}}function nw(t,e){return{$$typeof:eo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ch(t){return typeof t=="object"&&t!==null&&t.$$typeof===eo}function rw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qf=/\/+/g;function ou(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rw(""+t.key):e.toString(36)}function Jo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case eo:case Y_:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+ou(a,0):r,$f(s)?(n="",t!=null&&(n=t.replace(qf,"$&/")+"/"),Jo(s,e,n,"",function(h){return h})):s!=null&&(ch(s)&&(s=nw(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(qf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",$f(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+ou(i,l);a+=Jo(i,e,n,u,s)}else if(u=tw(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+ou(i,l++),a+=Jo(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ko(t,e,n){if(t==null)return t;var r=[],s=0;return Jo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function sw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},Zo={transition:null},iw={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:Zo,ReactCurrentOwner:uh};function Eg(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:ko,forEach:function(t,e,n){ko(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ko(t,function(){e++}),e},toArray:function(t){return ko(t,function(e){return e})||[]},only:function(t){if(!ch(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Ns;re.Fragment=G_;re.Profiler=W_;re.PureComponent=ah;re.StrictMode=H_;re.Suspense=J_;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iw;re.act=Eg;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mg({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=uh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)vg.call(e,u)&&!_g.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:eo,type:t.type,key:s,ref:i,props:r,_owner:a}};re.createContext=function(t){return t={$$typeof:K_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Q_,_context:t},t.Consumer=t};re.createElement=wg;re.createFactory=function(t){var e=wg.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:X_,render:t}};re.isValidElement=ch;re.lazy=function(t){return{$$typeof:ew,_payload:{_status:-1,_result:t},_init:sw}};re.memo=function(t,e){return{$$typeof:Z_,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Zo.transition;Zo.transition={};try{t()}finally{Zo.transition=e}};re.unstable_act=Eg;re.useCallback=function(t,e){return mt.current.useCallback(t,e)};re.useContext=function(t){return mt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};re.useEffect=function(t,e){return mt.current.useEffect(t,e)};re.useId=function(){return mt.current.useId()};re.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return mt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};re.useRef=function(t){return mt.current.useRef(t)};re.useState=function(t){return mt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return mt.current.useTransition()};re.version="18.3.1";fg.exports=re;var Q=fg.exports;const ow=q_(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw=Q,lw=Symbol.for("react.element"),uw=Symbol.for("react.fragment"),cw=Object.prototype.hasOwnProperty,hw=aw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dw={key:!0,ref:!0,__self:!0,__source:!0};function Tg(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)cw.call(e,r)&&!dw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:lw,type:t,key:i,ref:a,props:s,_owner:hw.current}}rl.Fragment=uw;rl.jsx=Tg;rl.jsxs=Tg;dg.exports=rl;var f=dg.exports,zu={},xg={exports:{}},Dt={},Sg={exports:{}},Ig={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,q){var X=U.length;U.push(q);e:for(;0<X;){var z=X-1>>>1,$=U[z];if(0<s($,q))U[z]=q,U[X]=$,X=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var q=U[0],X=U.pop();if(X!==q){U[0]=X;e:for(var z=0,$=U.length,Y=$>>>1;z<Y;){var se=2*(z+1)-1,ce=U[se],ve=se+1,fe=U[ve];if(0>s(ce,X))ve<$&&0>s(fe,ce)?(U[z]=fe,U[ve]=X,z=ve):(U[z]=ce,U[se]=X,z=se);else if(ve<$&&0>s(fe,X))U[z]=fe,U[ve]=X,z=ve;else break e}}return q}function s(U,q){var X=U.sortIndex-q.sortIndex;return X!==0?X:U.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],p=1,y=null,v=3,P=!1,k=!1,D=!1,b=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(U){for(var q=n(h);q!==null;){if(q.callback===null)r(h);else if(q.startTime<=U)r(h),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(h)}}function N(U){if(D=!1,A(U),!k)if(n(u)!==null)k=!0,pe(M);else{var q=n(h);q!==null&&Ie(N,q.startTime-U)}}function M(U,q){k=!1,D&&(D=!1,S(g),g=-1),P=!0;var X=v;try{for(A(q),y=n(u);y!==null&&(!(y.expirationTime>q)||U&&!C());){var z=y.callback;if(typeof z=="function"){y.callback=null,v=y.priorityLevel;var $=z(y.expirationTime<=q);q=t.unstable_now(),typeof $=="function"?y.callback=$:y===n(u)&&r(u),A(q)}else r(u);y=n(u)}if(y!==null)var Y=!0;else{var se=n(h);se!==null&&Ie(N,se.startTime-q),Y=!1}return Y}finally{y=null,v=X,P=!1}}var O=!1,w=null,g=-1,E=5,I=-1;function C(){return!(t.unstable_now()-I<E)}function x(){if(w!==null){var U=t.unstable_now();I=U;var q=!0;try{q=w(!0,U)}finally{q?_():(O=!1,w=null)}}else O=!1}var _;if(typeof T=="function")_=function(){T(x)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ne=te.port2;te.port1.onmessage=x,_=function(){ne.postMessage(null)}}else _=function(){b(x,0)};function pe(U){w=U,O||(O=!0,_())}function Ie(U,q){g=b(function(){U(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){k||P||(k=!0,pe(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var X=v;v=q;try{return U()}finally{v=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=v;v=U;try{return q()}finally{v=X}},t.unstable_scheduleCallback=function(U,q,X){var z=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?z+X:z):X=z,U){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=X+$,U={id:p++,callback:q,priorityLevel:U,startTime:X,expirationTime:$,sortIndex:-1},X>z?(U.sortIndex=X,e(h,U),n(u)===null&&U===n(h)&&(D?(S(g),g=-1):D=!0,Ie(N,X-z))):(U.sortIndex=$,e(u,U),k||P||(k=!0,pe(M))),U},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(U){var q=v;return function(){var X=v;v=q;try{return U.apply(this,arguments)}finally{v=X}}}})(Ig);Sg.exports=Ig;var fw=Sg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pw=Q,Nt=fw;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ag=new Set,Ri={};function Vr(t,e){gs(t,e),gs(t+"Capture",e)}function gs(t,e){for(Ri[t]=e,t=0;t<e.length;t++)Ag.add(e[t])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$u=Object.prototype.hasOwnProperty,mw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yf={},Gf={};function gw(t){return $u.call(Gf,t)?!0:$u.call(Yf,t)?!1:mw.test(t)?Gf[t]=!0:(Yf[t]=!0,!1)}function yw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vw(t,e,n,r){if(e===null||typeof e>"u"||yw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var hh=/[\-:]([a-z])/g;function dh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hh,dh);Xe[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hh,dh);Xe[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hh,dh);Xe[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function fh(t,e,n,r){var s=Xe.hasOwnProperty(e)?Xe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vw(e,n,s,r)&&(n=null),r||s===null?gw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cn=pw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ro=Symbol.for("react.element"),Qr=Symbol.for("react.portal"),Kr=Symbol.for("react.fragment"),ph=Symbol.for("react.strict_mode"),qu=Symbol.for("react.profiler"),Pg=Symbol.for("react.provider"),Cg=Symbol.for("react.context"),mh=Symbol.for("react.forward_ref"),Yu=Symbol.for("react.suspense"),Gu=Symbol.for("react.suspense_list"),gh=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),kg=Symbol.for("react.offscreen"),Hf=Symbol.iterator;function ei(t){return t===null||typeof t!="object"?null:(t=Hf&&t[Hf]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,au;function ui(t){if(au===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);au=e&&e[1]||""}return`
`+au+t}var lu=!1;function uu(t,e){if(!t||lu)return"";lu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{lu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ui(t):""}function _w(t){switch(t.tag){case 5:return ui(t.type);case 16:return ui("Lazy");case 13:return ui("Suspense");case 19:return ui("SuspenseList");case 0:case 2:case 15:return t=uu(t.type,!1),t;case 11:return t=uu(t.type.render,!1),t;case 1:return t=uu(t.type,!0),t;default:return""}}function Hu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kr:return"Fragment";case Qr:return"Portal";case qu:return"Profiler";case ph:return"StrictMode";case Yu:return"Suspense";case Gu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cg:return(t.displayName||"Context")+".Consumer";case Pg:return(t._context.displayName||"Context")+".Provider";case mh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gh:return e=t.displayName||null,e!==null?e:Hu(t.type)||"Memo";case bn:e=t._payload,t=t._init;try{return Hu(t(e))}catch{}}return null}function ww(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hu(e);case 8:return e===ph?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ew(t){var e=Rg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function No(t){t._valueTracker||(t._valueTracker=Ew(t))}function Ng(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ga(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wu(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=er(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dg(t,e){e=e.checked,e!=null&&fh(t,"checked",e,!1)}function Qu(t,e){Dg(t,e);var n=er(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ku(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ku(t,e.type,er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ku(t,e,n){(e!=="number"||ga(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ci=Array.isArray;function as(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+er(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Xu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(ci(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:er(n)}}function Vg(t,e){var n=er(e.value),r=er(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ju(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Do,Mg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Do=Do||document.createElement("div"),Do.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Do.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ni(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tw=["Webkit","ms","Moz","O"];Object.keys(yi).forEach(function(t){Tw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yi[e]=yi[t]})});function Og(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yi.hasOwnProperty(t)&&yi[t]?(""+e).trim():e+"px"}function Lg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Og(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var xw=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zu(t,e){if(e){if(xw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function ec(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tc=null;function yh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nc=null,ls=null,us=null;function Jf(t){if(t=ro(t)){if(typeof nc!="function")throw Error(F(280));var e=t.stateNode;e&&(e=ll(e),nc(t.stateNode,t.type,e))}}function jg(t){ls?us?us.push(t):us=[t]:ls=t}function Fg(){if(ls){var t=ls,e=us;if(us=ls=null,Jf(t),e)for(t=0;t<e.length;t++)Jf(e[t])}}function Ug(t,e){return t(e)}function Bg(){}var cu=!1;function zg(t,e,n){if(cu)return t(e,n);cu=!0;try{return Ug(t,e,n)}finally{cu=!1,(ls!==null||us!==null)&&(Bg(),Fg())}}function Di(t,e){var n=t.stateNode;if(n===null)return null;var r=ll(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var rc=!1;if(wn)try{var ti={};Object.defineProperty(ti,"passive",{get:function(){rc=!0}}),window.addEventListener("test",ti,ti),window.removeEventListener("test",ti,ti)}catch{rc=!1}function Sw(t,e,n,r,s,i,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var vi=!1,ya=null,va=!1,sc=null,Iw={onError:function(t){vi=!0,ya=t}};function Aw(t,e,n,r,s,i,a,l,u){vi=!1,ya=null,Sw.apply(Iw,arguments)}function Pw(t,e,n,r,s,i,a,l,u){if(Aw.apply(this,arguments),vi){if(vi){var h=ya;vi=!1,ya=null}else throw Error(F(198));va||(va=!0,sc=h)}}function br(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $g(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zf(t){if(br(t)!==t)throw Error(F(188))}function Cw(t){var e=t.alternate;if(!e){if(e=br(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Zf(s),t;if(i===r)return Zf(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function qg(t){return t=Cw(t),t!==null?Yg(t):null}function Yg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yg(t);if(e!==null)return e;t=t.sibling}return null}var Gg=Nt.unstable_scheduleCallback,ep=Nt.unstable_cancelCallback,kw=Nt.unstable_shouldYield,Rw=Nt.unstable_requestPaint,Ve=Nt.unstable_now,Nw=Nt.unstable_getCurrentPriorityLevel,vh=Nt.unstable_ImmediatePriority,Hg=Nt.unstable_UserBlockingPriority,_a=Nt.unstable_NormalPriority,Dw=Nt.unstable_LowPriority,Wg=Nt.unstable_IdlePriority,sl=null,on=null;function Vw(t){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(sl,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:Ow,bw=Math.log,Mw=Math.LN2;function Ow(t){return t>>>=0,t===0?32:31-(bw(t)/Mw|0)|0}var Vo=64,bo=4194304;function hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=hi(l):(i&=a,i!==0&&(r=hi(i)))}else a=n&~s,a!==0?r=hi(a):i!==0&&(r=hi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wt(e),s=1<<n,r|=t[n],e&=~s;return r}function Lw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Wt(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=Lw(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function ic(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qg(){var t=Vo;return Vo<<=1,!(Vo&4194240)&&(Vo=64),t}function hu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function to(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wt(e),t[e]=n}function Fw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Wt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function _h(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ge=0;function Kg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xg,wh,Jg,Zg,ey,oc=!1,Mo=[],Bn=null,zn=null,$n=null,Vi=new Map,bi=new Map,On=[],Uw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tp(t,e){switch(t){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":Vi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bi.delete(e.pointerId)}}function ni(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ro(e),e!==null&&wh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Bw(t,e,n,r,s){switch(e){case"focusin":return Bn=ni(Bn,t,e,n,r,s),!0;case"dragenter":return zn=ni(zn,t,e,n,r,s),!0;case"mouseover":return $n=ni($n,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Vi.set(i,ni(Vi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,bi.set(i,ni(bi.get(i)||null,t,e,n,r,s)),!0}return!1}function ty(t){var e=wr(t.target);if(e!==null){var n=br(e);if(n!==null){if(e=n.tag,e===13){if(e=$g(n),e!==null){t.blockedOn=e,ey(t.priority,function(){Jg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ea(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ac(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);tc=r,n.target.dispatchEvent(r),tc=null}else return e=ro(n),e!==null&&wh(e),t.blockedOn=n,!1;e.shift()}return!0}function np(t,e,n){ea(t)&&n.delete(e)}function zw(){oc=!1,Bn!==null&&ea(Bn)&&(Bn=null),zn!==null&&ea(zn)&&(zn=null),$n!==null&&ea($n)&&($n=null),Vi.forEach(np),bi.forEach(np)}function ri(t,e){t.blockedOn===e&&(t.blockedOn=null,oc||(oc=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,zw)))}function Mi(t){function e(s){return ri(s,t)}if(0<Mo.length){ri(Mo[0],t);for(var n=1;n<Mo.length;n++){var r=Mo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Bn!==null&&ri(Bn,t),zn!==null&&ri(zn,t),$n!==null&&ri($n,t),Vi.forEach(e),bi.forEach(e),n=0;n<On.length;n++)r=On[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<On.length&&(n=On[0],n.blockedOn===null);)ty(n),n.blockedOn===null&&On.shift()}var cs=Cn.ReactCurrentBatchConfig,Ea=!0;function $w(t,e,n,r){var s=ge,i=cs.transition;cs.transition=null;try{ge=1,Eh(t,e,n,r)}finally{ge=s,cs.transition=i}}function qw(t,e,n,r){var s=ge,i=cs.transition;cs.transition=null;try{ge=4,Eh(t,e,n,r)}finally{ge=s,cs.transition=i}}function Eh(t,e,n,r){if(Ea){var s=ac(t,e,n,r);if(s===null)Eu(t,e,r,Ta,n),tp(t,r);else if(Bw(s,t,e,n,r))r.stopPropagation();else if(tp(t,r),e&4&&-1<Uw.indexOf(t)){for(;s!==null;){var i=ro(s);if(i!==null&&Xg(i),i=ac(t,e,n,r),i===null&&Eu(t,e,r,Ta,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Eu(t,e,r,null,n)}}var Ta=null;function ac(t,e,n,r){if(Ta=null,t=yh(r),t=wr(t),t!==null)if(e=br(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$g(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ta=t,null}function ny(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nw()){case vh:return 1;case Hg:return 4;case _a:case Dw:return 16;case Wg:return 536870912;default:return 16}default:return 16}}var jn=null,Th=null,ta=null;function ry(){if(ta)return ta;var t,e=Th,n=e.length,r,s="value"in jn?jn.value:jn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return ta=s.slice(t,1<r?1-r:void 0)}function na(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oo(){return!0}function rp(){return!1}function Vt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oo:rp,this.isPropagationStopped=rp,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),e}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xh=Vt(Ds),no=Ce({},Ds,{view:0,detail:0}),Yw=Vt(no),du,fu,si,il=Ce({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==si&&(si&&t.type==="mousemove"?(du=t.screenX-si.screenX,fu=t.screenY-si.screenY):fu=du=0,si=t),du)},movementY:function(t){return"movementY"in t?t.movementY:fu}}),sp=Vt(il),Gw=Ce({},il,{dataTransfer:0}),Hw=Vt(Gw),Ww=Ce({},no,{relatedTarget:0}),pu=Vt(Ww),Qw=Ce({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),Kw=Vt(Qw),Xw=Ce({},Ds,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Jw=Vt(Xw),Zw=Ce({},Ds,{data:0}),ip=Vt(Zw),eE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nE[t])?!!e[t]:!1}function Sh(){return rE}var sE=Ce({},no,{key:function(t){if(t.key){var e=eE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=na(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sh,charCode:function(t){return t.type==="keypress"?na(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?na(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iE=Vt(sE),oE=Ce({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),op=Vt(oE),aE=Ce({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sh}),lE=Vt(aE),uE=Ce({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),cE=Vt(uE),hE=Ce({},il,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dE=Vt(hE),fE=[9,13,27,32],Ih=wn&&"CompositionEvent"in window,_i=null;wn&&"documentMode"in document&&(_i=document.documentMode);var pE=wn&&"TextEvent"in window&&!_i,sy=wn&&(!Ih||_i&&8<_i&&11>=_i),ap=" ",lp=!1;function iy(t,e){switch(t){case"keyup":return fE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xr=!1;function mE(t,e){switch(t){case"compositionend":return oy(e);case"keypress":return e.which!==32?null:(lp=!0,ap);case"textInput":return t=e.data,t===ap&&lp?null:t;default:return null}}function gE(t,e){if(Xr)return t==="compositionend"||!Ih&&iy(t,e)?(t=ry(),ta=Th=jn=null,Xr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sy&&e.locale!=="ko"?null:e.data;default:return null}}var yE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yE[t.type]:e==="textarea"}function ay(t,e,n,r){jg(r),e=xa(e,"onChange"),0<e.length&&(n=new xh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wi=null,Oi=null;function vE(t){vy(t,0)}function ol(t){var e=es(t);if(Ng(e))return t}function _E(t,e){if(t==="change")return e}var ly=!1;if(wn){var mu;if(wn){var gu="oninput"in document;if(!gu){var cp=document.createElement("div");cp.setAttribute("oninput","return;"),gu=typeof cp.oninput=="function"}mu=gu}else mu=!1;ly=mu&&(!document.documentMode||9<document.documentMode)}function hp(){wi&&(wi.detachEvent("onpropertychange",uy),Oi=wi=null)}function uy(t){if(t.propertyName==="value"&&ol(Oi)){var e=[];ay(e,Oi,t,yh(t)),zg(vE,e)}}function wE(t,e,n){t==="focusin"?(hp(),wi=e,Oi=n,wi.attachEvent("onpropertychange",uy)):t==="focusout"&&hp()}function EE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ol(Oi)}function TE(t,e){if(t==="click")return ol(e)}function xE(t,e){if(t==="input"||t==="change")return ol(e)}function SE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xt=typeof Object.is=="function"?Object.is:SE;function Li(t,e){if(Xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$u.call(e,s)||!Xt(t[s],e[s]))return!1}return!0}function dp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fp(t,e){var n=dp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dp(n)}}function cy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hy(){for(var t=window,e=ga();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ga(t.document)}return e}function Ah(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function IE(t){var e=hy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cy(n.ownerDocument.documentElement,n)){if(r!==null&&Ah(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=fp(n,i);var a=fp(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AE=wn&&"documentMode"in document&&11>=document.documentMode,Jr=null,lc=null,Ei=null,uc=!1;function pp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uc||Jr==null||Jr!==ga(r)||(r=Jr,"selectionStart"in r&&Ah(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ei&&Li(Ei,r)||(Ei=r,r=xa(lc,"onSelect"),0<r.length&&(e=new xh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Jr)))}function Lo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zr={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionend:Lo("Transition","TransitionEnd")},yu={},dy={};wn&&(dy=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function al(t){if(yu[t])return yu[t];if(!Zr[t])return t;var e=Zr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dy)return yu[t]=e[n];return t}var fy=al("animationend"),py=al("animationiteration"),my=al("animationstart"),gy=al("transitionend"),yy=new Map,mp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(t,e){yy.set(t,e),Vr(e,[t])}for(var vu=0;vu<mp.length;vu++){var _u=mp[vu],PE=_u.toLowerCase(),CE=_u[0].toUpperCase()+_u.slice(1);lr(PE,"on"+CE)}lr(fy,"onAnimationEnd");lr(py,"onAnimationIteration");lr(my,"onAnimationStart");lr("dblclick","onDoubleClick");lr("focusin","onFocus");lr("focusout","onBlur");lr(gy,"onTransitionEnd");gs("onMouseEnter",["mouseout","mouseover"]);gs("onMouseLeave",["mouseout","mouseover"]);gs("onPointerEnter",["pointerout","pointerover"]);gs("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kE=new Set("cancel close invalid load scroll toggle".split(" ").concat(di));function gp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Pw(r,e,void 0,t),t.currentTarget=null}function vy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;gp(s,l,h),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;gp(s,l,h),i=u}}}if(va)throw t=sc,va=!1,sc=null,t}function Ee(t,e){var n=e[pc];n===void 0&&(n=e[pc]=new Set);var r=t+"__bubble";n.has(r)||(_y(e,t,2,!1),n.add(r))}function wu(t,e,n){var r=0;e&&(r|=4),_y(n,t,r,e)}var jo="_reactListening"+Math.random().toString(36).slice(2);function ji(t){if(!t[jo]){t[jo]=!0,Ag.forEach(function(n){n!=="selectionchange"&&(kE.has(n)||wu(n,!1,t),wu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jo]||(e[jo]=!0,wu("selectionchange",!1,e))}}function _y(t,e,n,r){switch(ny(e)){case 1:var s=$w;break;case 4:s=qw;break;default:s=Eh}n=s.bind(null,e,n,t),s=void 0,!rc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Eu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=wr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}zg(function(){var h=i,p=yh(n),y=[];e:{var v=yy.get(t);if(v!==void 0){var P=xh,k=t;switch(t){case"keypress":if(na(n)===0)break e;case"keydown":case"keyup":P=iE;break;case"focusin":k="focus",P=pu;break;case"focusout":k="blur",P=pu;break;case"beforeblur":case"afterblur":P=pu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=sp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=Hw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=lE;break;case fy:case py:case my:P=Kw;break;case gy:P=cE;break;case"scroll":P=Yw;break;case"wheel":P=dE;break;case"copy":case"cut":case"paste":P=Jw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=op}var D=(e&4)!==0,b=!D&&t==="scroll",S=D?v!==null?v+"Capture":null:v;D=[];for(var T=h,A;T!==null;){A=T;var N=A.stateNode;if(A.tag===5&&N!==null&&(A=N,S!==null&&(N=Di(T,S),N!=null&&D.push(Fi(T,N,A)))),b)break;T=T.return}0<D.length&&(v=new P(v,k,null,n,p),y.push({event:v,listeners:D}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",v&&n!==tc&&(k=n.relatedTarget||n.fromElement)&&(wr(k)||k[En]))break e;if((P||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,P?(k=n.relatedTarget||n.toElement,P=h,k=k?wr(k):null,k!==null&&(b=br(k),k!==b||k.tag!==5&&k.tag!==6)&&(k=null)):(P=null,k=h),P!==k)){if(D=sp,N="onMouseLeave",S="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(D=op,N="onPointerLeave",S="onPointerEnter",T="pointer"),b=P==null?v:es(P),A=k==null?v:es(k),v=new D(N,T+"leave",P,n,p),v.target=b,v.relatedTarget=A,N=null,wr(p)===h&&(D=new D(S,T+"enter",k,n,p),D.target=A,D.relatedTarget=b,N=D),b=N,P&&k)t:{for(D=P,S=k,T=0,A=D;A;A=qr(A))T++;for(A=0,N=S;N;N=qr(N))A++;for(;0<T-A;)D=qr(D),T--;for(;0<A-T;)S=qr(S),A--;for(;T--;){if(D===S||S!==null&&D===S.alternate)break t;D=qr(D),S=qr(S)}D=null}else D=null;P!==null&&yp(y,v,P,D,!1),k!==null&&b!==null&&yp(y,b,k,D,!0)}}e:{if(v=h?es(h):window,P=v.nodeName&&v.nodeName.toLowerCase(),P==="select"||P==="input"&&v.type==="file")var M=_E;else if(up(v))if(ly)M=xE;else{M=EE;var O=wE}else(P=v.nodeName)&&P.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(M=TE);if(M&&(M=M(t,h))){ay(y,M,n,p);break e}O&&O(t,v,h),t==="focusout"&&(O=v._wrapperState)&&O.controlled&&v.type==="number"&&Ku(v,"number",v.value)}switch(O=h?es(h):window,t){case"focusin":(up(O)||O.contentEditable==="true")&&(Jr=O,lc=h,Ei=null);break;case"focusout":Ei=lc=Jr=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,pp(y,n,p);break;case"selectionchange":if(AE)break;case"keydown":case"keyup":pp(y,n,p)}var w;if(Ih)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Xr?iy(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(sy&&n.locale!=="ko"&&(Xr||g!=="onCompositionStart"?g==="onCompositionEnd"&&Xr&&(w=ry()):(jn=p,Th="value"in jn?jn.value:jn.textContent,Xr=!0)),O=xa(h,g),0<O.length&&(g=new ip(g,t,null,n,p),y.push({event:g,listeners:O}),w?g.data=w:(w=oy(n),w!==null&&(g.data=w)))),(w=pE?mE(t,n):gE(t,n))&&(h=xa(h,"onBeforeInput"),0<h.length&&(p=new ip("onBeforeInput","beforeinput",null,n,p),y.push({event:p,listeners:h}),p.data=w))}vy(y,e)})}function Fi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Di(t,n),i!=null&&r.unshift(Fi(t,i,s)),i=Di(t,e),i!=null&&r.push(Fi(t,i,s))),t=t.return}return r}function qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yp(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Di(n,i),u!=null&&a.unshift(Fi(n,u,l))):s||(u=Di(n,i),u!=null&&a.push(Fi(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var RE=/\r\n?/g,NE=/\u0000|\uFFFD/g;function vp(t){return(typeof t=="string"?t:""+t).replace(RE,`
`).replace(NE,"")}function Fo(t,e,n){if(e=vp(e),vp(t)!==e&&n)throw Error(F(425))}function Sa(){}var cc=null,hc=null;function dc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fc=typeof setTimeout=="function"?setTimeout:void 0,DE=typeof clearTimeout=="function"?clearTimeout:void 0,_p=typeof Promise=="function"?Promise:void 0,VE=typeof queueMicrotask=="function"?queueMicrotask:typeof _p<"u"?function(t){return _p.resolve(null).then(t).catch(bE)}:fc;function bE(t){setTimeout(function(){throw t})}function Tu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Mi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Mi(e)}function qn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vs=Math.random().toString(36).slice(2),sn="__reactFiber$"+Vs,Ui="__reactProps$"+Vs,En="__reactContainer$"+Vs,pc="__reactEvents$"+Vs,ME="__reactListeners$"+Vs,OE="__reactHandles$"+Vs;function wr(t){var e=t[sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[En]||n[sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wp(t);t!==null;){if(n=t[sn])return n;t=wp(t)}return e}t=n,n=t.parentNode}return null}function ro(t){return t=t[sn]||t[En],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function es(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function ll(t){return t[Ui]||null}var mc=[],ts=-1;function ur(t){return{current:t}}function xe(t){0>ts||(t.current=mc[ts],mc[ts]=null,ts--)}function _e(t,e){ts++,mc[ts]=t.current,t.current=e}var tr={},ut=ur(tr),Tt=ur(!1),Ar=tr;function ys(t,e){var n=t.type.contextTypes;if(!n)return tr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function xt(t){return t=t.childContextTypes,t!=null}function Ia(){xe(Tt),xe(ut)}function Ep(t,e,n){if(ut.current!==tr)throw Error(F(168));_e(ut,e),_e(Tt,n)}function wy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,ww(t)||"Unknown",s));return Ce({},n,r)}function Aa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tr,Ar=ut.current,_e(ut,t),_e(Tt,Tt.current),!0}function Tp(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=wy(t,e,Ar),r.__reactInternalMemoizedMergedChildContext=t,xe(Tt),xe(ut),_e(ut,t)):xe(Tt),_e(Tt,n)}var mn=null,ul=!1,xu=!1;function Ey(t){mn===null?mn=[t]:mn.push(t)}function LE(t){ul=!0,Ey(t)}function cr(){if(!xu&&mn!==null){xu=!0;var t=0,e=ge;try{var n=mn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mn=null,ul=!1}catch(s){throw mn!==null&&(mn=mn.slice(t+1)),Gg(vh,cr),s}finally{ge=e,xu=!1}}return null}var ns=[],rs=0,Pa=null,Ca=0,Mt=[],Ot=0,Pr=null,gn=1,yn="";function yr(t,e){ns[rs++]=Ca,ns[rs++]=Pa,Pa=t,Ca=e}function Ty(t,e,n){Mt[Ot++]=gn,Mt[Ot++]=yn,Mt[Ot++]=Pr,Pr=t;var r=gn;t=yn;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var i=32-Wt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,gn=1<<32-Wt(e)+s|n<<s|r,yn=i+t}else gn=1<<i|n<<s|r,yn=t}function Ph(t){t.return!==null&&(yr(t,1),Ty(t,1,0))}function Ch(t){for(;t===Pa;)Pa=ns[--rs],ns[rs]=null,Ca=ns[--rs],ns[rs]=null;for(;t===Pr;)Pr=Mt[--Ot],Mt[Ot]=null,yn=Mt[--Ot],Mt[Ot]=null,gn=Mt[--Ot],Mt[Ot]=null}var Rt=null,Ct=null,Se=!1,Ht=null;function xy(t,e){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rt=t,Ct=qn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rt=t,Ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pr!==null?{id:gn,overflow:yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rt=t,Ct=null,!0):!1;default:return!1}}function gc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yc(t){if(Se){var e=Ct;if(e){var n=e;if(!xp(t,e)){if(gc(t))throw Error(F(418));e=qn(n.nextSibling);var r=Rt;e&&xp(t,e)?xy(r,n):(t.flags=t.flags&-4097|2,Se=!1,Rt=t)}}else{if(gc(t))throw Error(F(418));t.flags=t.flags&-4097|2,Se=!1,Rt=t}}}function Sp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rt=t}function Uo(t){if(t!==Rt)return!1;if(!Se)return Sp(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dc(t.type,t.memoizedProps)),e&&(e=Ct)){if(gc(t))throw Sy(),Error(F(418));for(;e;)xy(t,e),e=qn(e.nextSibling)}if(Sp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ct=qn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ct=null}}else Ct=Rt?qn(t.stateNode.nextSibling):null;return!0}function Sy(){for(var t=Ct;t;)t=qn(t.nextSibling)}function vs(){Ct=Rt=null,Se=!1}function kh(t){Ht===null?Ht=[t]:Ht.push(t)}var jE=Cn.ReactCurrentBatchConfig;function ii(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Bo(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ip(t){var e=t._init;return e(t._payload)}function Iy(t){function e(S,T){if(t){var A=S.deletions;A===null?(S.deletions=[T],S.flags|=16):A.push(T)}}function n(S,T){if(!t)return null;for(;T!==null;)e(S,T),T=T.sibling;return null}function r(S,T){for(S=new Map;T!==null;)T.key!==null?S.set(T.key,T):S.set(T.index,T),T=T.sibling;return S}function s(S,T){return S=Wn(S,T),S.index=0,S.sibling=null,S}function i(S,T,A){return S.index=A,t?(A=S.alternate,A!==null?(A=A.index,A<T?(S.flags|=2,T):A):(S.flags|=2,T)):(S.flags|=1048576,T)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,T,A,N){return T===null||T.tag!==6?(T=Ru(A,S.mode,N),T.return=S,T):(T=s(T,A),T.return=S,T)}function u(S,T,A,N){var M=A.type;return M===Kr?p(S,T,A.props.children,N,A.key):T!==null&&(T.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===bn&&Ip(M)===T.type)?(N=s(T,A.props),N.ref=ii(S,T,A),N.return=S,N):(N=ua(A.type,A.key,A.props,null,S.mode,N),N.ref=ii(S,T,A),N.return=S,N)}function h(S,T,A,N){return T===null||T.tag!==4||T.stateNode.containerInfo!==A.containerInfo||T.stateNode.implementation!==A.implementation?(T=Nu(A,S.mode,N),T.return=S,T):(T=s(T,A.children||[]),T.return=S,T)}function p(S,T,A,N,M){return T===null||T.tag!==7?(T=Ir(A,S.mode,N,M),T.return=S,T):(T=s(T,A),T.return=S,T)}function y(S,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Ru(""+T,S.mode,A),T.return=S,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ro:return A=ua(T.type,T.key,T.props,null,S.mode,A),A.ref=ii(S,null,T),A.return=S,A;case Qr:return T=Nu(T,S.mode,A),T.return=S,T;case bn:var N=T._init;return y(S,N(T._payload),A)}if(ci(T)||ei(T))return T=Ir(T,S.mode,A,null),T.return=S,T;Bo(S,T)}return null}function v(S,T,A,N){var M=T!==null?T.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return M!==null?null:l(S,T,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ro:return A.key===M?u(S,T,A,N):null;case Qr:return A.key===M?h(S,T,A,N):null;case bn:return M=A._init,v(S,T,M(A._payload),N)}if(ci(A)||ei(A))return M!==null?null:p(S,T,A,N,null);Bo(S,A)}return null}function P(S,T,A,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return S=S.get(A)||null,l(T,S,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ro:return S=S.get(N.key===null?A:N.key)||null,u(T,S,N,M);case Qr:return S=S.get(N.key===null?A:N.key)||null,h(T,S,N,M);case bn:var O=N._init;return P(S,T,A,O(N._payload),M)}if(ci(N)||ei(N))return S=S.get(A)||null,p(T,S,N,M,null);Bo(T,N)}return null}function k(S,T,A,N){for(var M=null,O=null,w=T,g=T=0,E=null;w!==null&&g<A.length;g++){w.index>g?(E=w,w=null):E=w.sibling;var I=v(S,w,A[g],N);if(I===null){w===null&&(w=E);break}t&&w&&I.alternate===null&&e(S,w),T=i(I,T,g),O===null?M=I:O.sibling=I,O=I,w=E}if(g===A.length)return n(S,w),Se&&yr(S,g),M;if(w===null){for(;g<A.length;g++)w=y(S,A[g],N),w!==null&&(T=i(w,T,g),O===null?M=w:O.sibling=w,O=w);return Se&&yr(S,g),M}for(w=r(S,w);g<A.length;g++)E=P(w,S,g,A[g],N),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?g:E.key),T=i(E,T,g),O===null?M=E:O.sibling=E,O=E);return t&&w.forEach(function(C){return e(S,C)}),Se&&yr(S,g),M}function D(S,T,A,N){var M=ei(A);if(typeof M!="function")throw Error(F(150));if(A=M.call(A),A==null)throw Error(F(151));for(var O=M=null,w=T,g=T=0,E=null,I=A.next();w!==null&&!I.done;g++,I=A.next()){w.index>g?(E=w,w=null):E=w.sibling;var C=v(S,w,I.value,N);if(C===null){w===null&&(w=E);break}t&&w&&C.alternate===null&&e(S,w),T=i(C,T,g),O===null?M=C:O.sibling=C,O=C,w=E}if(I.done)return n(S,w),Se&&yr(S,g),M;if(w===null){for(;!I.done;g++,I=A.next())I=y(S,I.value,N),I!==null&&(T=i(I,T,g),O===null?M=I:O.sibling=I,O=I);return Se&&yr(S,g),M}for(w=r(S,w);!I.done;g++,I=A.next())I=P(w,S,g,I.value,N),I!==null&&(t&&I.alternate!==null&&w.delete(I.key===null?g:I.key),T=i(I,T,g),O===null?M=I:O.sibling=I,O=I);return t&&w.forEach(function(x){return e(S,x)}),Se&&yr(S,g),M}function b(S,T,A,N){if(typeof A=="object"&&A!==null&&A.type===Kr&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Ro:e:{for(var M=A.key,O=T;O!==null;){if(O.key===M){if(M=A.type,M===Kr){if(O.tag===7){n(S,O.sibling),T=s(O,A.props.children),T.return=S,S=T;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===bn&&Ip(M)===O.type){n(S,O.sibling),T=s(O,A.props),T.ref=ii(S,O,A),T.return=S,S=T;break e}n(S,O);break}else e(S,O);O=O.sibling}A.type===Kr?(T=Ir(A.props.children,S.mode,N,A.key),T.return=S,S=T):(N=ua(A.type,A.key,A.props,null,S.mode,N),N.ref=ii(S,T,A),N.return=S,S=N)}return a(S);case Qr:e:{for(O=A.key;T!==null;){if(T.key===O)if(T.tag===4&&T.stateNode.containerInfo===A.containerInfo&&T.stateNode.implementation===A.implementation){n(S,T.sibling),T=s(T,A.children||[]),T.return=S,S=T;break e}else{n(S,T);break}else e(S,T);T=T.sibling}T=Nu(A,S.mode,N),T.return=S,S=T}return a(S);case bn:return O=A._init,b(S,T,O(A._payload),N)}if(ci(A))return k(S,T,A,N);if(ei(A))return D(S,T,A,N);Bo(S,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,T!==null&&T.tag===6?(n(S,T.sibling),T=s(T,A),T.return=S,S=T):(n(S,T),T=Ru(A,S.mode,N),T.return=S,S=T),a(S)):n(S,T)}return b}var _s=Iy(!0),Ay=Iy(!1),ka=ur(null),Ra=null,ss=null,Rh=null;function Nh(){Rh=ss=Ra=null}function Dh(t){var e=ka.current;xe(ka),t._currentValue=e}function vc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hs(t,e){Ra=t,Rh=ss=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Ut(t){var e=t._currentValue;if(Rh!==t)if(t={context:t,memoizedValue:e,next:null},ss===null){if(Ra===null)throw Error(F(308));ss=t,Ra.dependencies={lanes:0,firstContext:t}}else ss=ss.next=t;return e}var Er=null;function Vh(t){Er===null?Er=[t]:Er.push(t)}function Py(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Vh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tn(t,r)}function Tn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mn=!1;function bh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Tn(t,n)}return s=r.interleaved,s===null?(e.next=e,Vh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Tn(t,n)}function ra(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_h(t,n)}}function Ap(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Na(t,e,n,r){var s=t.updateQueue;Mn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?i=h:a.next=h,a=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(i!==null){var y=s.baseState;a=0,p=h=u=null,l=i;do{var v=l.lane,P=l.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:P,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,D=l;switch(v=e,P=n,D.tag){case 1:if(k=D.payload,typeof k=="function"){y=k.call(P,y,v);break e}y=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=D.payload,v=typeof k=="function"?k.call(P,y,v):k,v==null)break e;y=Ce({},y,v);break e;case 2:Mn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,v=s.effects,v===null?s.effects=[l]:v.push(l))}else P={eventTime:P,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=P,u=y):p=p.next=P,a|=v;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(p===null&&(u=y),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);kr|=a,t.lanes=a,t.memoizedState=y}}function Pp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var so={},an=ur(so),Bi=ur(so),zi=ur(so);function Tr(t){if(t===so)throw Error(F(174));return t}function Mh(t,e){switch(_e(zi,e),_e(Bi,t),_e(an,so),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ju(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ju(e,t)}xe(an),_e(an,e)}function ws(){xe(an),xe(Bi),xe(zi)}function ky(t){Tr(zi.current);var e=Tr(an.current),n=Ju(e,t.type);e!==n&&(_e(Bi,t),_e(an,n))}function Oh(t){Bi.current===t&&(xe(an),xe(Bi))}var Ae=ur(0);function Da(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Su=[];function Lh(){for(var t=0;t<Su.length;t++)Su[t]._workInProgressVersionPrimary=null;Su.length=0}var sa=Cn.ReactCurrentDispatcher,Iu=Cn.ReactCurrentBatchConfig,Cr=0,Pe=null,Fe=null,qe=null,Va=!1,Ti=!1,$i=0,FE=0;function nt(){throw Error(F(321))}function jh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xt(t[n],e[n]))return!1;return!0}function Fh(t,e,n,r,s,i){if(Cr=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sa.current=t===null||t.memoizedState===null?$E:qE,t=n(r,s),Ti){i=0;do{if(Ti=!1,$i=0,25<=i)throw Error(F(301));i+=1,qe=Fe=null,e.updateQueue=null,sa.current=YE,t=n(r,s)}while(Ti)}if(sa.current=ba,e=Fe!==null&&Fe.next!==null,Cr=0,qe=Fe=Pe=null,Va=!1,e)throw Error(F(300));return t}function Uh(){var t=$i!==0;return $i=0,t}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Pe.memoizedState=qe=t:qe=qe.next=t,qe}function Bt(){if(Fe===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=qe===null?Pe.memoizedState:qe.next;if(e!==null)qe=e,Fe=t;else{if(t===null)throw Error(F(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},qe===null?Pe.memoizedState=qe=t:qe=qe.next=t}return qe}function qi(t,e){return typeof e=="function"?e(t):e}function Au(t){var e=Bt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,h=i;do{var p=h.lane;if((Cr&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var y={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=y,a=r):u=u.next=y,Pe.lanes|=p,kr|=p}h=h.next}while(h!==null&&h!==i);u===null?a=r:u.next=l,Xt(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,kr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pu(t){var e=Bt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Xt(i,e.memoizedState)||(Et=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ry(){}function Ny(t,e){var n=Pe,r=Bt(),s=e(),i=!Xt(r.memoizedState,s);if(i&&(r.memoizedState=s,Et=!0),r=r.queue,Bh(by.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,Yi(9,Vy.bind(null,n,r,s,e),void 0,null),Ye===null)throw Error(F(349));Cr&30||Dy(n,e,s)}return s}function Dy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Vy(t,e,n,r){e.value=n,e.getSnapshot=r,My(e)&&Oy(t)}function by(t,e,n){return n(function(){My(e)&&Oy(t)})}function My(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xt(t,n)}catch{return!0}}function Oy(t){var e=Tn(t,1);e!==null&&Qt(e,t,1,-1)}function Cp(t){var e=nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:t},e.queue=t,t=t.dispatch=zE.bind(null,Pe,t),[e.memoizedState,t]}function Yi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ly(){return Bt().memoizedState}function ia(t,e,n,r){var s=nn();Pe.flags|=t,s.memoizedState=Yi(1|e,n,void 0,r===void 0?null:r)}function cl(t,e,n,r){var s=Bt();r=r===void 0?null:r;var i=void 0;if(Fe!==null){var a=Fe.memoizedState;if(i=a.destroy,r!==null&&jh(r,a.deps)){s.memoizedState=Yi(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=Yi(1|e,n,i,r)}function kp(t,e){return ia(8390656,8,t,e)}function Bh(t,e){return cl(2048,8,t,e)}function jy(t,e){return cl(4,2,t,e)}function Fy(t,e){return cl(4,4,t,e)}function Uy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function By(t,e,n){return n=n!=null?n.concat([t]):null,cl(4,4,Uy.bind(null,e,t),n)}function zh(){}function zy(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $y(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qy(t,e,n){return Cr&21?(Xt(n,e)||(n=Qg(),Pe.lanes|=n,kr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function UE(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Iu.transition;Iu.transition={};try{t(!1),e()}finally{ge=n,Iu.transition=r}}function Yy(){return Bt().memoizedState}function BE(t,e,n){var r=Hn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gy(t))Hy(e,n);else if(n=Py(t,e,n,r),n!==null){var s=pt();Qt(n,t,r,s),Wy(n,e,r)}}function zE(t,e,n){var r=Hn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gy(t))Hy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Xt(l,a)){var u=e.interleaved;u===null?(s.next=s,Vh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Py(t,e,s,r),n!==null&&(s=pt(),Qt(n,t,r,s),Wy(n,e,r))}}function Gy(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function Hy(t,e){Ti=Va=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Wy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_h(t,n)}}var ba={readContext:Ut,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},$E={readContext:Ut,useCallback:function(t,e){return nn().memoizedState=[t,e===void 0?null:e],t},useContext:Ut,useEffect:kp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ia(4194308,4,Uy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ia(4194308,4,t,e)},useInsertionEffect:function(t,e){return ia(4,2,t,e)},useMemo:function(t,e){var n=nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BE.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=nn();return t={current:t},e.memoizedState=t},useState:Cp,useDebugValue:zh,useDeferredValue:function(t){return nn().memoizedState=t},useTransition:function(){var t=Cp(!1),e=t[0];return t=UE.bind(null,t[1]),nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=nn();if(Se){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Ye===null)throw Error(F(349));Cr&30||Dy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,kp(by.bind(null,r,i,t),[t]),r.flags|=2048,Yi(9,Vy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=nn(),e=Ye.identifierPrefix;if(Se){var n=yn,r=gn;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$i++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=FE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qE={readContext:Ut,useCallback:zy,useContext:Ut,useEffect:Bh,useImperativeHandle:By,useInsertionEffect:jy,useLayoutEffect:Fy,useMemo:$y,useReducer:Au,useRef:Ly,useState:function(){return Au(qi)},useDebugValue:zh,useDeferredValue:function(t){var e=Bt();return qy(e,Fe.memoizedState,t)},useTransition:function(){var t=Au(qi)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Ry,useSyncExternalStore:Ny,useId:Yy,unstable_isNewReconciler:!1},YE={readContext:Ut,useCallback:zy,useContext:Ut,useEffect:Bh,useImperativeHandle:By,useInsertionEffect:jy,useLayoutEffect:Fy,useMemo:$y,useReducer:Pu,useRef:Ly,useState:function(){return Pu(qi)},useDebugValue:zh,useDeferredValue:function(t){var e=Bt();return Fe===null?e.memoizedState=t:qy(e,Fe.memoizedState,t)},useTransition:function(){var t=Pu(qi)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Ry,useSyncExternalStore:Ny,useId:Yy,unstable_isNewReconciler:!1};function Yt(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _c(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hl={isMounted:function(t){return(t=t._reactInternals)?br(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Hn(t),i=vn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Yn(t,i,s),e!==null&&(Qt(e,t,s,r),ra(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Hn(t),i=vn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Yn(t,i,s),e!==null&&(Qt(e,t,s,r),ra(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=Hn(t),s=vn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Yn(t,s,r),e!==null&&(Qt(e,t,r,n),ra(e,t,r))}};function Rp(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Li(n,r)||!Li(s,i):!0}function Qy(t,e,n){var r=!1,s=tr,i=e.contextType;return typeof i=="object"&&i!==null?i=Ut(i):(s=xt(e)?Ar:ut.current,r=e.contextTypes,i=(r=r!=null)?ys(t,s):tr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Np(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hl.enqueueReplaceState(e,e.state,null)}function wc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},bh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ut(i):(i=xt(e)?Ar:ut.current,s.context=ys(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(_c(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&hl.enqueueReplaceState(s,s.state,null),Na(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Es(t,e){try{var n="",r=e;do n+=_w(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Cu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ec(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var GE=typeof WeakMap=="function"?WeakMap:Map;function Ky(t,e,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Oa||(Oa=!0,Nc=r),Ec(t,e)},n}function Xy(t,e,n){n=vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ec(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ec(t,e),typeof r!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Dp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new GE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=oT.bind(null,t,e,n),e.then(t,t))}function Vp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vn(-1,1),e.tag=2,Yn(n,e,1))),n.lanes|=1),t)}var HE=Cn.ReactCurrentOwner,Et=!1;function dt(t,e,n,r){e.child=t===null?Ay(e,null,n,r):_s(e,t.child,n,r)}function Mp(t,e,n,r,s){n=n.render;var i=e.ref;return hs(e,s),r=Fh(t,e,n,r,i,s),n=Uh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xn(t,e,s)):(Se&&n&&Ph(e),e.flags|=1,dt(t,e,r,s),e.child)}function Op(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Kh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Jy(t,e,i,r,s)):(t=ua(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Li,n(a,r)&&t.ref===e.ref)return xn(t,e,s)}return e.flags|=1,t=Wn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Jy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Li(i,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,xn(t,e,s)}return Tc(t,e,n,r,s)}function Zy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(os,Pt),Pt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(os,Pt),Pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(os,Pt),Pt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(os,Pt),Pt|=r;return dt(t,e,s,n),e.child}function ev(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tc(t,e,n,r,s){var i=xt(n)?Ar:ut.current;return i=ys(e,i),hs(e,s),n=Fh(t,e,n,r,i,s),r=Uh(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xn(t,e,s)):(Se&&r&&Ph(e),e.flags|=1,dt(t,e,n,s),e.child)}function Lp(t,e,n,r,s){if(xt(n)){var i=!0;Aa(e)}else i=!1;if(hs(e,s),e.stateNode===null)oa(t,e),Qy(e,n,r),wc(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ut(h):(h=xt(n)?Ar:ut.current,h=ys(e,h));var p=n.getDerivedStateFromProps,y=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Np(e,a,r,h),Mn=!1;var v=e.memoizedState;a.state=v,Na(e,r,a,s),u=e.memoizedState,l!==r||v!==u||Tt.current||Mn?(typeof p=="function"&&(_c(e,n,p,r),u=e.memoizedState),(l=Mn||Rp(e,n,l,r,v,u,h))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Cy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Yt(e.type,l),a.props=h,y=e.pendingProps,v=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ut(u):(u=xt(n)?Ar:ut.current,u=ys(e,u));var P=n.getDerivedStateFromProps;(p=typeof P=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==y||v!==u)&&Np(e,a,r,u),Mn=!1,v=e.memoizedState,a.state=v,Na(e,r,a,s);var k=e.memoizedState;l!==y||v!==k||Tt.current||Mn?(typeof P=="function"&&(_c(e,n,P,r),k=e.memoizedState),(h=Mn||Rp(e,n,h,r,v,k,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,k,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,k,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),a.props=r,a.state=k,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return xc(t,e,n,r,i,s)}function xc(t,e,n,r,s,i){ev(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Tp(e,n,!1),xn(t,e,i);r=e.stateNode,HE.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=_s(e,t.child,null,i),e.child=_s(e,null,l,i)):dt(t,e,l,i),e.memoizedState=r.state,s&&Tp(e,n,!0),e.child}function tv(t){var e=t.stateNode;e.pendingContext?Ep(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ep(t,e.context,!1),Mh(t,e.containerInfo)}function jp(t,e,n,r,s){return vs(),kh(s),e.flags|=256,dt(t,e,n,r),e.child}var Sc={dehydrated:null,treeContext:null,retryLane:0};function Ic(t){return{baseLanes:t,cachePool:null,transitions:null}}function nv(t,e,n){var r=e.pendingProps,s=Ae.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Ae,s&1),t===null)return yc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=pl(a,r,0,null),t=Ir(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ic(n),e.memoizedState=Sc,t):$h(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return WE(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Wn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Wn(l,i):(i=Ir(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Ic(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Sc,r}return i=t.child,t=i.sibling,r=Wn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $h(t,e){return e=pl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zo(t,e,n,r){return r!==null&&kh(r),_s(e,t.child,null,n),t=$h(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function WE(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Cu(Error(F(422))),zo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=pl({mode:"visible",children:r.children},s,0,null),i=Ir(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&_s(e,t.child,null,a),e.child.memoizedState=Ic(a),e.memoizedState=Sc,i);if(!(e.mode&1))return zo(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=Cu(i,r,void 0),zo(t,e,a,r)}if(l=(a&t.childLanes)!==0,Et||l){if(r=Ye,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tn(t,s),Qt(r,t,s,-1))}return Qh(),r=Cu(Error(F(421))),zo(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=aT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ct=qn(s.nextSibling),Rt=e,Se=!0,Ht=null,t!==null&&(Mt[Ot++]=gn,Mt[Ot++]=yn,Mt[Ot++]=Pr,gn=t.id,yn=t.overflow,Pr=e),e=$h(e,r.children),e.flags|=4096,e)}function Fp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vc(t.return,e,n)}function ku(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function rv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(dt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fp(t,n,e);else if(t.tag===19)Fp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Da(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ku(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Da(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ku(e,!0,n,null,i);break;case"together":ku(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Wn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function QE(t,e,n){switch(e.tag){case 3:tv(e),vs();break;case 5:ky(e);break;case 1:xt(e.type)&&Aa(e);break;case 4:Mh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(ka,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?nv(t,e,n):(_e(Ae,Ae.current&1),t=xn(t,e,n),t!==null?t.sibling:null);_e(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return rv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,Zy(t,e,n)}return xn(t,e,n)}var sv,Ac,iv,ov;sv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ac=function(){};iv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Tr(an.current);var i=null;switch(n){case"input":s=Wu(t,s),r=Wu(t,r),i=[];break;case"select":s=Ce({},s,{value:void 0}),r=Ce({},r,{value:void 0}),i=[];break;case"textarea":s=Xu(t,s),r=Xu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sa)}Zu(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ri.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ri.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ee("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};ov=function(t,e,n,r){n!==r&&(e.flags|=4)};function oi(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KE(t,e,n){var r=e.pendingProps;switch(Ch(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return xt(e.type)&&Ia(),rt(e),null;case 3:return r=e.stateNode,ws(),xe(Tt),xe(ut),Lh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ht!==null&&(bc(Ht),Ht=null))),Ac(t,e),rt(e),null;case 5:Oh(e);var s=Tr(zi.current);if(n=e.type,t!==null&&e.stateNode!=null)iv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return rt(e),null}if(t=Tr(an.current),Uo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[sn]=e,r[Ui]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<di.length;s++)Ee(di[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":Wf(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":Kf(r,i),Ee("invalid",r)}Zu(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Fo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Fo(r.textContent,l,t),s=["children",""+l]):Ri.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ee("scroll",r)}switch(n){case"input":No(r),Qf(r,i,!0);break;case"textarea":No(r),Xf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[sn]=e,t[Ui]=r,sv(t,e,!1,!1),e.stateNode=t;e:{switch(a=ec(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<di.length;s++)Ee(di[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":Wf(t,r),s=Wu(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ce({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Kf(t,r),s=Xu(t,r),Ee("invalid",t);break;default:s=r}Zu(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Lg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Mg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ni(t,u):typeof u=="number"&&Ni(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ri.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ee("scroll",t):u!=null&&fh(t,i,u,a))}switch(n){case"input":No(t),Qf(t,r,!1);break;case"textarea":No(t),Xf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+er(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?as(t,!!r.multiple,i,!1):r.defaultValue!=null&&as(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Sa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)ov(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Tr(zi.current),Tr(an.current),Uo(e)){if(r=e.stateNode,n=e.memoizedProps,r[sn]=e,(i=r.nodeValue!==n)&&(t=Rt,t!==null))switch(t.tag){case 3:Fo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sn]=e,e.stateNode=r}return rt(e),null;case 13:if(xe(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&Ct!==null&&e.mode&1&&!(e.flags&128))Sy(),vs(),e.flags|=98560,i=!1;else if(i=Uo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[sn]=e}else vs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),i=!1}else Ht!==null&&(bc(Ht),Ht=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Ue===0&&(Ue=3):Qh())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return ws(),Ac(t,e),t===null&&ji(e.stateNode.containerInfo),rt(e),null;case 10:return Dh(e.type._context),rt(e),null;case 17:return xt(e.type)&&Ia(),rt(e),null;case 19:if(xe(Ae),i=e.memoizedState,i===null)return rt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)oi(i,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Da(t),a!==null){for(e.flags|=128,oi(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>Ts&&(e.flags|=128,r=!0,oi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Da(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),oi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Se)return rt(e),null}else 2*Ve()-i.renderingStartTime>Ts&&n!==1073741824&&(e.flags|=128,r=!0,oi(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=Ae.current,_e(Ae,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return Wh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pt&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function XE(t,e){switch(Ch(e),e.tag){case 1:return xt(e.type)&&Ia(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ws(),xe(Tt),xe(ut),Lh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Oh(e),null;case 13:if(xe(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));vs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Ae),null;case 4:return ws(),null;case 10:return Dh(e.type._context),null;case 22:case 23:return Wh(),null;case 24:return null;default:return null}}var $o=!1,ot=!1,JE=typeof WeakSet=="function"?WeakSet:Set,H=null;function is(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function Pc(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var Up=!1;function ZE(t,e){if(cc=Ea,t=hy(),Ah(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,p=0,y=t,v=null;t:for(;;){for(var P;y!==n||s!==0&&y.nodeType!==3||(l=a+s),y!==i||r!==0&&y.nodeType!==3||(u=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(P=y.firstChild)!==null;)v=y,y=P;for(;;){if(y===t)break t;if(v===n&&++h===s&&(l=a),v===i&&++p===r&&(u=a),(P=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=P}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(hc={focusedElem:t,selectionRange:n},Ea=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var D=k.memoizedProps,b=k.memoizedState,S=e.stateNode,T=S.getSnapshotBeforeUpdate(e.elementType===e.type?D:Yt(e.type,D),b);S.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(N){Ne(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return k=Up,Up=!1,k}function xi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Pc(e,n,i)}s=s.next}while(s!==r)}}function dl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Cc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function av(t){var e=t.alternate;e!==null&&(t.alternate=null,av(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sn],delete e[Ui],delete e[pc],delete e[ME],delete e[OE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lv(t){return t.tag===5||t.tag===3||t.tag===4}function Bp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sa));else if(r!==4&&(t=t.child,t!==null))for(kc(t,e,n),t=t.sibling;t!==null;)kc(t,e,n),t=t.sibling}function Rc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rc(t,e,n),t=t.sibling;t!==null;)Rc(t,e,n),t=t.sibling}var He=null,Gt=!1;function Vn(t,e,n){for(n=n.child;n!==null;)uv(t,e,n),n=n.sibling}function uv(t,e,n){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(sl,n)}catch{}switch(n.tag){case 5:ot||is(n,e);case 6:var r=He,s=Gt;He=null,Vn(t,e,n),He=r,Gt=s,He!==null&&(Gt?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(Gt?(t=He,n=n.stateNode,t.nodeType===8?Tu(t.parentNode,n):t.nodeType===1&&Tu(t,n),Mi(t)):Tu(He,n.stateNode));break;case 4:r=He,s=Gt,He=n.stateNode.containerInfo,Gt=!0,Vn(t,e,n),He=r,Gt=s;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Pc(n,e,a),s=s.next}while(s!==r)}Vn(t,e,n);break;case 1:if(!ot&&(is(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ne(n,e,l)}Vn(t,e,n);break;case 21:Vn(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,Vn(t,e,n),ot=r):Vn(t,e,n);break;default:Vn(t,e,n)}}function zp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new JE),e.forEach(function(r){var s=lT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:He=l.stateNode,Gt=!1;break e;case 3:He=l.stateNode.containerInfo,Gt=!0;break e;case 4:He=l.stateNode.containerInfo,Gt=!0;break e}l=l.return}if(He===null)throw Error(F(160));uv(i,a,s),He=null,Gt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Ne(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cv(e,t),e=e.sibling}function cv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qt(e,t),tn(t),r&4){try{xi(3,t,t.return),dl(3,t)}catch(D){Ne(t,t.return,D)}try{xi(5,t,t.return)}catch(D){Ne(t,t.return,D)}}break;case 1:qt(e,t),tn(t),r&512&&n!==null&&is(n,n.return);break;case 5:if(qt(e,t),tn(t),r&512&&n!==null&&is(n,n.return),t.flags&32){var s=t.stateNode;try{Ni(s,"")}catch(D){Ne(t,t.return,D)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Dg(s,i),ec(l,a);var h=ec(l,i);for(a=0;a<u.length;a+=2){var p=u[a],y=u[a+1];p==="style"?Lg(s,y):p==="dangerouslySetInnerHTML"?Mg(s,y):p==="children"?Ni(s,y):fh(s,p,y,h)}switch(l){case"input":Qu(s,i);break;case"textarea":Vg(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var P=i.value;P!=null?as(s,!!i.multiple,P,!1):v!==!!i.multiple&&(i.defaultValue!=null?as(s,!!i.multiple,i.defaultValue,!0):as(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ui]=i}catch(D){Ne(t,t.return,D)}}break;case 6:if(qt(e,t),tn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(D){Ne(t,t.return,D)}}break;case 3:if(qt(e,t),tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mi(e.containerInfo)}catch(D){Ne(t,t.return,D)}break;case 4:qt(e,t),tn(t);break;case 13:qt(e,t),tn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Gh=Ve())),r&4&&zp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(h=ot)||p,qt(e,t),ot=h):qt(e,t),tn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(H=t,p=t.child;p!==null;){for(y=H=p;H!==null;){switch(v=H,P=v.child,v.tag){case 0:case 11:case 14:case 15:xi(4,v,v.return);break;case 1:is(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(D){Ne(r,n,D)}}break;case 5:is(v,v.return);break;case 22:if(v.memoizedState!==null){qp(y);continue}}P!==null?(P.return=v,H=P):qp(y)}p=p.sibling}e:for(p=null,y=t;;){if(y.tag===5){if(p===null){p=y;try{s=y.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=y.stateNode,u=y.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Og("display",a))}catch(D){Ne(t,t.return,D)}}}else if(y.tag===6){if(p===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(D){Ne(t,t.return,D)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;p===y&&(p=null),y=y.return}p===y&&(p=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:qt(e,t),tn(t),r&4&&zp(t);break;case 21:break;default:qt(e,t),tn(t)}}function tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lv(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ni(s,""),r.flags&=-33);var i=Bp(t);Rc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Bp(t);kc(t,l,a);break;default:throw Error(F(161))}}catch(u){Ne(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eT(t,e,n){H=t,hv(t)}function hv(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||$o;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ot;l=$o;var h=ot;if($o=a,(ot=u)&&!h)for(H=s;H!==null;)a=H,u=a.child,a.tag===22&&a.memoizedState!==null?Yp(s):u!==null?(u.return=a,H=u):Yp(s);for(;i!==null;)H=i,hv(i),i=i.sibling;H=s,$o=l,ot=h}$p(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):$p(t)}}function $p(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||dl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Yt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Pp(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Pp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var y=p.dehydrated;y!==null&&Mi(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}ot||e.flags&512&&Cc(e)}catch(v){Ne(e,e.return,v)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function qp(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Yp(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dl(4,e)}catch(u){Ne(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ne(e,s,u)}}var i=e.return;try{Cc(e)}catch(u){Ne(e,i,u)}break;case 5:var a=e.return;try{Cc(e)}catch(u){Ne(e,a,u)}}}catch(u){Ne(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var tT=Math.ceil,Ma=Cn.ReactCurrentDispatcher,qh=Cn.ReactCurrentOwner,jt=Cn.ReactCurrentBatchConfig,he=0,Ye=null,Oe=null,Ke=0,Pt=0,os=ur(0),Ue=0,Gi=null,kr=0,fl=0,Yh=0,Si=null,_t=null,Gh=0,Ts=1/0,pn=null,Oa=!1,Nc=null,Gn=null,qo=!1,Fn=null,La=0,Ii=0,Dc=null,aa=-1,la=0;function pt(){return he&6?Ve():aa!==-1?aa:aa=Ve()}function Hn(t){return t.mode&1?he&2&&Ke!==0?Ke&-Ke:jE.transition!==null?(la===0&&(la=Qg()),la):(t=ge,t!==0||(t=window.event,t=t===void 0?16:ny(t.type)),t):1}function Qt(t,e,n,r){if(50<Ii)throw Ii=0,Dc=null,Error(F(185));to(t,n,r),(!(he&2)||t!==Ye)&&(t===Ye&&(!(he&2)&&(fl|=n),Ue===4&&Ln(t,Ke)),St(t,r),n===1&&he===0&&!(e.mode&1)&&(Ts=Ve()+500,ul&&cr()))}function St(t,e){var n=t.callbackNode;jw(t,e);var r=wa(t,t===Ye?Ke:0);if(r===0)n!==null&&ep(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ep(n),e===1)t.tag===0?LE(Gp.bind(null,t)):Ey(Gp.bind(null,t)),VE(function(){!(he&6)&&cr()}),n=null;else{switch(Kg(r)){case 1:n=vh;break;case 4:n=Hg;break;case 16:n=_a;break;case 536870912:n=Wg;break;default:n=_a}n=_v(n,dv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dv(t,e){if(aa=-1,la=0,he&6)throw Error(F(327));var n=t.callbackNode;if(ds()&&t.callbackNode!==n)return null;var r=wa(t,t===Ye?Ke:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ja(t,r);else{e=r;var s=he;he|=2;var i=pv();(Ye!==t||Ke!==e)&&(pn=null,Ts=Ve()+500,Sr(t,e));do try{sT();break}catch(l){fv(t,l)}while(!0);Nh(),Ma.current=i,he=s,Oe!==null?e=0:(Ye=null,Ke=0,e=Ue)}if(e!==0){if(e===2&&(s=ic(t),s!==0&&(r=s,e=Vc(t,s))),e===1)throw n=Gi,Sr(t,0),Ln(t,r),St(t,Ve()),n;if(e===6)Ln(t,r);else{if(s=t.current.alternate,!(r&30)&&!nT(s)&&(e=ja(t,r),e===2&&(i=ic(t),i!==0&&(r=i,e=Vc(t,i))),e===1))throw n=Gi,Sr(t,0),Ln(t,r),St(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:vr(t,_t,pn);break;case 3:if(Ln(t,r),(r&130023424)===r&&(e=Gh+500-Ve(),10<e)){if(wa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=fc(vr.bind(null,t,_t,pn),e);break}vr(t,_t,pn);break;case 4:if(Ln(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Wt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tT(r/1960))-r,10<r){t.timeoutHandle=fc(vr.bind(null,t,_t,pn),r);break}vr(t,_t,pn);break;case 5:vr(t,_t,pn);break;default:throw Error(F(329))}}}return St(t,Ve()),t.callbackNode===n?dv.bind(null,t):null}function Vc(t,e){var n=Si;return t.current.memoizedState.isDehydrated&&(Sr(t,e).flags|=256),t=ja(t,e),t!==2&&(e=_t,_t=n,e!==null&&bc(e)),t}function bc(t){_t===null?_t=t:_t.push.apply(_t,t)}function nT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Xt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ln(t,e){for(e&=~Yh,e&=~fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wt(e),r=1<<n;t[n]=-1,e&=~r}}function Gp(t){if(he&6)throw Error(F(327));ds();var e=wa(t,0);if(!(e&1))return St(t,Ve()),null;var n=ja(t,e);if(t.tag!==0&&n===2){var r=ic(t);r!==0&&(e=r,n=Vc(t,r))}if(n===1)throw n=Gi,Sr(t,0),Ln(t,e),St(t,Ve()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vr(t,_t,pn),St(t,Ve()),null}function Hh(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(Ts=Ve()+500,ul&&cr())}}function Rr(t){Fn!==null&&Fn.tag===0&&!(he&6)&&ds();var e=he;he|=1;var n=jt.transition,r=ge;try{if(jt.transition=null,ge=1,t)return t()}finally{ge=r,jt.transition=n,he=e,!(he&6)&&cr()}}function Wh(){Pt=os.current,xe(os)}function Sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,DE(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(Ch(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ia();break;case 3:ws(),xe(Tt),xe(ut),Lh();break;case 5:Oh(r);break;case 4:ws();break;case 13:xe(Ae);break;case 19:xe(Ae);break;case 10:Dh(r.type._context);break;case 22:case 23:Wh()}n=n.return}if(Ye=t,Oe=t=Wn(t.current,null),Ke=Pt=e,Ue=0,Gi=null,Yh=fl=kr=0,_t=Si=null,Er!==null){for(e=0;e<Er.length;e++)if(n=Er[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Er=null}return t}function fv(t,e){do{var n=Oe;try{if(Nh(),sa.current=ba,Va){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Va=!1}if(Cr=0,qe=Fe=Pe=null,Ti=!1,$i=0,qh.current=null,n===null||n.return===null){Ue=1,Gi=e,Oe=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=Ke,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,y=p.tag;if(!(p.mode&1)&&(y===0||y===11||y===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var P=Vp(a);if(P!==null){P.flags&=-257,bp(P,a,l,i,e),P.mode&1&&Dp(i,h,e),e=P,u=h;var k=e.updateQueue;if(k===null){var D=new Set;D.add(u),e.updateQueue=D}else k.add(u);break e}else{if(!(e&1)){Dp(i,h,e),Qh();break e}u=Error(F(426))}}else if(Se&&l.mode&1){var b=Vp(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),bp(b,a,l,i,e),kh(Es(u,l));break e}}i=u=Es(u,l),Ue!==4&&(Ue=2),Si===null?Si=[i]:Si.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=Ky(i,u,e);Ap(i,S);break e;case 1:l=u;var T=i.type,A=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Gn===null||!Gn.has(A)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=Xy(i,l,e);Ap(i,N);break e}}i=i.return}while(i!==null)}gv(n)}catch(M){e=M,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function pv(){var t=Ma.current;return Ma.current=ba,t===null?ba:t}function Qh(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Ye===null||!(kr&268435455)&&!(fl&268435455)||Ln(Ye,Ke)}function ja(t,e){var n=he;he|=2;var r=pv();(Ye!==t||Ke!==e)&&(pn=null,Sr(t,e));do try{rT();break}catch(s){fv(t,s)}while(!0);if(Nh(),he=n,Ma.current=r,Oe!==null)throw Error(F(261));return Ye=null,Ke=0,Ue}function rT(){for(;Oe!==null;)mv(Oe)}function sT(){for(;Oe!==null&&!kw();)mv(Oe)}function mv(t){var e=vv(t.alternate,t,Pt);t.memoizedProps=t.pendingProps,e===null?gv(t):Oe=e,qh.current=null}function gv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XE(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Oe=null;return}}else if(n=KE(n,e,Pt),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);Ue===0&&(Ue=5)}function vr(t,e,n){var r=ge,s=jt.transition;try{jt.transition=null,ge=1,iT(t,e,n,r)}finally{jt.transition=s,ge=r}return null}function iT(t,e,n,r){do ds();while(Fn!==null);if(he&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Fw(t,i),t===Ye&&(Oe=Ye=null,Ke=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qo||(qo=!0,_v(_a,function(){return ds(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jt.transition,jt.transition=null;var a=ge;ge=1;var l=he;he|=4,qh.current=null,ZE(t,n),cv(n,t),IE(hc),Ea=!!cc,hc=cc=null,t.current=n,eT(n),Rw(),he=l,ge=a,jt.transition=i}else t.current=n;if(qo&&(qo=!1,Fn=t,La=s),i=t.pendingLanes,i===0&&(Gn=null),Vw(n.stateNode),St(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Oa)throw Oa=!1,t=Nc,Nc=null,t;return La&1&&t.tag!==0&&ds(),i=t.pendingLanes,i&1?t===Dc?Ii++:(Ii=0,Dc=t):Ii=0,cr(),null}function ds(){if(Fn!==null){var t=Kg(La),e=jt.transition,n=ge;try{if(jt.transition=null,ge=16>t?16:t,Fn===null)var r=!1;else{if(t=Fn,Fn=null,La=0,he&6)throw Error(F(331));var s=he;for(he|=4,H=t.current;H!==null;){var i=H,a=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(H=h;H!==null;){var p=H;switch(p.tag){case 0:case 11:case 15:xi(8,p,i)}var y=p.child;if(y!==null)y.return=p,H=y;else for(;H!==null;){p=H;var v=p.sibling,P=p.return;if(av(p),p===h){H=null;break}if(v!==null){v.return=P,H=v;break}H=P}}}var k=i.alternate;if(k!==null){var D=k.child;if(D!==null){k.child=null;do{var b=D.sibling;D.sibling=null,D=b}while(D!==null)}}H=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,H=a;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xi(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,H=S;break e}H=i.return}}var T=t.current;for(H=T;H!==null;){a=H;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,H=A;else e:for(a=T;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:dl(9,l)}}catch(M){Ne(l,l.return,M)}if(l===a){H=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,H=N;break e}H=l.return}}if(he=s,cr(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(sl,t)}catch{}r=!0}return r}finally{ge=n,jt.transition=e}}return!1}function Hp(t,e,n){e=Es(n,e),e=Ky(t,e,1),t=Yn(t,e,1),e=pt(),t!==null&&(to(t,1,e),St(t,e))}function Ne(t,e,n){if(t.tag===3)Hp(t,t,n);else for(;e!==null;){if(e.tag===3){Hp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gn===null||!Gn.has(r))){t=Es(n,t),t=Xy(e,t,1),e=Yn(e,t,1),t=pt(),e!==null&&(to(e,1,t),St(e,t));break}}e=e.return}}function oT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(Ke&n)===n&&(Ue===4||Ue===3&&(Ke&130023424)===Ke&&500>Ve()-Gh?Sr(t,0):Yh|=n),St(t,e)}function yv(t,e){e===0&&(t.mode&1?(e=bo,bo<<=1,!(bo&130023424)&&(bo=4194304)):e=1);var n=pt();t=Tn(t,e),t!==null&&(to(t,e,n),St(t,n))}function aT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yv(t,n)}function lT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),yv(t,n)}var vv;vv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,QE(t,e,n);Et=!!(t.flags&131072)}else Et=!1,Se&&e.flags&1048576&&Ty(e,Ca,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;oa(t,e),t=e.pendingProps;var s=ys(e,ut.current);hs(e,n),s=Fh(null,e,r,t,s,n);var i=Uh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(r)?(i=!0,Aa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bh(e),s.updater=hl,e.stateNode=s,s._reactInternals=e,wc(e,r,t,n),e=xc(null,e,r,!0,i,n)):(e.tag=0,Se&&i&&Ph(e),dt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(oa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=cT(r),t=Yt(r,t),s){case 0:e=Tc(null,e,r,t,n);break e;case 1:e=Lp(null,e,r,t,n);break e;case 11:e=Mp(null,e,r,t,n);break e;case 14:e=Op(null,e,r,Yt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),Tc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),Lp(t,e,r,s,n);case 3:e:{if(tv(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Cy(t,e),Na(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Es(Error(F(423)),e),e=jp(t,e,r,n,s);break e}else if(r!==s){s=Es(Error(F(424)),e),e=jp(t,e,r,n,s);break e}else for(Ct=qn(e.stateNode.containerInfo.firstChild),Rt=e,Se=!0,Ht=null,n=Ay(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vs(),r===s){e=xn(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return ky(e),t===null&&yc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,dc(r,s)?a=null:i!==null&&dc(r,i)&&(e.flags|=32),ev(t,e),dt(t,e,a,n),e.child;case 6:return t===null&&yc(e),null;case 13:return nv(t,e,n);case 4:return Mh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_s(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),Mp(t,e,r,s,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,_e(ka,r._currentValue),r._currentValue=a,i!==null)if(Xt(i.value,a)){if(i.children===s.children&&!Tt.current){e=xn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=vn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),vc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(F(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),vc(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}dt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,hs(e,n),s=Ut(s),r=r(s),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,s=Yt(r,e.pendingProps),s=Yt(r.type,s),Op(t,e,r,s,n);case 15:return Jy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yt(r,s),oa(t,e),e.tag=1,xt(r)?(t=!0,Aa(e)):t=!1,hs(e,n),Qy(e,r,s),wc(e,r,s,n),xc(null,e,r,!0,t,n);case 19:return rv(t,e,n);case 22:return Zy(t,e,n)}throw Error(F(156,e.tag))};function _v(t,e){return Gg(t,e)}function uT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,n,r){return new uT(t,e,n,r)}function Kh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cT(t){if(typeof t=="function")return Kh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mh)return 11;if(t===gh)return 14}return 2}function Wn(t,e){var n=t.alternate;return n===null?(n=Lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ua(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Kh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Kr:return Ir(n.children,s,i,e);case ph:a=8,s|=8;break;case qu:return t=Lt(12,n,e,s|2),t.elementType=qu,t.lanes=i,t;case Yu:return t=Lt(13,n,e,s),t.elementType=Yu,t.lanes=i,t;case Gu:return t=Lt(19,n,e,s),t.elementType=Gu,t.lanes=i,t;case kg:return pl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pg:a=10;break e;case Cg:a=9;break e;case mh:a=11;break e;case gh:a=14;break e;case bn:a=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Lt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ir(t,e,n,r){return t=Lt(7,t,r,e),t.lanes=n,t}function pl(t,e,n,r){return t=Lt(22,t,r,e),t.elementType=kg,t.lanes=n,t.stateNode={isHidden:!1},t}function Ru(t,e,n){return t=Lt(6,t,null,e),t.lanes=n,t}function Nu(t,e,n){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hu(0),this.expirationTimes=hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Xh(t,e,n,r,s,i,a,l,u){return t=new hT(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Lt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bh(i),t}function dT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function wv(t){if(!t)return tr;t=t._reactInternals;e:{if(br(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(xt(n))return wy(t,n,e)}return e}function Ev(t,e,n,r,s,i,a,l,u){return t=Xh(n,r,!0,t,s,i,a,l,u),t.context=wv(null),n=t.current,r=pt(),s=Hn(n),i=vn(r,s),i.callback=e??null,Yn(n,i,s),t.current.lanes=s,to(t,s,r),St(t,r),t}function ml(t,e,n,r){var s=e.current,i=pt(),a=Hn(s);return n=wv(n),e.context===null?e.context=n:e.pendingContext=n,e=vn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yn(s,e,a),t!==null&&(Qt(t,s,a,i),ra(t,s,a)),a}function Fa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jh(t,e){Wp(t,e),(t=t.alternate)&&Wp(t,e)}function fT(){return null}var Tv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zh(t){this._internalRoot=t}gl.prototype.render=Zh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));ml(t,e,null,null)};gl.prototype.unmount=Zh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rr(function(){ml(null,t,null,null)}),e[En]=null}};function gl(t){this._internalRoot=t}gl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<On.length&&e!==0&&e<On[n].priority;n++);On.splice(n,0,t),n===0&&ty(t)}};function ed(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qp(){}function pT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Fa(a);i.call(h)}}var a=Ev(e,r,t,0,null,!1,!1,"",Qp);return t._reactRootContainer=a,t[En]=a.current,ji(t.nodeType===8?t.parentNode:t),Rr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Fa(u);l.call(h)}}var u=Xh(t,0,!1,null,null,!1,!1,"",Qp);return t._reactRootContainer=u,t[En]=u.current,ji(t.nodeType===8?t.parentNode:t),Rr(function(){ml(e,u,n,r)}),u}function vl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Fa(a);l.call(u)}}ml(e,a,t,s)}else a=pT(n,e,t,s,r);return Fa(a)}Xg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hi(e.pendingLanes);n!==0&&(_h(e,n|1),St(e,Ve()),!(he&6)&&(Ts=Ve()+500,cr()))}break;case 13:Rr(function(){var r=Tn(t,1);if(r!==null){var s=pt();Qt(r,t,1,s)}}),Jh(t,1)}};wh=function(t){if(t.tag===13){var e=Tn(t,134217728);if(e!==null){var n=pt();Qt(e,t,134217728,n)}Jh(t,134217728)}};Jg=function(t){if(t.tag===13){var e=Hn(t),n=Tn(t,e);if(n!==null){var r=pt();Qt(n,t,e,r)}Jh(t,e)}};Zg=function(){return ge};ey=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};nc=function(t,e,n){switch(e){case"input":if(Qu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ll(r);if(!s)throw Error(F(90));Ng(r),Qu(r,s)}}}break;case"textarea":Vg(t,n);break;case"select":e=n.value,e!=null&&as(t,!!n.multiple,e,!1)}};Ug=Hh;Bg=Rr;var mT={usingClientEntryPoint:!1,Events:[ro,es,ll,jg,Fg,Hh]},ai={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gT={bundleType:ai.bundleType,version:ai.version,rendererPackageName:ai.rendererPackageName,rendererConfig:ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qg(t),t===null?null:t.stateNode},findFiberByHostInstance:ai.findFiberByHostInstance||fT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yo.isDisabled&&Yo.supportsFiber)try{sl=Yo.inject(gT),on=Yo}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mT;Dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ed(e))throw Error(F(200));return dT(t,e,null,n)};Dt.createRoot=function(t,e){if(!ed(t))throw Error(F(299));var n=!1,r="",s=Tv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Xh(t,1,!1,null,null,n,!1,r,s),t[En]=e.current,ji(t.nodeType===8?t.parentNode:t),new Zh(e)};Dt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=qg(e),t=t===null?null:t.stateNode,t};Dt.flushSync=function(t){return Rr(t)};Dt.hydrate=function(t,e,n){if(!yl(e))throw Error(F(200));return vl(null,t,e,!0,n)};Dt.hydrateRoot=function(t,e,n){if(!ed(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Tv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Ev(e,null,t,1,n??null,s,!1,i,a),t[En]=e.current,ji(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new gl(e)};Dt.render=function(t,e,n){if(!yl(e))throw Error(F(200));return vl(null,t,e,!1,n)};Dt.unmountComponentAtNode=function(t){if(!yl(t))throw Error(F(40));return t._reactRootContainer?(Rr(function(){vl(null,null,t,!1,function(){t._reactRootContainer=null,t[En]=null})}),!0):!1};Dt.unstable_batchedUpdates=Hh;Dt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yl(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return vl(t,e,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function xv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xv)}catch(t){console.error(t)}}xv(),xg.exports=Dt;var yT=xg.exports,Kp=yT;zu.createRoot=Kp.createRoot,zu.hydrateRoot=Kp.hydrateRoot;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),je=(t,e)=>{const n=Q.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:u,...h},p)=>Q.createElement("svg",{ref:p,...vT,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${_T(t)}`,l].join(" "),...h},[...e.map(([y,v])=>Q.createElement(y,v)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=je("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=je("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=je("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=je("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=je("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=je("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=je("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=je("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=je("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=je("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=je("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=je("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Jp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},LT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Av={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,y=(i&3)<<4|l>>4;let v=(l&15)<<2|h>>6,P=h&63;u||(P=64,a||(v=64)),r.push(n[p],n[y],n[v],n[P])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Iv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||y==null)throw new jT;const v=i<<2|l>>4;if(r.push(v),h!==64){const P=l<<4&240|h>>2;if(r.push(P),y!==64){const k=h<<6&192|y;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FT=function(t){const e=Iv(t);return Av.encodeByteArray(e,!0)},Ua=function(t){return FT(t).replace(/\./g,"")},UT=function(t){try{return Av.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=()=>BT().__FIREBASE_DEFAULTS__,$T=()=>{if(typeof process>"u"||typeof Jp>"u")return;const t=Jp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&UT(t[1]);return e&&JSON.parse(e)},nd=()=>{try{return zT()||$T()||qT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YT=t=>{var e,n;return(n=(e=nd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},GT=t=>{const e=YT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pv=()=>{var t;return(t=nd())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ua(JSON.stringify(n)),Ua(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KT(){var t;const e=(t=nd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XT(){return!KT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JT(){try{return typeof indexedDB=="object"}catch{return!1}}function ZT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="FirebaseError";class bs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=e1,Object.setPrototypeOf(this,bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cv.prototype.create)}}class Cv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?t1(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new bs(s,l,r)}}function t1(t,e){return t.replace(n1,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const n1=/\{\$([^}]+)}/g;function Ba(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Zp(i)&&Zp(a)){if(!Ba(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Zp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t){return t&&t._delegate?t._delegate:t}class Hi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new HT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(i1(e))try{this.getOrInitializeService({instanceIdentifier:_r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=_r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_r){return this.instances.has(e)}getOptions(e=_r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:s1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_r){return this.component?this.component.multipleInstances?e:_r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function s1(t){return t===_r?void 0:t}function i1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new r1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const a1={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},l1=ue.INFO,u1={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},c1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=u1[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kv{constructor(e){this.name=e,this._logLevel=l1,this._logHandler=c1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?a1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const h1=(t,e)=>e.some(n=>t instanceof n);let em,tm;function d1(){return em||(em=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f1(){return tm||(tm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rv=new WeakMap,Mc=new WeakMap,Nv=new WeakMap,Du=new WeakMap,rd=new WeakMap;function p1(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Qn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Rv.set(n,t)}).catch(()=>{}),rd.set(e,t),e}function m1(t){if(Mc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Mc.set(t,e)}let Oc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Nv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function g1(t){Oc=t(Oc)}function y1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vu(this),e,...n);return Nv.set(r,e.sort?e.sort():[e]),Qn(r)}:f1().includes(t)?function(...e){return t.apply(Vu(this),e),Qn(Rv.get(this))}:function(...e){return Qn(t.apply(Vu(this),e))}}function v1(t){return typeof t=="function"?y1(t):(t instanceof IDBTransaction&&m1(t),h1(t,d1())?new Proxy(t,Oc):t)}function Qn(t){if(t instanceof IDBRequest)return p1(t);if(Du.has(t))return Du.get(t);const e=v1(t);return e!==t&&(Du.set(t,e),rd.set(e,t)),e}const Vu=t=>rd.get(t);function _1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Qn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Qn(a.result),u.oldVersion,u.newVersion,Qn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const w1=["get","getKey","getAll","getAllKeys","count"],E1=["put","add","delete","clear"],bu=new Map;function nm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bu.get(e))return bu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=E1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||w1.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return bu.set(e,i),i}g1(t=>({...t,get:(e,n,r)=>nm(e,n)||t.get(e,n,r),has:(e,n)=>!!nm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(x1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function x1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lc="@firebase/app",rm="0.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn=new kv("@firebase/app"),S1="@firebase/app-compat",I1="@firebase/analytics-compat",A1="@firebase/analytics",P1="@firebase/app-check-compat",C1="@firebase/app-check",k1="@firebase/auth",R1="@firebase/auth-compat",N1="@firebase/database",D1="@firebase/data-connect",V1="@firebase/database-compat",b1="@firebase/functions",M1="@firebase/functions-compat",O1="@firebase/installations",L1="@firebase/installations-compat",j1="@firebase/messaging",F1="@firebase/messaging-compat",U1="@firebase/performance",B1="@firebase/performance-compat",z1="@firebase/remote-config",$1="@firebase/remote-config-compat",q1="@firebase/storage",Y1="@firebase/storage-compat",G1="@firebase/firestore",H1="@firebase/vertexai",W1="@firebase/firestore-compat",Q1="firebase",K1="11.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="[DEFAULT]",X1={[Lc]:"fire-core",[S1]:"fire-core-compat",[A1]:"fire-analytics",[I1]:"fire-analytics-compat",[C1]:"fire-app-check",[P1]:"fire-app-check-compat",[k1]:"fire-auth",[R1]:"fire-auth-compat",[N1]:"fire-rtdb",[D1]:"fire-data-connect",[V1]:"fire-rtdb-compat",[b1]:"fire-fn",[M1]:"fire-fn-compat",[O1]:"fire-iid",[L1]:"fire-iid-compat",[j1]:"fire-fcm",[F1]:"fire-fcm-compat",[U1]:"fire-perf",[B1]:"fire-perf-compat",[z1]:"fire-rc",[$1]:"fire-rc-compat",[q1]:"fire-gcs",[Y1]:"fire-gcs-compat",[G1]:"fire-fst",[W1]:"fire-fst-compat",[H1]:"fire-vertex","fire-js":"fire-js",[Q1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=new Map,J1=new Map,Fc=new Map;function sm(t,e){try{t.container.addComponent(e)}catch(n){Sn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $a(t){const e=t.name;if(Fc.has(e))return Sn.debug(`There were multiple attempts to register component ${e}.`),!1;Fc.set(e,t);for(const n of za.values())sm(n,t);for(const n of J1.values())sm(n,t);return!0}function Z1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ex(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kn=new Cv("app","Firebase",tx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=K1;function Dv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Kn.create("bad-app-name",{appName:String(s)});if(n||(n=Pv()),!n)throw Kn.create("no-options");const i=za.get(s);if(i){if(Ba(n,i.options)&&Ba(r,i.config))return i;throw Kn.create("duplicate-app",{appName:s})}const a=new o1(s);for(const u of Fc.values())a.addComponent(u);const l=new nx(n,r,a);return za.set(s,l),l}function sx(t=jc){const e=za.get(t);if(!e&&t===jc&&Pv())return Dv();if(!e)throw Kn.create("no-app",{appName:t});return e}function fs(t,e,n){var r;let s=(r=X1[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sn.warn(l.join(" "));return}$a(new Hi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="firebase-heartbeat-database",ox=1,Wi="firebase-heartbeat-store";let Mu=null;function Vv(){return Mu||(Mu=_1(ix,ox,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kn.create("idb-open",{originalErrorMessage:t.message})})),Mu}async function ax(t){try{const n=(await Vv()).transaction(Wi),r=await n.objectStore(Wi).get(bv(t));return await n.done,r}catch(e){if(e instanceof bs)Sn.warn(e.message);else{const n=Kn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sn.warn(n.message)}}}async function im(t,e){try{const r=(await Vv()).transaction(Wi,"readwrite");await r.objectStore(Wi).put(e,bv(t)),await r.done}catch(n){if(n instanceof bs)Sn.warn(n.message);else{const r=Kn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sn.warn(r.message)}}}function bv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=1024,ux=30;class cx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=om();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>ux){const a=fx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Sn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=om(),{heartbeatsToSend:r,unsentEntries:s}=hx(this._heartbeatsCache.heartbeats),i=Ua(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Sn.warn(n),""}}}function om(){return new Date().toISOString().substring(0,10)}function hx(t,e=lx){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),am(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),am(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JT()?ZT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ax(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return im(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return im(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function am(t){return Ua(JSON.stringify({version:2,heartbeats:t})).length}function fx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t){$a(new Hi("platform-logger",e=>new T1(e),"PRIVATE")),$a(new Hi("heartbeat",e=>new cx(e),"PRIVATE")),fs(Lc,rm,t),fs(Lc,rm,"esm2017"),fs("fire-js","")}px("");var mx="firebase",gx="11.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs(mx,gx,"app");var lm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xn,Mv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,g){function E(){}E.prototype=g.prototype,w.D=g.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(I,C,x){for(var _=Array(arguments.length-2),te=2;te<arguments.length;te++)_[te-2]=arguments[te];return g.prototype[C].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,g,E){E||(E=0);var I=Array(16);if(typeof g=="string")for(var C=0;16>C;++C)I[C]=g.charCodeAt(E++)|g.charCodeAt(E++)<<8|g.charCodeAt(E++)<<16|g.charCodeAt(E++)<<24;else for(C=0;16>C;++C)I[C]=g[E++]|g[E++]<<8|g[E++]<<16|g[E++]<<24;g=w.g[0],E=w.g[1],C=w.g[2];var x=w.g[3],_=g+(x^E&(C^x))+I[0]+3614090360&4294967295;g=E+(_<<7&4294967295|_>>>25),_=x+(C^g&(E^C))+I[1]+3905402710&4294967295,x=g+(_<<12&4294967295|_>>>20),_=C+(E^x&(g^E))+I[2]+606105819&4294967295,C=x+(_<<17&4294967295|_>>>15),_=E+(g^C&(x^g))+I[3]+3250441966&4294967295,E=C+(_<<22&4294967295|_>>>10),_=g+(x^E&(C^x))+I[4]+4118548399&4294967295,g=E+(_<<7&4294967295|_>>>25),_=x+(C^g&(E^C))+I[5]+1200080426&4294967295,x=g+(_<<12&4294967295|_>>>20),_=C+(E^x&(g^E))+I[6]+2821735955&4294967295,C=x+(_<<17&4294967295|_>>>15),_=E+(g^C&(x^g))+I[7]+4249261313&4294967295,E=C+(_<<22&4294967295|_>>>10),_=g+(x^E&(C^x))+I[8]+1770035416&4294967295,g=E+(_<<7&4294967295|_>>>25),_=x+(C^g&(E^C))+I[9]+2336552879&4294967295,x=g+(_<<12&4294967295|_>>>20),_=C+(E^x&(g^E))+I[10]+4294925233&4294967295,C=x+(_<<17&4294967295|_>>>15),_=E+(g^C&(x^g))+I[11]+2304563134&4294967295,E=C+(_<<22&4294967295|_>>>10),_=g+(x^E&(C^x))+I[12]+1804603682&4294967295,g=E+(_<<7&4294967295|_>>>25),_=x+(C^g&(E^C))+I[13]+4254626195&4294967295,x=g+(_<<12&4294967295|_>>>20),_=C+(E^x&(g^E))+I[14]+2792965006&4294967295,C=x+(_<<17&4294967295|_>>>15),_=E+(g^C&(x^g))+I[15]+1236535329&4294967295,E=C+(_<<22&4294967295|_>>>10),_=g+(C^x&(E^C))+I[1]+4129170786&4294967295,g=E+(_<<5&4294967295|_>>>27),_=x+(E^C&(g^E))+I[6]+3225465664&4294967295,x=g+(_<<9&4294967295|_>>>23),_=C+(g^E&(x^g))+I[11]+643717713&4294967295,C=x+(_<<14&4294967295|_>>>18),_=E+(x^g&(C^x))+I[0]+3921069994&4294967295,E=C+(_<<20&4294967295|_>>>12),_=g+(C^x&(E^C))+I[5]+3593408605&4294967295,g=E+(_<<5&4294967295|_>>>27),_=x+(E^C&(g^E))+I[10]+38016083&4294967295,x=g+(_<<9&4294967295|_>>>23),_=C+(g^E&(x^g))+I[15]+3634488961&4294967295,C=x+(_<<14&4294967295|_>>>18),_=E+(x^g&(C^x))+I[4]+3889429448&4294967295,E=C+(_<<20&4294967295|_>>>12),_=g+(C^x&(E^C))+I[9]+568446438&4294967295,g=E+(_<<5&4294967295|_>>>27),_=x+(E^C&(g^E))+I[14]+3275163606&4294967295,x=g+(_<<9&4294967295|_>>>23),_=C+(g^E&(x^g))+I[3]+4107603335&4294967295,C=x+(_<<14&4294967295|_>>>18),_=E+(x^g&(C^x))+I[8]+1163531501&4294967295,E=C+(_<<20&4294967295|_>>>12),_=g+(C^x&(E^C))+I[13]+2850285829&4294967295,g=E+(_<<5&4294967295|_>>>27),_=x+(E^C&(g^E))+I[2]+4243563512&4294967295,x=g+(_<<9&4294967295|_>>>23),_=C+(g^E&(x^g))+I[7]+1735328473&4294967295,C=x+(_<<14&4294967295|_>>>18),_=E+(x^g&(C^x))+I[12]+2368359562&4294967295,E=C+(_<<20&4294967295|_>>>12),_=g+(E^C^x)+I[5]+4294588738&4294967295,g=E+(_<<4&4294967295|_>>>28),_=x+(g^E^C)+I[8]+2272392833&4294967295,x=g+(_<<11&4294967295|_>>>21),_=C+(x^g^E)+I[11]+1839030562&4294967295,C=x+(_<<16&4294967295|_>>>16),_=E+(C^x^g)+I[14]+4259657740&4294967295,E=C+(_<<23&4294967295|_>>>9),_=g+(E^C^x)+I[1]+2763975236&4294967295,g=E+(_<<4&4294967295|_>>>28),_=x+(g^E^C)+I[4]+1272893353&4294967295,x=g+(_<<11&4294967295|_>>>21),_=C+(x^g^E)+I[7]+4139469664&4294967295,C=x+(_<<16&4294967295|_>>>16),_=E+(C^x^g)+I[10]+3200236656&4294967295,E=C+(_<<23&4294967295|_>>>9),_=g+(E^C^x)+I[13]+681279174&4294967295,g=E+(_<<4&4294967295|_>>>28),_=x+(g^E^C)+I[0]+3936430074&4294967295,x=g+(_<<11&4294967295|_>>>21),_=C+(x^g^E)+I[3]+3572445317&4294967295,C=x+(_<<16&4294967295|_>>>16),_=E+(C^x^g)+I[6]+76029189&4294967295,E=C+(_<<23&4294967295|_>>>9),_=g+(E^C^x)+I[9]+3654602809&4294967295,g=E+(_<<4&4294967295|_>>>28),_=x+(g^E^C)+I[12]+3873151461&4294967295,x=g+(_<<11&4294967295|_>>>21),_=C+(x^g^E)+I[15]+530742520&4294967295,C=x+(_<<16&4294967295|_>>>16),_=E+(C^x^g)+I[2]+3299628645&4294967295,E=C+(_<<23&4294967295|_>>>9),_=g+(C^(E|~x))+I[0]+4096336452&4294967295,g=E+(_<<6&4294967295|_>>>26),_=x+(E^(g|~C))+I[7]+1126891415&4294967295,x=g+(_<<10&4294967295|_>>>22),_=C+(g^(x|~E))+I[14]+2878612391&4294967295,C=x+(_<<15&4294967295|_>>>17),_=E+(x^(C|~g))+I[5]+4237533241&4294967295,E=C+(_<<21&4294967295|_>>>11),_=g+(C^(E|~x))+I[12]+1700485571&4294967295,g=E+(_<<6&4294967295|_>>>26),_=x+(E^(g|~C))+I[3]+2399980690&4294967295,x=g+(_<<10&4294967295|_>>>22),_=C+(g^(x|~E))+I[10]+4293915773&4294967295,C=x+(_<<15&4294967295|_>>>17),_=E+(x^(C|~g))+I[1]+2240044497&4294967295,E=C+(_<<21&4294967295|_>>>11),_=g+(C^(E|~x))+I[8]+1873313359&4294967295,g=E+(_<<6&4294967295|_>>>26),_=x+(E^(g|~C))+I[15]+4264355552&4294967295,x=g+(_<<10&4294967295|_>>>22),_=C+(g^(x|~E))+I[6]+2734768916&4294967295,C=x+(_<<15&4294967295|_>>>17),_=E+(x^(C|~g))+I[13]+1309151649&4294967295,E=C+(_<<21&4294967295|_>>>11),_=g+(C^(E|~x))+I[4]+4149444226&4294967295,g=E+(_<<6&4294967295|_>>>26),_=x+(E^(g|~C))+I[11]+3174756917&4294967295,x=g+(_<<10&4294967295|_>>>22),_=C+(g^(x|~E))+I[2]+718787259&4294967295,C=x+(_<<15&4294967295|_>>>17),_=E+(x^(C|~g))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+C&4294967295,w.g[3]=w.g[3]+x&4294967295}r.prototype.u=function(w,g){g===void 0&&(g=w.length);for(var E=g-this.blockSize,I=this.B,C=this.h,x=0;x<g;){if(C==0)for(;x<=E;)s(this,w,x),x+=this.blockSize;if(typeof w=="string"){for(;x<g;)if(I[C++]=w.charCodeAt(x++),C==this.blockSize){s(this,I),C=0;break}}else for(;x<g;)if(I[C++]=w[x++],C==this.blockSize){s(this,I),C=0;break}}this.h=C,this.o+=g},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;var E=8*this.o;for(g=w.length-8;g<w.length;++g)w[g]=E&255,E/=256;for(this.u(w),w=Array(16),g=E=0;4>g;++g)for(var I=0;32>I;I+=8)w[E++]=this.g[g]>>>I&255;return w};function i(w,g){var E=l;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=g(w)}function a(w,g){this.h=g;for(var E=[],I=!0,C=w.length-1;0<=C;C--){var x=w[C]|0;I&&x==g||(E[C]=x,I=!1)}this.g=E}var l={};function u(w){return-128<=w&&128>w?i(w,function(g){return new a([g|0],0>g?-1:0)}):new a([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return y;if(0>w)return b(h(-w));for(var g=[],E=1,I=0;w>=E;I++)g[I]=w/E|0,E*=4294967296;return new a(g,0)}function p(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return b(p(w.substring(1),g));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(g,8)),I=y,C=0;C<w.length;C+=8){var x=Math.min(8,w.length-C),_=parseInt(w.substring(C,C+x),g);8>x?(x=h(Math.pow(g,x)),I=I.j(x).add(h(_))):(I=I.j(E),I=I.add(h(_)))}return I}var y=u(0),v=u(1),P=u(16777216);t=a.prototype,t.m=function(){if(D(this))return-b(this).m();for(var w=0,g=1,E=0;E<this.g.length;E++){var I=this.i(E);w+=(0<=I?I:4294967296+I)*g,g*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k(this))return"0";if(D(this))return"-"+b(this).toString(w);for(var g=h(Math.pow(w,6)),E=this,I="";;){var C=N(E,g).g;E=S(E,C.j(g));var x=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=C,k(E))return x+I;for(;6>x.length;)x="0"+x;I=x+I}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function k(w){if(w.h!=0)return!1;for(var g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function D(w){return w.h==-1}t.l=function(w){return w=S(this,w),D(w)?-1:k(w)?0:1};function b(w){for(var g=w.g.length,E=[],I=0;I<g;I++)E[I]=~w.g[I];return new a(E,~w.h).add(v)}t.abs=function(){return D(this)?b(this):this},t.add=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],I=0,C=0;C<=g;C++){var x=I+(this.i(C)&65535)+(w.i(C)&65535),_=(x>>>16)+(this.i(C)>>>16)+(w.i(C)>>>16);I=_>>>16,x&=65535,_&=65535,E[C]=_<<16|x}return new a(E,E[E.length-1]&-2147483648?-1:0)};function S(w,g){return w.add(b(g))}t.j=function(w){if(k(this)||k(w))return y;if(D(this))return D(w)?b(this).j(b(w)):b(b(this).j(w));if(D(w))return b(this.j(b(w)));if(0>this.l(P)&&0>w.l(P))return h(this.m()*w.m());for(var g=this.g.length+w.g.length,E=[],I=0;I<2*g;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<w.g.length;C++){var x=this.i(I)>>>16,_=this.i(I)&65535,te=w.i(C)>>>16,ne=w.i(C)&65535;E[2*I+2*C]+=_*ne,T(E,2*I+2*C),E[2*I+2*C+1]+=x*ne,T(E,2*I+2*C+1),E[2*I+2*C+1]+=_*te,T(E,2*I+2*C+1),E[2*I+2*C+2]+=x*te,T(E,2*I+2*C+2)}for(I=0;I<g;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=g;I<2*g;I++)E[I]=0;return new a(E,0)};function T(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function A(w,g){this.g=w,this.h=g}function N(w,g){if(k(g))throw Error("division by zero");if(k(w))return new A(y,y);if(D(w))return g=N(b(w),g),new A(b(g.g),b(g.h));if(D(g))return g=N(w,b(g)),new A(b(g.g),g.h);if(30<w.g.length){if(D(w)||D(g))throw Error("slowDivide_ only works with positive integers.");for(var E=v,I=g;0>=I.l(w);)E=M(E),I=M(I);var C=O(E,1),x=O(I,1);for(I=O(I,2),E=O(E,2);!k(I);){var _=x.add(I);0>=_.l(w)&&(C=C.add(E),x=_),I=O(I,1),E=O(E,1)}return g=S(w,C.j(g)),new A(C,g)}for(C=y;0<=w.l(g);){for(E=Math.max(1,Math.floor(w.m()/g.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),x=h(E),_=x.j(g);D(_)||0<_.l(w);)E-=I,x=h(E),_=x.j(g);k(x)&&(x=v),C=C.add(x),w=S(w,_)}return new A(C,w)}t.A=function(w){return N(this,w).h},t.and=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],I=0;I<g;I++)E[I]=this.i(I)&w.i(I);return new a(E,this.h&w.h)},t.or=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],I=0;I<g;I++)E[I]=this.i(I)|w.i(I);return new a(E,this.h|w.h)},t.xor=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],I=0;I<g;I++)E[I]=this.i(I)^w.i(I);return new a(E,this.h^w.h)};function M(w){for(var g=w.g.length+1,E=[],I=0;I<g;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new a(E,w.h)}function O(w,g){var E=g>>5;g%=32;for(var I=w.g.length-E,C=[],x=0;x<I;x++)C[x]=0<g?w.i(x+E)>>>g|w.i(x+E+1)<<32-g:w.i(x+E);return new a(C,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Mv=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,Xn=a}).apply(typeof lm<"u"?lm:typeof self<"u"?self:typeof window<"u"?window:{});var Go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ov,fi,Lv,ca,Uc,jv,Fv,Uv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Go=="object"&&Go];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)e:{var d=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var R=o[m];if(!(R in d))break e;d=d[R]}o=o[o.length-1],m=d[o],c=c(m),c!=m&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var d=0,m=!1,R={next:function(){if(!m&&d<o.length){var V=d++;return{value:c(V,o[V]),done:!1}}return m=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function p(o,c,d){return o.call.apply(o.bind,arguments)}function y(o,c,d){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,m),o.apply(c,R)}}return function(){return o.apply(c,arguments)}}function v(o,c,d){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,v.apply(null,arguments)}function P(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function k(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(m,R,V){for(var B=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)B[ye-2]=arguments[ye];return c.prototype[R].apply(m,B)}}function D(o){const c=o.length;if(0<c){const d=Array(c);for(let m=0;m<c;m++)d[m]=o[m];return d}return[]}function b(o,c){for(let d=1;d<arguments.length;d++){const m=arguments[d];if(u(m)){const R=o.length||0,V=m.length||0;o.length=R+V;for(let B=0;B<V;B++)o[R+B]=m[B]}else o.push(m)}}class S{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function T(o){return/^[\s\xa0]*$/.test(o)}function A(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function N(o){return N[" "](o),o}N[" "]=function(){};var M=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function O(o,c,d){for(const m in o)c.call(d,o[m],m,o)}function w(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function g(o){const c={};for(const d in o)c[d]=o[d];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(o,c){let d,m;for(let R=1;R<arguments.length;R++){m=arguments[R];for(d in m)o[d]=m[d];for(let V=0;V<E.length;V++)d=E[V],Object.prototype.hasOwnProperty.call(m,d)&&(o[d]=m[d])}}function C(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function x(o){l.setTimeout(()=>{throw o},0)}function _(){var o=q;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class te{constructor(){this.h=this.g=null}add(c,d){const m=ne.get();m.set(c,d),this.h?this.h.next=m:this.g=m,this.h=m}}var ne=new S(()=>new pe,o=>o.reset());class pe{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,U=!1,q=new te,X=()=>{const o=l.Promise.resolve(void 0);Ie=()=>{o.then(z)}};var z=()=>{for(var o;o=_();){try{o.h.call(o.g)}catch(d){x(d)}var c=ne;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}U=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function ce(o,c){if(Y.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(M){e:{try{N(c.nodeName);var R=!0;break e}catch{}R=!1}R||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:ve[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ce.aa.h.call(this)}}k(ce,Y);var ve={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),be=0;function yt(o,c,d,m,R){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!m,this.ha=R,this.key=++be,this.da=this.fa=!1}function Zt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Us(o){this.src=o,this.g={},this.h=0}Us.prototype.add=function(o,c,d,m,R){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var B=zt(o,c,m,R);return-1<B?(c=o[B],d||(c.fa=!1)):(c=new yt(c,this.src,V,!!m,R),c.fa=d,o.push(c)),c};function jr(o,c){var d=c.type;if(d in o.g){var m=o.g[d],R=Array.prototype.indexOf.call(m,c,void 0),V;(V=0<=R)&&Array.prototype.splice.call(m,R,1),V&&(Zt(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function zt(o,c,d,m){for(var R=0;R<o.length;++R){var V=o[R];if(!V.da&&V.listener==c&&V.capture==!!d&&V.ha==m)return R}return-1}var en="closure_lm_"+(1e6*Math.random()|0),bt={};function co(o,c,d,m,R){if(Array.isArray(c)){for(var V=0;V<c.length;V++)co(o,c[V],d,m,R);return null}return d=Yd(d),o&&o[fe]?o.K(c,d,h(m)?!!m.capture:!1,R):Fr(o,c,d,!1,m,R)}function Fr(o,c,d,m,R,V){if(!c)throw Error("Invalid event type");var B=h(R)?!!R.capture:!!R,ye=zl(o);if(ye||(o[en]=ye=new Us(o)),d=ye.add(c,d,m,B,V),d.proxy)return d;if(m=Bl(),d.proxy=m,m.src=o,m.listener=d,o.addEventListener)se||(R=B),R===void 0&&(R=!1),o.addEventListener(c.toString(),m,R);else if(o.attachEvent)o.attachEvent(qd(c.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Bl(){function o(d){return c.call(o.src,o.listener,d)}const c=y_;return o}function ho(o,c,d,m,R){if(Array.isArray(c))for(var V=0;V<c.length;V++)ho(o,c[V],d,m,R);else m=h(m)?!!m.capture:!!m,d=Yd(d),o&&o[fe]?(o=o.i,c=String(c).toString(),c in o.g&&(V=o.g[c],d=zt(V,d,m,R),-1<d&&(Zt(V[d]),Array.prototype.splice.call(V,d,1),V.length==0&&(delete o.g[c],o.h--)))):o&&(o=zl(o))&&(c=o.g[c.toString()],o=-1,c&&(o=zt(c,d,m,R)),(d=-1<o?c[o]:null)&&kn(d))}function kn(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[fe])jr(c.i,o);else{var d=o.type,m=o.proxy;c.removeEventListener?c.removeEventListener(d,m,o.capture):c.detachEvent?c.detachEvent(qd(d),m):c.addListener&&c.removeListener&&c.removeListener(m),(d=zl(c))?(jr(d,o),d.h==0&&(d.src=null,c[en]=null)):Zt(o)}}}function qd(o){return o in bt?bt[o]:bt[o]="on"+o}function y_(o,c){if(o.da)o=!0;else{c=new ce(c,this);var d=o.listener,m=o.ha||o.src;o.fa&&kn(o),o=d.call(m,c)}return o}function zl(o){return o=o[en],o instanceof Us?o:null}var $l="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yd(o){return typeof o=="function"?o:(o[$l]||(o[$l]=function(c){return o.handleEvent(c)}),o[$l])}function Ze(){$.call(this),this.i=new Us(this),this.M=this,this.F=null}k(Ze,$),Ze.prototype[fe]=!0,Ze.prototype.removeEventListener=function(o,c,d,m){ho(this,o,c,d,m)};function ct(o,c){var d,m=o.F;if(m)for(d=[];m;m=m.F)d.push(m);if(o=o.M,m=c.type||c,typeof c=="string")c=new Y(c,o);else if(c instanceof Y)c.target=c.target||o;else{var R=c;c=new Y(m,o),I(c,R)}if(R=!0,d)for(var V=d.length-1;0<=V;V--){var B=c.g=d[V];R=fo(B,m,!0,c)&&R}if(B=c.g=o,R=fo(B,m,!0,c)&&R,R=fo(B,m,!1,c)&&R,d)for(V=0;V<d.length;V++)B=c.g=d[V],R=fo(B,m,!1,c)&&R}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],m=0;m<d.length;m++)Zt(d[m]);delete o.g[c],o.h--}}this.F=null},Ze.prototype.K=function(o,c,d,m){return this.i.add(String(o),c,!1,d,m)},Ze.prototype.L=function(o,c,d,m){return this.i.add(String(o),c,!0,d,m)};function fo(o,c,d,m){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var R=!0,V=0;V<c.length;++V){var B=c[V];if(B&&!B.da&&B.capture==d){var ye=B.listener,Ge=B.ha||B.src;B.fa&&jr(o.i,B),R=ye.call(Ge,m)!==!1&&R}}return R&&!m.defaultPrevented}function Gd(o,c,d){if(typeof o=="function")d&&(o=v(o,d));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Hd(o){o.g=Gd(()=>{o.g=null,o.i&&(o.i=!1,Hd(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class v_ extends ${constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Hd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bs(o){$.call(this),this.h=o,this.g={}}k(Bs,$);var Wd=[];function Qd(o){O(o.g,function(c,d){this.g.hasOwnProperty(d)&&kn(c)},o),o.g={}}Bs.prototype.N=function(){Bs.aa.N.call(this),Qd(this)},Bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ql=l.JSON.stringify,__=l.JSON.parse,w_=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Yl(){}Yl.prototype.h=null;function Kd(o){return o.h||(o.h=o.i())}function Xd(){}var zs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gl(){Y.call(this,"d")}k(Gl,Y);function Hl(){Y.call(this,"c")}k(Hl,Y);var fr={},Jd=null;function po(){return Jd=Jd||new Ze}fr.La="serverreachability";function Zd(o){Y.call(this,fr.La,o)}k(Zd,Y);function $s(o){const c=po();ct(c,new Zd(c))}fr.STAT_EVENT="statevent";function ef(o,c){Y.call(this,fr.STAT_EVENT,o),this.stat=c}k(ef,Y);function ht(o){const c=po();ct(c,new ef(c,o))}fr.Ma="timingevent";function tf(o,c){Y.call(this,fr.Ma,o),this.size=c}k(tf,Y);function qs(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ys(){this.g=!0}Ys.prototype.xa=function(){this.g=!1};function E_(o,c,d,m,R,V){o.info(function(){if(o.g)if(V)for(var B="",ye=V.split("&"),Ge=0;Ge<ye.length;Ge++){var de=ye[Ge].split("=");if(1<de.length){var et=de[0];de=de[1];var tt=et.split("_");B=2<=tt.length&&tt[1]=="type"?B+(et+"="+de+"&"):B+(et+"=redacted&")}}else B=null;else B=V;return"XMLHTTP REQ ("+m+") [attempt "+R+"]: "+c+`
`+d+`
`+B})}function T_(o,c,d,m,R,V,B){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+R+"]: "+c+`
`+d+`
`+V+" "+B})}function Ur(o,c,d,m){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+S_(o,d)+(m?" "+m:"")})}function x_(o,c){o.info(function(){return"TIMEOUT: "+c})}Ys.prototype.info=function(){};function S_(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var m=d[o];if(!(2>m.length)){var R=m[1];if(Array.isArray(R)&&!(1>R.length)){var V=R[0];if(V!="noop"&&V!="stop"&&V!="close")for(var B=1;B<R.length;B++)R[B]=""}}}}return ql(d)}catch{return c}}var mo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wl;function go(){}k(go,Yl),go.prototype.g=function(){return new XMLHttpRequest},go.prototype.i=function(){return{}},Wl=new go;function Rn(o,c,d,m){this.j=o,this.i=c,this.l=d,this.R=m||1,this.U=new Bs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rf}function rf(){this.i=null,this.g="",this.h=!1}var sf={},Ql={};function Kl(o,c,d){o.L=1,o.v=wo(dn(c)),o.m=d,o.P=!0,of(o,null)}function of(o,c){o.F=Date.now(),yo(o),o.A=dn(o.v);var d=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),wf(d.i,"t",m),o.C=0,d=o.j.J,o.h=new rf,o.g=jf(o.j,d?c:null,!o.m),0<o.O&&(o.M=new v_(v(o.Y,o,o.g),o.O)),c=o.U,d=o.g,m=o.ca;var R="readystatechange";Array.isArray(R)||(R&&(Wd[0]=R.toString()),R=Wd);for(var V=0;V<R.length;V++){var B=co(d,R[V],m||c.handleEvent,!1,c.h||c);if(!B)break;c.g[B.key]=B}c=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),$s(),E_(o.i,o.u,o.A,o.l,o.R,o.m)}Rn.prototype.ca=function(o){o=o.target;const c=this.M;c&&fn(o)==3?c.j():this.Y(o)},Rn.prototype.Y=function(o){try{if(o==this.g)e:{const tt=fn(this.g);var c=this.g.Ba();const $r=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||Pf(this.g)))){this.J||tt!=4||c==7||(c==8||0>=$r?$s(3):$s(2)),Xl(this);var d=this.g.Z();this.X=d;t:if(af(this)){var m=Pf(this.g);o="";var R=m.length,V=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),Gs(this);var B="";break t}this.h.i=new l.TextDecoder}for(c=0;c<R;c++)this.h.h=!0,o+=this.h.i.decode(m[c],{stream:!(V&&c==R-1)});m.length=0,this.h.g+=o,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=d==200,T_(this.i,this.u,this.A,this.l,this.R,tt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Ge=this.g;if((ye=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(ye)){var de=ye;break t}}de=null}if(d=de)Ur(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jl(this,d);else{this.o=!1,this.s=3,ht(12),pr(this),Gs(this);break e}}if(this.P){d=!0;let $t;for(;!this.J&&this.C<B.length;)if($t=I_(this,B),$t==Ql){tt==4&&(this.s=4,ht(14),d=!1),Ur(this.i,this.l,null,"[Incomplete Response]");break}else if($t==sf){this.s=4,ht(15),Ur(this.i,this.l,B,"[Invalid Chunk]"),d=!1;break}else Ur(this.i,this.l,$t,null),Jl(this,$t);if(af(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||B.length!=0||this.h.h||(this.s=1,ht(16),d=!1),this.o=this.o&&d,!d)Ur(this.i,this.l,B,"[Invalid Chunked Response]"),pr(this),Gs(this);else if(0<B.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),su(et),et.M=!0,ht(11))}}else Ur(this.i,this.l,B,null),Jl(this,B);tt==4&&pr(this),this.o&&!this.J&&(tt==4?bf(this.j,this):(this.o=!1,yo(this)))}else z_(this.g),d==400&&0<B.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),pr(this),Gs(this)}}}catch{}finally{}};function af(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function I_(o,c){var d=o.C,m=c.indexOf(`
`,d);return m==-1?Ql:(d=Number(c.substring(d,m)),isNaN(d)?sf:(m+=1,m+d>c.length?Ql:(c=c.slice(m,m+d),o.C=m+d,c)))}Rn.prototype.cancel=function(){this.J=!0,pr(this)};function yo(o){o.S=Date.now()+o.I,lf(o,o.I)}function lf(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=qs(v(o.ba,o),c)}function Xl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Rn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(x_(this.i,this.A),this.L!=2&&($s(),ht(17)),pr(this),this.s=2,Gs(this)):lf(this,this.S-o)};function Gs(o){o.j.G==0||o.J||bf(o.j,o)}function pr(o){Xl(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Qd(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Jl(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||Zl(d.h,o))){if(!o.K&&Zl(d.h,o)&&d.G==3){try{var m=d.Da.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var R=m;if(R[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)Ao(d),So(d);else break e;ru(d),ht(18)}}else d.za=R[1],0<d.za-d.T&&37500>R[2]&&d.F&&d.v==0&&!d.C&&(d.C=qs(v(d.Za,d),6e3));if(1>=hf(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else gr(d,11)}else if((o.K||d.g==o)&&Ao(d),!T(c))for(R=d.Da.g.parse(c),c=0;c<R.length;c++){let de=R[c];if(d.T=de[0],de=de[1],d.G==2)if(de[0]=="c"){d.K=de[1],d.ia=de[2];const et=de[3];et!=null&&(d.la=et,d.j.info("VER="+d.la));const tt=de[4];tt!=null&&(d.Aa=tt,d.j.info("SVER="+d.Aa));const $r=de[5];$r!=null&&typeof $r=="number"&&0<$r&&(m=1.5*$r,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const $t=o.g;if($t){const Co=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Co){var V=m.h;V.g||Co.indexOf("spdy")==-1&&Co.indexOf("quic")==-1&&Co.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(eu(V,V.h),V.h=null))}if(m.D){const iu=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&(m.ya=iu,we(m.I,m.D,iu))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var B=o;if(m.qa=Lf(m,m.J?m.ia:null,m.W),B.K){df(m.h,B);var ye=B,Ge=m.L;Ge&&(ye.I=Ge),ye.B&&(Xl(ye),yo(ye)),m.g=B}else Df(m);0<d.i.length&&Io(d)}else de[0]!="stop"&&de[0]!="close"||gr(d,7);else d.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?gr(d,7):nu(d):de[0]!="noop"&&d.l&&d.l.ta(de),d.v=0)}}$s(4)}catch{}}var A_=class{constructor(o,c){this.g=o,this.map=c}};function uf(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cf(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function hf(o){return o.h?1:o.g?o.g.size:0}function Zl(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function eu(o,c){o.g?o.g.add(c):o.h=c}function df(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}uf.prototype.cancel=function(){if(this.i=ff(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function ff(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return D(o.i)}function P_(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,m=0;m<d;m++)c.push(o[m]);return c}c=[],d=0;for(m in o)c[d++]=o[m];return c}function C_(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const m in o)c[d++]=m;return c}}}function pf(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=C_(o),m=P_(o),R=m.length,V=0;V<R;V++)c.call(void 0,m[V],d&&d[V],o)}var mf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k_(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var m=o[d].indexOf("="),R=null;if(0<=m){var V=o[d].substring(0,m);R=o[d].substring(m+1)}else V=o[d];c(V,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function mr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof mr){this.h=o.h,vo(this,o.j),this.o=o.o,this.g=o.g,_o(this,o.s),this.l=o.l;var c=o.i,d=new Qs;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),gf(this,d),this.m=o.m}else o&&(c=String(o).match(mf))?(this.h=!1,vo(this,c[1]||"",!0),this.o=Hs(c[2]||""),this.g=Hs(c[3]||"",!0),_o(this,c[4]),this.l=Hs(c[5]||"",!0),gf(this,c[6]||"",!0),this.m=Hs(c[7]||"")):(this.h=!1,this.i=new Qs(null,this.h))}mr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Ws(c,yf,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Ws(c,yf,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Ws(d,d.charAt(0)=="/"?D_:N_,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Ws(d,b_)),o.join("")};function dn(o){return new mr(o)}function vo(o,c,d){o.j=d?Hs(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function _o(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function gf(o,c,d){c instanceof Qs?(o.i=c,M_(o.i,o.h)):(d||(c=Ws(c,V_)),o.i=new Qs(c,o.h))}function we(o,c,d){o.i.set(c,d)}function wo(o){return we(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Hs(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ws(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,R_),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function R_(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var yf=/[#\/\?@]/g,N_=/[#\?:]/g,D_=/[#\?]/g,V_=/[#\?@]/g,b_=/#/g;function Qs(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Nn(o){o.g||(o.g=new Map,o.h=0,o.i&&k_(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=Qs.prototype,t.add=function(o,c){Nn(this),this.i=null,o=Br(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function vf(o,c){Nn(o),c=Br(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function _f(o,c){return Nn(o),c=Br(o,c),o.g.has(c)}t.forEach=function(o,c){Nn(this),this.g.forEach(function(d,m){d.forEach(function(R){o.call(c,R,m,this)},this)},this)},t.na=function(){Nn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let m=0;m<c.length;m++){const R=o[m];for(let V=0;V<R.length;V++)d.push(c[m])}return d},t.V=function(o){Nn(this);let c=[];if(typeof o=="string")_f(this,o)&&(c=c.concat(this.g.get(Br(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},t.set=function(o,c){return Nn(this),this.i=null,o=Br(this,o),_f(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function wf(o,c,d){vf(o,c),0<d.length&&(o.i=null,o.g.set(Br(o,c),D(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var m=c[d];const V=encodeURIComponent(String(m)),B=this.V(m);for(m=0;m<B.length;m++){var R=V;B[m]!==""&&(R+="="+encodeURIComponent(String(B[m]))),o.push(R)}}return this.i=o.join("&")};function Br(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function M_(o,c){c&&!o.j&&(Nn(o),o.i=null,o.g.forEach(function(d,m){var R=m.toLowerCase();m!=R&&(vf(this,m),wf(this,R,d))},o)),o.j=c}function O_(o,c){const d=new Ys;if(l.Image){const m=new Image;m.onload=P(Dn,d,"TestLoadImage: loaded",!0,c,m),m.onerror=P(Dn,d,"TestLoadImage: error",!1,c,m),m.onabort=P(Dn,d,"TestLoadImage: abort",!1,c,m),m.ontimeout=P(Dn,d,"TestLoadImage: timeout",!1,c,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else c(!1)}function L_(o,c){const d=new Ys,m=new AbortController,R=setTimeout(()=>{m.abort(),Dn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:m.signal}).then(V=>{clearTimeout(R),V.ok?Dn(d,"TestPingServer: ok",!0,c):Dn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(R),Dn(d,"TestPingServer: error",!1,c)})}function Dn(o,c,d,m,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),m(d)}catch{}}function j_(){this.g=new w_}function F_(o,c,d){const m=d||"";try{pf(o,function(R,V){let B=R;h(R)&&(B=ql(R)),c.push(m+V+"="+encodeURIComponent(B))})}catch(R){throw c.push(m+"type="+encodeURIComponent("_badmap")),R}}function Eo(o){this.l=o.Ub||null,this.j=o.eb||!1}k(Eo,Yl),Eo.prototype.g=function(){return new To(this.l,this.j)},Eo.prototype.i=function(o){return function(){return o}}({});function To(o,c){Ze.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(To,Ze),t=To.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Xs(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Xs(this)),this.g&&(this.readyState=3,Xs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ef(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ef(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Ks(this):Xs(this),this.readyState==3&&Ef(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Ks(this))},t.Qa=function(o){this.g&&(this.response=o,Ks(this))},t.ga=function(){this.g&&Ks(this)};function Ks(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Xs(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function Xs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(To.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Tf(o){let c="";return O(o,function(d,m){c+=m,c+=":",c+=d,c+=`\r
`}),c}function tu(o,c,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=Tf(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):we(o,c,d))}function Re(o){Ze.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Re,Ze);var U_=/^https?$/i,B_=["POST","PUT"];t=Re.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wl.g(),this.v=this.o?Kd(this.o):Kd(Wl),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(V){xf(this,V);return}if(o=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var R in m)d.set(R,m[R]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const V of m.keys())d.set(V,m.get(V));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(V=>V.toLowerCase()=="content-type"),R=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(B_,c,void 0))||m||R||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,B]of d)this.g.setRequestHeader(V,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Af(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){xf(this,V)}};function xf(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Sf(o),xo(o)}function Sf(o){o.A||(o.A=!0,ct(o,"complete"),ct(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ct(this,"complete"),ct(this,"abort"),xo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xo(this,!0)),Re.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?If(this):this.bb())},t.bb=function(){If(this)};function If(o){if(o.h&&typeof a<"u"&&(!o.v[1]||fn(o)!=4||o.Z()!=2)){if(o.u&&fn(o)==4)Gd(o.Ea,0,o);else if(ct(o,"readystatechange"),fn(o)==4){o.h=!1;try{const B=o.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var m;if(m=B===0){var R=String(o.D).match(mf)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),m=!U_.test(R?R.toLowerCase():"")}d=m}if(d)ct(o,"complete"),ct(o,"success");else{o.m=6;try{var V=2<fn(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",Sf(o)}}finally{xo(o)}}}}function xo(o,c){if(o.g){Af(o);const d=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ct(o,"ready");try{d.onreadystatechange=m}catch{}}}function Af(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function fn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),__(c)}};function Pf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function z_(o){const c={};o=(o.g&&2<=fn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(T(o[m]))continue;var d=C(o[m]);const R=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const V=c[R]||[];c[R]=V,V.push(d)}w(c,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function Cf(o){this.Aa=0,this.i=[],this.j=new Ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Js("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Js("baseRetryDelayMs",5e3,o),this.cb=Js("retryDelaySeedMs",1e4,o),this.Wa=Js("forwardChannelMaxRetries",2,o),this.wa=Js("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new uf(o&&o.concurrentRequestLimit),this.Da=new j_,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Cf.prototype,t.la=8,t.G=1,t.connect=function(o,c,d,m){ht(0),this.W=o,this.H=c||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=Lf(this,null,this.W),Io(this)};function nu(o){if(kf(o),o.G==3){var c=o.U++,d=dn(o.I);if(we(d,"SID",o.K),we(d,"RID",c),we(d,"TYPE","terminate"),Zs(o,d),c=new Rn(o,o.j,c),c.L=2,c.v=wo(dn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=jf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),yo(c)}Of(o)}function So(o){o.g&&(su(o),o.g.cancel(),o.g=null)}function kf(o){So(o),o.u&&(l.clearTimeout(o.u),o.u=null),Ao(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Io(o){if(!cf(o.h)&&!o.s){o.s=!0;var c=o.Ga;Ie||X(),U||(Ie(),U=!0),q.add(c,o),o.B=0}}function $_(o,c){return hf(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=qs(v(o.Ga,o,c),Mf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const R=new Rn(this,this.j,o);let V=this.o;if(this.S&&(V?(V=g(V),I(V,this.S)):V=this.S),this.m!==null||this.O||(R.H=V,V=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(c+=m,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Nf(this,R,c),d=dn(this.I),we(d,"RID",o),we(d,"CVER",22),this.D&&we(d,"X-HTTP-Session-Id",this.D),Zs(this,d),V&&(this.O?c="headers="+encodeURIComponent(String(Tf(V)))+"&"+c:this.m&&tu(d,this.m,V)),eu(this.h,R),this.Ua&&we(d,"TYPE","init"),this.P?(we(d,"$req",c),we(d,"SID","null"),R.T=!0,Kl(R,d,null)):Kl(R,d,c),this.G=2}}else this.G==3&&(o?Rf(this,o):this.i.length==0||cf(this.h)||Rf(this))};function Rf(o,c){var d;c?d=c.l:d=o.U++;const m=dn(o.I);we(m,"SID",o.K),we(m,"RID",d),we(m,"AID",o.T),Zs(o,m),o.m&&o.o&&tu(m,o.m,o.o),d=new Rn(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Nf(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),eu(o.h,d),Kl(d,m,c)}function Zs(o,c){o.H&&O(o.H,function(d,m){we(c,m,d)}),o.l&&pf({},function(d,m){we(c,m,d)})}function Nf(o,c,d){d=Math.min(o.i.length,d);var m=o.l?v(o.l.Na,o.l,o):null;e:{var R=o.i;let V=-1;for(;;){const B=["count="+d];V==-1?0<d?(V=R[0].g,B.push("ofs="+V)):V=0:B.push("ofs="+V);let ye=!0;for(let Ge=0;Ge<d;Ge++){let de=R[Ge].g;const et=R[Ge].map;if(de-=V,0>de)V=Math.max(0,R[Ge].g-100),ye=!1;else try{F_(et,B,"req"+de+"_")}catch{m&&m(et)}}if(ye){m=B.join("&");break e}}}return o=o.i.splice(0,d),c.D=o,m}function Df(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Ie||X(),U||(Ie(),U=!0),q.add(c,o),o.v=0}}function ru(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=qs(v(o.Fa,o),Mf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Vf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=qs(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),So(this),Vf(this))};function su(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Vf(o){o.g=new Rn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=dn(o.qa);we(c,"RID","rpc"),we(c,"SID",o.K),we(c,"AID",o.T),we(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&we(c,"TO",o.ja),we(c,"TYPE","xmlhttp"),Zs(o,c),o.m&&o.o&&tu(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=wo(dn(c)),d.m=null,d.P=!0,of(d,o)}t.Za=function(){this.C!=null&&(this.C=null,So(this),ru(this),ht(19))};function Ao(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function bf(o,c){var d=null;if(o.g==c){Ao(o),su(o),o.g=null;var m=2}else if(Zl(o.h,c))d=c.D,df(o.h,c),m=1;else return;if(o.G!=0){if(c.o)if(m==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var R=o.B;m=po(),ct(m,new tf(m,d)),Io(o)}else Df(o);else if(R=c.s,R==3||R==0&&0<c.X||!(m==1&&$_(o,c)||m==2&&ru(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),R){case 1:gr(o,5);break;case 4:gr(o,10);break;case 3:gr(o,6);break;default:gr(o,2)}}}function Mf(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function gr(o,c){if(o.j.info("Error code "+c),c==2){var d=v(o.fb,o),m=o.Xa;const R=!m;m=new mr(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||vo(m,"https"),wo(m),R?O_(m.toString(),d):L_(m.toString(),d)}else ht(2);o.G=0,o.l&&o.l.sa(c),Of(o),kf(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Of(o){if(o.G=0,o.ka=[],o.l){const c=ff(o.h);(c.length!=0||o.i.length!=0)&&(b(o.ka,c),b(o.ka,o.i),o.h.i.length=0,D(o.i),o.i.length=0),o.l.ra()}}function Lf(o,c,d){var m=d instanceof mr?dn(d):new mr(d);if(m.g!="")c&&(m.g=c+"."+m.g),_o(m,m.s);else{var R=l.location;m=R.protocol,c=c?c+"."+R.hostname:R.hostname,R=+R.port;var V=new mr(null);m&&vo(V,m),c&&(V.g=c),R&&_o(V,R),d&&(V.l=d),m=V}return d=o.D,c=o.ya,d&&c&&we(m,d,c),we(m,"VER",o.la),Zs(o,m),m}function jf(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Re(new Eo({eb:d})):new Re(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ff(){}t=Ff.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Po(){}Po.prototype.g=function(o,c){return new At(o,c)};function At(o,c){Ze.call(this),this.g=new Cf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!T(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!T(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new zr(this)}k(At,Ze),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){nu(this.g)},At.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=ql(o),o=d);c.i.push(new A_(c.Ya++,o)),c.G==3&&Io(c)},At.prototype.N=function(){this.g.l=null,delete this.j,nu(this.g),delete this.g,At.aa.N.call(this)};function Uf(o){Gl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}k(Uf,Gl);function Bf(){Hl.call(this),this.status=1}k(Bf,Hl);function zr(o){this.g=o}k(zr,Ff),zr.prototype.ua=function(){ct(this.g,"a")},zr.prototype.ta=function(o){ct(this.g,new Uf(o))},zr.prototype.sa=function(o){ct(this.g,new Bf)},zr.prototype.ra=function(){ct(this.g,"b")},Po.prototype.createWebChannel=Po.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,Uv=function(){return new Po},Fv=function(){return po()},jv=fr,Uc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mo.NO_ERROR=0,mo.TIMEOUT=8,mo.HTTP_ERROR=6,ca=mo,nf.COMPLETE="complete",Lv=nf,Xd.EventType=zs,zs.OPEN="a",zs.CLOSE="b",zs.ERROR="c",zs.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,fi=Xd,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,Ov=Re}).apply(typeof Go<"u"?Go:typeof self<"u"?self:typeof window<"u"?window:{});const um="@firebase/firestore",cm="4.7.7";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ms="11.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new kv("@firebase/firestore");function Yr(){return Nr.logLevel}function G(t,...e){if(Nr.logLevel<=ue.DEBUG){const n=e.map(sd);Nr.debug(`Firestore (${Ms}): ${t}`,...n)}}function In(t,...e){if(Nr.logLevel<=ue.ERROR){const n=e.map(sd);Nr.error(`Firestore (${Ms}): ${t}`,...n)}}function xs(t,...e){if(Nr.logLevel<=ue.WARN){const n=e.map(sd);Nr.warn(`Firestore (${Ms}): ${t}`,...n)}}function sd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${Ms}) INTERNAL ASSERTION FAILED: `+t;throw In(e),new Error(e)}function me(t,e){t||J()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}}class vx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _x{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new _n;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _n,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _n)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new Bv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new it(e)}}class wx{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Ex{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new wx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tx{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ex(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){me(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new hm(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new hm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=xx(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function zc(t,e){const n=Bc().encode(t),r=Bc().encode(e);for(let s=0;s<Math.min(n.length,r.length);s++){const i=ie(n[s],r[s]);if(i!==0)return i}return ie(n.length,r.length)}function Ss(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=-62135596800,fm=1e6;class Be{static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fm);return new Be(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dm)throw new W(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fm}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-dm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Be(0,0))}static max(){return new Z(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="__name__";class rn{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=rn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ie(e.length,n.length)}static compareSegments(e,n){const r=rn.isNumericId(e),s=rn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?rn.extractNumericId(e).compare(rn.extractNumericId(n)):zc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xn.fromString(e.substring(4,e.length-2))}}class Te extends rn{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const Sx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends rn{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return Sx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pm}static keyField(){return new Qe([pm])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new W(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new W(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(Te.fromString(e))}static fromName(e){return new K(Te.fromString(e).popFirst(5))}static empty(){return new K(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new Te(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=-1;function Ix(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new nr(s,K.empty(),e)}function Ax(t){return new nr(t.readTime,t.key,Qi)}class nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new nr(Z.min(),K.empty(),Qi)}static max(){return new nr(Z.max(),K.empty(),Qi)}}function Px(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Os(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==Cx)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{a[h]=p,++l,l===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Rx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ls(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}_l.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=-1;function wl(t){return t==null}function qa(t){return t===0&&1/t==-1/0}function Nx(t){return typeof t=="number"&&Number.isInteger(t)&&!qa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="";function Dx(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=mm(e)),e=Vx(t.get(n),e);return mm(e)}function Vx(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case $v:n+="";break;default:n+=i}}return n}function mm(t){return t+$v+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||We.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,We.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,We.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ho(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ho(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ho(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ho(this.root,e,this.comparator,!0)}}class Ho{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class We{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??We.RED,this.left=s??We.EMPTY,this.right=i??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new We(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return We.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,s,i){return this}insert(e,n,r){return new We(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ym(this.data.getIterator())}getIteratorFrom(e){return new ym(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class ym{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new kt([])}unionWith(e){let n=new ze(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ss(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Yv("Invalid base64 string: "+i):i}}(e);return new Je(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Je(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const bx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rr(t){if(me(!!t),typeof t=="string"){let e=0;const n=bx.exec(t);if(me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sr(t){return typeof t=="string"?Je.fromBase64String(t):Je.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="server_timestamp",Hv="__type__",Wv="__previous_value__",Qv="__local_write_time__";function od(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Hv])===null||n===void 0?void 0:n.stringValue)===Gv}function El(t){const e=t.mapValue.fields[Wv];return od(e)?El(e):e}function Ki(t){const e=rr(t.mapValue.fields[Qv].timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n,r,s,i,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}const Ya="(default)";class Xi{constructor(e,n){this.projectId=e,this.database=n||Ya}static empty(){return new Xi("","")}get isDefaultDatabase(){return this.database===Ya}isEqual(e){return e instanceof Xi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="__type__",Ox="__max__",Wo={mapValue:{}},Xv="__vector__",Ga="value";function ir(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?od(t)?4:jx(t)?9007199254740991:Lx(t)?10:11:J()}function hn(t,e){if(t===e)return!0;const n=ir(t);if(n!==ir(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ki(t).isEqual(Ki(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=rr(s.timestampValue),l=rr(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return sr(s.bytesValue).isEqual(sr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return De(s.geoPointValue.latitude)===De(i.geoPointValue.latitude)&&De(s.geoPointValue.longitude)===De(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return De(s.integerValue)===De(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=De(s.doubleValue),l=De(i.doubleValue);return a===l?qa(a)===qa(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Ss(t.arrayValue.values||[],e.arrayValue.values||[],hn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(gm(a)!==gm(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!hn(a[u],l[u])))return!1;return!0}(t,e);default:return J()}}function Ji(t,e){return(t.values||[]).find(n=>hn(n,e))!==void 0}function Is(t,e){if(t===e)return 0;const n=ir(t),r=ir(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=De(i.integerValue||i.doubleValue),u=De(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return vm(t.timestampValue,e.timestampValue);case 4:return vm(Ki(t),Ki(e));case 5:return zc(t.stringValue,e.stringValue);case 6:return function(i,a){const l=sr(i),u=sr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=ie(l[h],u[h]);if(p!==0)return p}return ie(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ie(De(i.latitude),De(a.latitude));return l!==0?l:ie(De(i.longitude),De(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _m(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,h,p;const y=i.fields||{},v=a.fields||{},P=(l=y[Ga])===null||l===void 0?void 0:l.arrayValue,k=(u=v[Ga])===null||u===void 0?void 0:u.arrayValue,D=ie(((h=P==null?void 0:P.values)===null||h===void 0?void 0:h.length)||0,((p=k==null?void 0:k.values)===null||p===void 0?void 0:p.length)||0);return D!==0?D:_m(P,k)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Wo.mapValue&&a===Wo.mapValue)return 0;if(i===Wo.mapValue)return 1;if(a===Wo.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=a.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let y=0;y<u.length&&y<p.length;++y){const v=zc(u[y],p[y]);if(v!==0)return v;const P=Is(l[u[y]],h[p[y]]);if(P!==0)return P}return ie(u.length,p.length)}(t.mapValue,e.mapValue);default:throw J()}}function vm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=rr(t),r=rr(e),s=ie(n.seconds,r.seconds);return s!==0?s:ie(n.nanos,r.nanos)}function _m(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Is(n[s],r[s]);if(i)return i}return ie(n.length,r.length)}function As(t){return $c(t)}function $c(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=rr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=$c(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${$c(n.fields[a])}`;return s+"}"}(t.mapValue):J()}function ha(t){switch(ir(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=El(t);return e?16+ha(e):16;case 5:return 2*t.stringValue.length;case 6:return sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ha(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return hr(r.fields,(i,a)=>{s+=i.length+ha(a)}),s}(t.mapValue);default:throw J()}}function wm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qc(t){return!!t&&"integerValue"in t}function ad(t){return!!t&&"arrayValue"in t}function Em(t){return!!t&&"nullValue"in t}function Tm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function da(t){return!!t&&"mapValue"in t}function Lx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Kv])===null||n===void 0?void 0:n.stringValue)===Xv}function Ai(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return hr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ai(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ai(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Ox}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.value=e}static empty(){return new wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!da(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ai(n)}setAll(e){let n=Qe.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Ai(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());da(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];da(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){hr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new wt(Ai(this.value))}}function Jv(t){const e=[];return hr(t.fields,(n,r)=>{const s=new Qe([n]);if(da(r)){const i=Jv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new at(e,0,Z.min(),Z.min(),Z.min(),wt.empty(),0)}static newFoundDocument(e,n,r,s){return new at(e,1,n,Z.min(),r,s,0)}static newNoDocument(e,n){return new at(e,2,n,Z.min(),Z.min(),wt.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,Z.min(),Z.min(),wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.position=e,this.inclusive=n}}function xm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(a.referenceValue),n.key):r=Is(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n="asc"){this.field=e,this.dir=n}}function Fx(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{}class Le extends Zv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Bx(e,n,r):n==="array-contains"?new qx(e,r):n==="in"?new Yx(e,r):n==="not-in"?new Gx(e,r):n==="array-contains-any"?new Hx(e,r):new Le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zx(e,r):new $x(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Is(n,this.value)):n!==null&&ir(this.value)===ir(n)&&this.matchesComparison(Is(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends Zv{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Jt(e,n)}matches(e){return e0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function e0(t){return t.op==="and"}function t0(t){return Ux(t)&&e0(t)}function Ux(t){for(const e of t.filters)if(e instanceof Jt)return!1;return!0}function Yc(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+As(t.value);if(t0(t))return t.filters.map(e=>Yc(e)).join(",");{const e=t.filters.map(n=>Yc(n)).join(",");return`${t.op}(${e})`}}function n0(t,e){return t instanceof Le?function(r,s){return s instanceof Le&&r.op===s.op&&r.field.isEqual(s.field)&&hn(r.value,s.value)}(t,e):t instanceof Jt?function(r,s){return s instanceof Jt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&n0(a,s.filters[l]),!0):!1}(t,e):void J()}function r0(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${As(n.value)}`}(t):t instanceof Jt?function(n){return n.op.toString()+" {"+n.getFilters().map(r0).join(" ,")+"}"}(t):"Filter"}class Bx extends Le{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class zx extends Le{constructor(e,n){super(e,"in",n),this.keys=s0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $x extends Le{constructor(e,n){super(e,"not-in",n),this.keys=s0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function s0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class qx extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ad(n)&&Ji(n.arrayValue,this.value)}}class Yx extends Le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ji(this.value.arrayValue,n)}}class Gx extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ji(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ji(this.value.arrayValue,n)}}class Hx extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ad(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ji(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.le=null}}function Im(t,e=null,n=[],r=[],s=null,i=null,a=null){return new Wx(t,e,n,r,s,i,a)}function ld(t){const e=ee(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),wl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>As(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>As(r)).join(",")),e.le=n}return e.le}function ud(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Fx(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!n0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sm(t.startAt,e.startAt)&&Sm(t.endAt,e.endAt)}function Gc(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Qx(t,e,n,r,s,i,a,l){return new io(t,e,n,r,s,i,a,l)}function Tl(t){return new io(t)}function Am(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function i0(t){return t.collectionGroup!==null}function Pi(t){const e=ee(t);if(e.he===null){e.he=[];const n=new Set;for(const i of e.explicitOrderBy)e.he.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ze(Qe.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.he.push(new Wa(i,r))}),n.has(Qe.keyField().canonicalString())||e.he.push(new Wa(Qe.keyField(),r))}return e.he}function ln(t){const e=ee(t);return e.Pe||(e.Pe=Kx(e,Pi(t))),e.Pe}function Kx(t,e){if(t.limitType==="F")return Im(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Wa(s.field,i)});const n=t.endAt?new Ha(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ha(t.startAt.position,t.startAt.inclusive):null;return Im(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Hc(t,e){const n=t.filters.concat([e]);return new io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wc(t,e,n){return new io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xl(t,e){return ud(ln(t),ln(e))&&t.limitType===e.limitType}function o0(t){return`${ld(ln(t))}|lt:${t.limitType}`}function Gr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>r0(s)).join(", ")}]`),wl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>As(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>As(s)).join(",")),`Target(${r})`}(ln(t))}; limitType=${t.limitType})`}function Sl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Pi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const h=xm(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,Pi(r),s)||r.endAt&&!function(a,l,u){const h=xm(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,Pi(r),s))}(t,e)}function Xx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function a0(t){return(e,n)=>{let r=!1;for(const s of Pi(t)){const i=Jx(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Jx(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Is(u,h):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){hr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return qv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new ke(K.comparator);function An(){return Zx}const l0=new ke(K.comparator);function pi(...t){let e=l0;for(const n of t)e=e.insert(n.key,n);return e}function u0(t){let e=l0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xr(){return Ci()}function c0(){return Ci()}function Ci(){return new Mr(t=>t.toString(),(t,e)=>t.isEqual(e))}const e2=new ke(K.comparator),t2=new ze(K.comparator);function oe(...t){let e=t2;for(const n of t)e=e.add(n);return e}const n2=new ze(ie);function r2(){return n2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qa(e)?"-0":e}}function h0(t){return{integerValue:""+t}}function s2(t,e){return Nx(e)?h0(e):cd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this._=void 0}}function i2(t,e,n){return t instanceof Qa?function(s,i){const a={fields:{[Hv]:{stringValue:Gv},[Qv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&od(i)&&(i=El(i)),i&&(a.fields[Wv]=i),{mapValue:a}}(n,e):t instanceof Ps?f0(t,e):t instanceof Zi?p0(t,e):function(s,i){const a=d0(s,i),l=Pm(a)+Pm(s.Ie);return qc(a)&&qc(s.Ie)?h0(l):cd(s.serializer,l)}(t,e)}function o2(t,e,n){return t instanceof Ps?f0(t,e):t instanceof Zi?p0(t,e):n}function d0(t,e){return t instanceof Ka?function(r){return qc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Qa extends Il{}class Ps extends Il{constructor(e){super(),this.elements=e}}function f0(t,e){const n=m0(e);for(const r of t.elements)n.some(s=>hn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Zi extends Il{constructor(e){super(),this.elements=e}}function p0(t,e){let n=m0(e);for(const r of t.elements)n=n.filter(s=>!hn(s,r));return{arrayValue:{values:n}}}class Ka extends Il{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Pm(t){return De(t.integerValue||t.doubleValue)}function m0(t){return ad(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.field=e,this.transform=n}}function l2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ps&&s instanceof Ps||r instanceof Zi&&s instanceof Zi?Ss(r.elements,s.elements,hn):r instanceof Ka&&s instanceof Ka?hn(r.Ie,s.Ie):r instanceof Qa&&s instanceof Qa}(t.transform,e.transform)}class u2{constructor(e,n){this.version=e,this.transformResults=n}}class Ft{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ft}static exists(e){return new Ft(void 0,e)}static updateTime(e){return new Ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Al{}function g0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hd(t.key,Ft.none()):new oo(t.key,t.data,Ft.none());{const n=t.data,r=wt.empty();let s=new ze(Qe.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new dr(t.key,r,new kt(s.toArray()),Ft.none())}}function c2(t,e,n){t instanceof oo?function(s,i,a){const l=s.value.clone(),u=km(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof dr?function(s,i,a){if(!fa(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=km(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(y0(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ki(t,e,n,r){return t instanceof oo?function(i,a,l,u){if(!fa(i.precondition,a))return l;const h=i.value.clone(),p=Rm(i.fieldTransforms,u,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof dr?function(i,a,l,u){if(!fa(i.precondition,a))return l;const h=Rm(i.fieldTransforms,u,a),p=a.data;return p.setAll(y0(i)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(i,a,l){return fa(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function h2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=d0(r.transform,s||null);i!=null&&(n===null&&(n=wt.empty()),n.set(r.field,i))}return n||null}function Cm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ss(r,s,(i,a)=>l2(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oo extends Al{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class dr extends Al{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function y0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function km(t,e,n){const r=new Map;me(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,o2(a,l,n[s]))}return r}function Rm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,i2(i,a,e))}return r}class hd extends Al{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class d2 extends Al{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&c2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ki(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ki(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=c0();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=g0(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Ss(this.mutations,e.mutations,(n,r)=>Cm(n,r))&&Ss(this.baseMutations,e.baseMutations,(n,r)=>Cm(n,r))}}class dd{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){me(e.mutations.length===r.length);let s=function(){return e2}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new dd(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,ae;function g2(t){switch(t){case j.OK:return J();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return J()}}function v0(t){if(t===void 0)return In("GRPC error has no .code"),j.UNKNOWN;switch(t){case Me.OK:return j.OK;case Me.CANCELLED:return j.CANCELLED;case Me.UNKNOWN:return j.UNKNOWN;case Me.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Me.INTERNAL:return j.INTERNAL;case Me.UNAVAILABLE:return j.UNAVAILABLE;case Me.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Me.NOT_FOUND:return j.NOT_FOUND;case Me.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Me.ABORTED:return j.ABORTED;case Me.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Me.DATA_LOSS:return j.DATA_LOSS;default:return J()}}(ae=Me||(Me={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=new Xn([4294967295,4294967295],0);function Nm(t){const e=Bc().encode(t),n=new Mv;return n.update(e),new Uint8Array(n.digest())}function Dm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Xn([n,r],0),new Xn([s,i],0)]}class fd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mi(`Invalid padding: ${n}`);if(r<0)throw new mi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mi(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Xn.fromNumber(this.Ee)}Ae(e,n,r){let s=e.add(n.multiply(Xn.fromNumber(r)));return s.compare(y2)===1&&(s=new Xn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=Nm(e),[r,s]=Dm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ae(r,s,i);if(!this.Re(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new fd(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ee===0)return;const n=Nm(e),[r,s]=Dm(n);for(let i=0;i<this.hashCount;i++){const a=this.Ae(r,s,i);this.Ve(a)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class mi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ao.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pl(Z.min(),s,new ke(ie),An(),oe())}}class ao{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ao(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,r,s){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=s}}class _0{constructor(e,n){this.targetId=e,this.ge=n}}class w0{constructor(e,n,r=Je.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Vm{constructor(){this.pe=0,this.ye=bm(),this.we=Je.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=oe(),n=oe(),r=oe();return this.ye.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J()}}),new ao(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=bm()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,me(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class v2{constructor(e){this.ke=e,this.qe=new Map,this.Qe=An(),this.$e=Qo(),this.Ue=Qo(),this.Ke=new ke(ie)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,r=e.ge.count,s=this.Xe(n);if(s){const i=s.target;if(Gc(i))if(r===0){const a=new K(i.path);this.ze(n,a,at.newNoDocument(a,Z.min()))}else me(r===1);else{const a=this.et(n);if(a!==r){const l=this.tt(e),u=l?this.nt(l,e,a):1;if(u!==0){this.Ye(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,h)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=sr(r).toUint8Array()}catch(u){if(u instanceof Yv)return xs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new fd(a,s,i)}catch(u){return xs(u instanceof mi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.ze(n,i,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((i,a)=>{const l=this.Xe(a);if(l){if(i.current&&Gc(l.target)){const u=new K(l.target.path);this._t(u).has(a)||this.ut(a,u)||this.ze(a,u,at.newNoDocument(u,e))}i.ve&&(n.set(a,i.Fe()),i.Me())}});let r=oe();this.Ue.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Xe(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.Qe.forEach((i,a)=>a.setReadTime(e));const s=new Pl(e,n,this.Ke,this.Qe,r);return this.Qe=An(),this.$e=Qo(),this.Ue=Qo(),this.Ke=new ke(ie),s}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new Vm,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new ze(ie),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new ze(ie),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Vm),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Qo(){return new ke(K.comparator)}function bm(){return new ke(K.comparator)}const _2={asc:"ASCENDING",desc:"DESCENDING"},w2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E2={and:"AND",or:"OR"};class T2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qc(t,e){return t.useProto3Json||wl(e)?e:{value:e}}function Xa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function x2(t,e){return Xa(t,e.toTimestamp())}function un(t){return me(!!t),Z.fromTimestamp(function(n){const r=rr(n);return new Be(r.seconds,r.nanos)}(t))}function pd(t,e){return Kc(t,e).canonicalString()}function Kc(t,e){const n=function(s){return new Te(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function T0(t){const e=Te.fromString(t);return me(P0(e)),e}function Xc(t,e){return pd(t.databaseId,e.path)}function Ou(t,e){const n=T0(e);if(n.get(1)!==t.databaseId.projectId)throw new W(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(S0(n))}function x0(t,e){return pd(t.databaseId,e)}function S2(t){const e=T0(t);return e.length===4?Te.emptyPath():S0(e)}function Jc(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function S0(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Mm(t,e,n){return{name:Xc(t,e),fields:n.value.mapValue.fields}}function I2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(me(p===void 0||typeof p=="string"),Je.fromBase64String(p||"")):(me(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Je.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const p=h.code===void 0?j.UNKNOWN:v0(h.code);return new W(p,h.message||"")}(a);n=new w0(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ou(t,r.document.name),i=un(r.document.updateTime),a=r.document.createTime?un(r.document.createTime):Z.min(),l=new wt({mapValue:{fields:r.document.fields}}),u=at.newFoundDocument(s,i,a,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new pa(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ou(t,r.document),i=r.readTime?un(r.readTime):Z.min(),a=at.newNoDocument(s,i),l=r.removedTargetIds||[];n=new pa([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ou(t,r.document),i=r.removedTargetIds||[];n=new pa([],i,s,null)}else{if(!("filter"in e))return J();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new m2(s,i),l=r.targetId;n=new _0(l,a)}}return n}function A2(t,e){let n;if(e instanceof oo)n={update:Mm(t,e.key,e.value)};else if(e instanceof hd)n={delete:Xc(t,e.key)};else if(e instanceof dr)n={update:Mm(t,e.key,e.data),updateMask:M2(e.fieldMask)};else{if(!(e instanceof d2))return J();n={verify:Xc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Qa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ps)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ka)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:x2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J()}(t,e.precondition)),n}function P2(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?un(s.updateTime):un(i);return a.isEqual(Z.min())&&(a=un(i)),new u2(a,s.transformResults||[])}(n,e))):[]}function C2(t,e){return{documents:[x0(t,e.path)]}}function k2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=x0(t,s);const i=function(h){if(h.length!==0)return A0(Jt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(p=>function(v){return{field:Hr(v.field),direction:D2(v.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Qc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:n,parent:s}}function R2(t){let e=S2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){me(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(y){const v=I0(y);return v instanceof Jt&&t0(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(v=>function(k){return new Wa(Wr(k.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let l=null;n.limit&&(l=function(y){let v;return v=typeof y=="object"?y.value:y,wl(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(y){const v=!!y.before,P=y.values||[];return new Ha(P,v)}(n.startAt));let h=null;return n.endAt&&(h=function(y){const v=!y.before,P=y.values||[];return new Ha(P,v)}(n.endAt)),Qx(e,s,a,i,l,"F",u,h)}function N2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function I0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wr(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wr(n.unaryFilter.field);return Le.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wr(n.unaryFilter.field);return Le.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Wr(n.unaryFilter.field);return Le.create(a,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return Le.create(Wr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jt.create(n.compositeFilter.filters.map(r=>I0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function D2(t){return _2[t]}function V2(t){return w2[t]}function b2(t){return E2[t]}function Hr(t){return{fieldPath:t.canonicalString()}}function Wr(t){return Qe.fromServerFormat(t.fieldPath)}function A0(t){return t instanceof Le?function(n){if(n.op==="=="){if(Tm(n.value))return{unaryFilter:{field:Hr(n.field),op:"IS_NAN"}};if(Em(n.value))return{unaryFilter:{field:Hr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tm(n.value))return{unaryFilter:{field:Hr(n.field),op:"IS_NOT_NAN"}};if(Em(n.value))return{unaryFilter:{field:Hr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hr(n.field),op:V2(n.op),value:n.value}}}(t):t instanceof Jt?function(n){const r=n.getFilters().map(s=>A0(s));return r.length===1?r[0]:{compositeFilter:{op:b2(n.op),filters:r}}}(t):J()}function M2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function P0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n,r,s,i=Z.min(),a=Z.min(),l=Je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Un(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.Tt=e}}function L2(t){const e=R2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.Tn=new F2}addToCollectionParentIndex(e,n){return this.Tn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(nr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(nr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class F2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(Te.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},C0=41943040;class vt{static withCacheSize(e){return new vt(e,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vt.DEFAULT_COLLECTION_PERCENTILE=10,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vt.DEFAULT=new vt(C0,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vt.DISABLED=new vt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Cs(0)}static Kn(){return new Cs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="LruGarbageCollector",U2=1048576;function jm([t,e],[n,r]){const s=ie(t,n);return s===0?ie(e,r):s}class B2{constructor(e){this.Hn=e,this.buffer=new ze(jm),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class z2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){G(Lm,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ls(n)?G(Lm,"Ignoring IndexedDB error during garbage collection: ",n):await Os(n)}await this.er(3e5)})}}class $2{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(_l.ae);const r=new B2(n);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Om)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Om):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,s,i,a,l,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,a=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,l=Date.now(),this.removeTargets(e,r,n))).next(y=>(i=y,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(h=Date.now(),Yr()<=ue.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${y} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:y})))}}function q2(t,e){return new $2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.changes=new Mr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ki(r.mutation,s,kt.empty(),Be.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=xr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=pi();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=xr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=An();const a=Ci(),l=function(){return Ci()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof dr)?i=i.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),ki(p.mutation,h,p.mutation.getFieldMask(),Be.now())):a.set(h.key,kt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>a.set(h,p)),n.forEach((h,p)=>{var y;return l.set(h,new G2(p,(y=a.get(h))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ci();let s=new ke((a,l)=>a-l),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||kt.empty();p=l.applyToLocalView(h,p),r.set(u,p);const y=(s.get(l.batchId)||oe()).add(u);s=s.insert(l.batchId,y)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,y=c0();p.forEach(v=>{if(!i.has(v)){const P=g0(n.get(v),r.get(v));P!==null&&y.set(v,P),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,y))}return L.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):i0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(xr());let l=Qi,u=i;return a.next(h=>L.forEach(h,(p,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),i.get(p)?L.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{u=u.insert(p,v)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,oe())).next(p=>({batchId:l,changes:u0(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=pi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=pi();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const h=function(y,v){return new io(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((y,v)=>{a=a.insert(y,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,h)=>{const p=h.getKey();a.get(p)===null&&(a=a.insert(p,at.newInvalidDocument(p)))});let l=pi();return a.forEach((u,h)=>{const p=i.get(u);p!==void 0&&ki(p.mutation,h,kt.empty(),Be.now()),Sl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return L.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:un(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:L2(s.bundledQuery),readTime:un(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.overlays=new ke(K.comparator),this.Rr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.Et(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Rr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=xr(),i=n.length+1,a=new K(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ke((h,p)=>h-p);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=xr(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=xr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return L.resolve(l)}Et(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new p2(n,r));let i=this.Rr.get(n);i===void 0&&(i=oe(),this.Rr.set(n,i)),this.Rr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){this.Vr=new ze($e.mr),this.gr=new ze($e.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new $e(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new $e(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new K(new Te([])),r=new $e(n,e),s=new $e(n,e+1),i=[];return this.gr.forEachInRange([r,s],a=>{this.wr(a),i.push(a.key)}),i}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new K(new Te([])),r=new $e(n,e),s=new $e(n,e+1);let i=oe();return this.gr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new $e(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $e{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return K.comparator(e.key,n.key)||ie(e.Cr,n.Cr)}static pr(e,n){return ie(e.Cr,n.Cr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new ze($e.mr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new f2(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Mr=this.Mr.add(new $e(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,n){return L.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Nr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?id:this.Fr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $e(n,0),s=new $e(n,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([r,s],a=>{const l=this.Or(a.Cr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(ie);return n.forEach(s=>{const i=new $e(s,0),a=new $e(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([i,a],l=>{r=r.add(l.Cr)})}),L.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const a=new $e(new K(i),0);let l=new ze(ie);return this.Mr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Cr)),!0)},a),L.resolve(this.Br(l))}Br(e){const n=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return L.forEach(n.mutations,s=>{const i=new $e(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new $e(n,0),s=this.Mr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.kr=e,this.docs=function(){return new ke(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=An();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():at.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=An();const a=n.path,l=new K(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Px(Ax(p),r)<=0||(s.has(p.key)||Sl(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J()}qr(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Z2(this)}getSize(e){return L.resolve(this.size)}}class Z2 extends Y2{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.persistence=e,this.Qr=new Mr(n=>ld(n),ud),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.$r=0,this.Ur=new md,this.targetCount=0,this.Kr=Cs.Un()}forEachTarget(e,n){return this.Qr.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),L.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Cs(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.zn(n),L.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Qr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new _l(0),this.zr=!1,this.zr=!0,this.jr=new K2,this.referenceDelegate=e(this),this.Hr=new eS(this),this.indexManager=new j2,this.remoteDocumentCache=function(s){return new J2(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new O2(n),this.Yr=new W2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Q2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new X2(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new tS(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(i=>this.referenceDelegate.Xr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}ei(e,n){return L.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class tS extends kx{constructor(e){super(),this.currentSequenceNumber=e}}class gd{constructor(e){this.persistence=e,this.ti=new md,this.ni=null}static ri(e){return new gd(e)}get ii(){if(this.ni)return this.ni;throw J()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),L.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.ii.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.ii,r=>{const s=K.fromPath(r);return this.si(e,s).next(i=>{i||n.removeEntry(s,Z.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return L.or([()=>L.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Ja{constructor(e,n){this.persistence=e,this.oi=new Mr(r=>Dx(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=q2(this,n)}static ri(e,n){return new Ja(e,n)}Zr(){}Xr(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return L.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.qr(e,a=>this.ar(e,a,n).next(l=>{l||(r++,i.removeEntry(a,Z.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),L.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ha(e.data.value)),n}ar(e,n,r){return L.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=s}static Yi(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new yd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return XT()?8:Rx(QT())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.rs(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ss(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new nS;return this._s(e,n,a).next(l=>{if(i.result=l,this.Xi)return this.us(e,n,a,l.size)})}).next(()=>i.result)}us(e,n,r,s){return r.documentReadCount<this.es?(Yr()<=ue.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Gr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),L.resolve()):(Yr()<=ue.DEBUG&&G("QueryEngine","Query:",Gr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(Yr()<=ue.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Gr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ln(n))):L.resolve())}rs(e,n){if(Am(n))return L.resolve(null);let r=ln(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Wc(n,null,"F"),r=ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=oe(...i);return this.ns.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.cs(n,l);return this.ls(n,h,a,u.readTime)?this.rs(e,Wc(n,null,"F")):this.hs(e,h,n,u)}))})))}ss(e,n,r,s){return Am(n)||s.isEqual(Z.min())?L.resolve(null):this.ns.getDocuments(e,r).next(i=>{const a=this.cs(n,i);return this.ls(n,a,r,s)?L.resolve(null):(Yr()<=ue.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gr(n)),this.hs(e,a,n,Ix(s,Qi)).next(l=>l))})}cs(e,n){let r=new ze(a0(e));return n.forEach((s,i)=>{Sl(e,i)&&(r=r.add(i))}),r}ls(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}_s(e,n,r){return Yr()<=ue.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Gr(n)),this.ns.getDocumentsMatchingQuery(e,n,nr.min(),r)}hs(e,n,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="LocalStore",sS=3e8;class iS{constructor(e,n,r,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new ke(ie),this.Is=new Mr(i=>ld(i),ud),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new H2(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function oS(t,e,n,r){return new iS(t,e,n,r)}async function R0(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=oe();for(const h of s){a.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Rs:h,removedBatchIds:a,addedBatchIds:l}))})})}function aS(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const y=h.batch,v=y.keys();let P=L.resolve();return v.forEach(k=>{P=P.next(()=>p.getEntry(u,k)).next(D=>{const b=h.docVersions.get(k);me(b!==null),D.version.compareTo(b)<0&&(y.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),p.addEntry(D)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(u,y))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=oe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function N0(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function lS(t,e){const n=ee(t),r=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const l=[];e.targetChanges.forEach((p,y)=>{const v=s.get(y);if(!v)return;l.push(n.Hr.removeMatchingKeys(i,p.removedDocuments,y).next(()=>n.Hr.addMatchingKeys(i,p.addedDocuments,y)));let P=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(y)!==null?P=P.withResumeToken(Je.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):p.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(p.resumeToken,r)),s=s.insert(y,P),function(D,b,S){return D.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=sS?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(v,P,p)&&l.push(n.Hr.updateTargetData(i,P))});let u=An(),h=oe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(uS(i,a,e.documentUpdates).next(p=>{u=p.Vs,h=p.fs})),!r.isEqual(Z.min())){const p=n.Hr.getLastRemoteSnapshotVersion(i).next(y=>n.Hr.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return L.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Ts=s,i))}function uS(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=An();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):G(vd,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Vs:a,fs:s}})}function cS(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=id),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hS(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Hr.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Hr.allocateTargetId(r).next(a=>(s=new Un(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function Zc(t,e,n){const r=ee(t),s=r.Ts.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ls(a))throw a;G(vd,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function Fm(t,e,n){const r=ee(t);let s=Z.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,p){const y=ee(u),v=y.Is.get(p);return v!==void 0?L.resolve(y.Ts.get(v)):y.Hr.getTargetData(h,p)}(r,a,ln(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.Ps.getDocumentsMatchingQuery(a,e,n?s:Z.min(),n?i:oe())).next(l=>(dS(r,Xx(e),l),{documents:l,gs:i})))}function dS(t,e,n){let r=t.Es.get(e)||Z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Es.set(e,r)}class Um{constructor(){this.activeTargetIds=r2()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fS{constructor(){this.ho=new Um,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Um,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="ConnectivityMonitor";class zm{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){G(Bm,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){G(Bm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko=null;function eh(){return Ko===null?Ko=function(){return 268435456+Math.round(2147483648*Math.random())}():Ko++,"0x"+Ko.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="RestConnection",mS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gS{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===Ya?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,n,r,s,i){const a=eh(),l=this.bo(e,n.toUriEncodedString());G(Lu,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,i),this.vo(e,l,u,r).then(h=>(G(Lu,`Received RPC '${e}' ${a}: `,h),h),h=>{throw xs(Lu,`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Co(e,n,r,s,i,a){return this.So(e,n,r,s,i)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ms}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}bo(e,n){const r=mS[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection";class vS extends gS{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const i=eh();return new Promise((a,l)=>{const u=new Ov;u.setWithCredentials(!0),u.listenOnce(Lv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ca.NO_ERROR:const p=u.getResponseJson();G(st,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),a(p);break;case ca.TIMEOUT:G(st,`RPC '${e}' ${i} timed out`),l(new W(j.DEADLINE_EXCEEDED,"Request time out"));break;case ca.HTTP_ERROR:const y=u.getStatus();if(G(st,`RPC '${e}' ${i} failed with status:`,y,"response text:",u.getResponseText()),y>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const P=v==null?void 0:v.error;if(P&&P.status&&P.message){const k=function(b){const S=b.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(S)>=0?S:j.UNKNOWN}(P.status);l(new W(k,P.message))}else l(new W(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(j.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{G(st,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);G(st,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Wo(e,n,r){const s=eh(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Uv(),l=Fv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");G(st,`Creating RPC '${e}' stream ${s}: ${p}`,u);const y=a.createWebChannel(p,u);let v=!1,P=!1;const k=new yS({Fo:b=>{P?G(st,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(v||(G(st,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),G(st,`RPC '${e}' stream ${s} sending:`,b),y.send(b))},Mo:()=>y.close()}),D=(b,S,T)=>{b.listen(S,A=>{try{T(A)}catch(N){setTimeout(()=>{throw N},0)}})};return D(y,fi.EventType.OPEN,()=>{P||(G(st,`RPC '${e}' stream ${s} transport opened.`),k.Qo())}),D(y,fi.EventType.CLOSE,()=>{P||(P=!0,G(st,`RPC '${e}' stream ${s} transport closed`),k.Uo())}),D(y,fi.EventType.ERROR,b=>{P||(P=!0,xs(st,`RPC '${e}' stream ${s} transport errored:`,b),k.Uo(new W(j.UNAVAILABLE,"The operation could not be completed")))}),D(y,fi.EventType.MESSAGE,b=>{var S;if(!P){const T=b.data[0];me(!!T);const A=T,N=(A==null?void 0:A.error)||((S=A[0])===null||S===void 0?void 0:S.error);if(N){G(st,`RPC '${e}' stream ${s} received error:`,N);const M=N.status;let O=function(E){const I=Me[E];if(I!==void 0)return v0(I)}(M),w=N.message;O===void 0&&(O=j.INTERNAL,w="Unknown error status: "+M+" with message "+N.message),P=!0,k.Uo(new W(O,w)),y.close()}else G(st,`RPC '${e}' stream ${s} received:`,T),k.Ko(T)}}),D(l,jv.STAT_EVENT,b=>{b.stat===Uc.PROXY?G(st,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Uc.NOPROXY&&G(st,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.$o()},0),k}}function ju(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){return new T2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=s,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="PersistentStream";class V0{constructor(e,n,r,s,i,a,l,u){this.Ti=e,this.n_=r,this.r_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new D0(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(In(n.toString()),In("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===n&&this.V_(r,s)},r=>{e(()=>{const s=new W(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return G($m,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(G($m,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _S extends V0{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=I2(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?un(a.readTime):Z.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=Jc(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=Gc(u)?{documents:C2(i,u)}:{query:k2(i,u).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=E0(i,a.resumeToken);const h=Qc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=Xa(i,a.snapshotVersion.toTimestamp());const h=Qc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=N2(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=Jc(this.serializer),n.removeTarget=e,this.I_(n)}}class wS extends V0{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=P2(e.writeResults,e.commitTime),r=un(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=Jc(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>A2(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{}class TS extends ES{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new W(j.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.So(e,Kc(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(j.UNKNOWN,i.toString())})}Co(e,n,r,s,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(e,Kc(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new W(j.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class xS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(In(n),this.N_=!1):G("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="RemoteStore";class SS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(a=>{r.enqueueAndForget(async()=>{Or(this)&&(G(Dr,"Restarting streams for network reachability change."),await async function(u){const h=ee(u);h.W_.add(4),await lo(h),h.j_.set("Unknown"),h.W_.delete(4),await kl(h)}(this))})}),this.j_=new xS(r,s)}}async function kl(t){if(Or(t))for(const e of t.G_)await e(!0)}async function lo(t){for(const e of t.G_)await e(!1)}function b0(t,e){const n=ee(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Td(n)?Ed(n):js(n).c_()&&wd(n,e))}function _d(t,e){const n=ee(t),r=js(n);n.K_.delete(e),r.c_()&&M0(n,e),n.K_.size===0&&(r.c_()?r.P_():Or(n)&&n.j_.set("Unknown"))}function wd(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}js(t).y_(e)}function M0(t,e){t.H_.Ne(e),js(t).w_(e)}function Ed(t){t.H_=new v2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),js(t).start(),t.j_.B_()}function Td(t){return Or(t)&&!js(t).u_()&&t.K_.size>0}function Or(t){return ee(t).W_.size===0}function O0(t){t.H_=void 0}async function IS(t){t.j_.set("Online")}async function AS(t){t.K_.forEach((e,n)=>{wd(t,e)})}async function PS(t,e){O0(t),Td(t)?(t.j_.q_(e),Ed(t)):t.j_.set("Unknown")}async function CS(t,e,n){if(t.j_.set("Online"),e instanceof w0&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.K_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.K_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(r){G(Dr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Za(t,r)}else if(e instanceof pa?t.H_.We(e):e instanceof _0?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Z.min()))try{const r=await N0(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.H_.ot(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.K_.get(h);p&&i.K_.set(h,p.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const p=i.K_.get(u);if(!p)return;i.K_.set(u,p.withResumeToken(Je.EMPTY_BYTE_STRING,p.snapshotVersion)),M0(i,u);const y=new Un(p.target,u,h,p.sequenceNumber);wd(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G(Dr,"Failed to raise snapshot:",r),await Za(t,r)}}async function Za(t,e,n){if(!Ls(e))throw e;t.W_.add(1),await lo(t),t.j_.set("Offline"),n||(n=()=>N0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(Dr,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await kl(t)})}function L0(t,e){return e().catch(n=>Za(t,n,e))}async function Rl(t){const e=ee(t),n=or(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:id;for(;kS(e);)try{const s=await cS(e.localStore,r);if(s===null){e.U_.length===0&&n.P_();break}r=s.batchId,RS(e,s)}catch(s){await Za(e,s)}j0(e)&&F0(e)}function kS(t){return Or(t)&&t.U_.length<10}function RS(t,e){t.U_.push(e);const n=or(t);n.c_()&&n.S_&&n.b_(e.mutations)}function j0(t){return Or(t)&&!or(t).u_()&&t.U_.length>0}function F0(t){or(t).start()}async function NS(t){or(t).C_()}async function DS(t){const e=or(t);for(const n of t.U_)e.b_(n.mutations)}async function VS(t,e,n){const r=t.U_.shift(),s=dd.from(r,e,n);await L0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Rl(t)}async function bS(t,e){e&&or(t).S_&&await async function(r,s){if(function(a){return g2(a)&&a!==j.ABORTED}(s.code)){const i=r.U_.shift();or(r).h_(),await L0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Rl(r)}}(t,e),j0(t)&&F0(t)}async function qm(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),G(Dr,"RemoteStore received new credentials");const r=Or(n);n.W_.add(3),await lo(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await kl(n)}async function MS(t,e){const n=ee(t);e?(n.W_.delete(2),await kl(n)):e||(n.W_.add(2),await lo(n),n.j_.set("Unknown"))}function js(t){return t.J_||(t.J_=function(n,r,s){const i=ee(n);return i.M_(),new _S(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:IS.bind(null,t),No:AS.bind(null,t),Lo:PS.bind(null,t),p_:CS.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),Td(t)?Ed(t):t.j_.set("Unknown")):(await t.J_.stop(),O0(t))})),t.J_}function or(t){return t.Y_||(t.Y_=function(n,r,s){const i=ee(n);return i.M_(),new wS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:NS.bind(null,t),Lo:bS.bind(null,t),D_:DS.bind(null,t),v_:VS.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Rl(t)):(await t.Y_.stop(),t.U_.length>0&&(G(Dr,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new xd(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sd(t,e){if(In("AsyncQueue",`${e}: ${t}`),Ls(t))return new W(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{static emptySet(e){return new ps(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=pi(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ps)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ps;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(){this.Z_=new ke(K.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):J():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ks{constructor(e,n,r,s,i,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ks(e,n,ps.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class LS{constructor(){this.queries=Gm(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const s=ee(n),i=s.queries;s.queries=Gm(),i.forEach((a,l)=>{for(const u of l.ta)u.onError(r)})})(this,new W(j.ABORTED,"Firestore shutting down"))}}function Gm(){return new Mr(t=>o0(t),xl)}async function Id(t,e){const n=ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.na()&&e.ra()&&(r=2):(i=new OS,r=e.ra()?0:1);try{switch(r){case 0:i.ea=await n.onListen(s,!0);break;case 1:i.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Sd(a,`Initialization of query '${Gr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ta.push(e),e.sa(n.onlineState),i.ea&&e.oa(i.ea)&&Pd(n)}async function Ad(t,e){const n=ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.ta.indexOf(e);a>=0&&(i.ta.splice(a,1),i.ta.length===0?s=e.ra()?0:1:!i.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jS(t,e){const n=ee(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.ta)l.oa(s)&&(r=!0);a.ea=s}}r&&Pd(n)}function FS(t,e,n){const r=ee(t),s=r.queries.get(e);if(s)for(const i of s.ta)i.onError(n);r.queries.delete(e)}function Pd(t){t.ia.forEach(e=>{e.next()})}var th,Hm;(Hm=th||(th={}))._a="default",Hm.Cache="cache";class Cd{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ks(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=ks.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==th.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e){this.key=e}}class B0{constructor(e){this.key=e}}class US{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=oe(),this.mutatedKeys=oe(),this.ya=a0(e),this.wa=new ps(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new Ym,s=n?n.wa:this.wa;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,y)=>{const v=s.get(p),P=Sl(this.query,y)?y:null,k=!!v&&this.mutatedKeys.has(v.key),D=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let b=!1;v&&P?v.data.isEqual(P.data)?k!==D&&(r.track({type:3,doc:P}),b=!0):this.va(v,P)||(r.track({type:2,doc:P}),b=!0,(u&&this.ya(P,u)>0||h&&this.ya(P,h)<0)&&(l=!0)):!v&&P?(r.track({type:0,doc:P}),b=!0):v&&!P&&(r.track({type:1,doc:v}),b=!0,(u||h)&&(l=!0)),b&&(P?(a=a.add(P),i=D?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{wa:a,Da:r,ls:l,mutatedKeys:i}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort((p,y)=>function(P,k){const D=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return D(P)-D(k)}(p.type,y.type)||this.ya(p.doc,y.doc)),this.Ca(r),s=s!=null&&s;const l=n&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,h=u!==this.ga;return this.ga=u,a.length!==0||h?{snapshot:new ks(this.query,e.wa,i,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Ym,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=oe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new B0(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new U0(r))}),n}Oa(e){this.fa=e.gs,this.pa=oe();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return ks.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const kd="SyncEngine";class BS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zS{constructor(e){this.key=e,this.Ba=!1}}class $S{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Mr(l=>o0(l),xl),this.qa=new Map,this.Qa=new Set,this.$a=new ke(K.comparator),this.Ua=new Map,this.Ka=new md,this.Wa={},this.Ga=new Map,this.za=Cs.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function qS(t,e,n=!0){const r=H0(t);let s;const i=r.ka.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Na()):s=await z0(r,e,n,!0),s}async function YS(t,e){const n=H0(t);await z0(n,e,!0,!1)}async function z0(t,e,n,r){const s=await hS(t.localStore,ln(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await GS(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&b0(t.remoteStore,s),l}async function GS(t,e,n,r,s){t.Ha=(y,v,P)=>async function(D,b,S,T){let A=b.view.ba(S);A.ls&&(A=await Fm(D.localStore,b.query,!1).then(({documents:w})=>b.view.ba(w,A)));const N=T&&T.targetChanges.get(b.targetId),M=T&&T.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(A,D.isPrimaryClient,N,M);return Qm(D,b.targetId,O.Ma),O.snapshot}(t,y,v,P);const i=await Fm(t.localStore,e,!0),a=new US(e,i.gs),l=a.ba(i.documents),u=ao.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,u);Qm(t,n,h.Ma);const p=new BS(e,n,a);return t.ka.set(e,p),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),h.snapshot}async function HS(t,e,n){const r=ee(t),s=r.ka.get(e),i=r.qa.get(s.targetId);if(i.length>1)return r.qa.set(s.targetId,i.filter(a=>!xl(a,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_d(r.remoteStore,s.targetId),nh(r,s.targetId)}).catch(Os)):(nh(r,s.targetId),await Zc(r.localStore,s.targetId,!0))}async function WS(t,e){const n=ee(t),r=n.ka.get(e),s=n.qa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_d(n.remoteStore,r.targetId))}async function QS(t,e,n){const r=nI(t);try{const s=await function(a,l){const u=ee(a),h=Be.now(),p=l.reduce((P,k)=>P.add(k.key),oe());let y,v;return u.persistence.runTransaction("Locally write mutations","readwrite",P=>{let k=An(),D=oe();return u.ds.getEntries(P,p).next(b=>{k=b,k.forEach((S,T)=>{T.isValidDocument()||(D=D.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(P,k)).next(b=>{y=b;const S=[];for(const T of l){const A=h2(T,y.get(T.key).overlayedDocument);A!=null&&S.push(new dr(T.key,A,Jv(A.value.mapValue),Ft.exists(!0)))}return u.mutationQueue.addMutationBatch(P,h,S,l)}).next(b=>{v=b;const S=b.applyToLocalDocumentSet(y,D);return u.documentOverlayCache.saveOverlays(P,b.batchId,S)})}).then(()=>({batchId:v.batchId,changes:u0(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Wa[a.currentUser.toKey()];h||(h=new ke(ie)),h=h.insert(l,u),a.Wa[a.currentUser.toKey()]=h}(r,s.batchId,n),await uo(r,s.changes),await Rl(r.remoteStore)}catch(s){const i=Sd(s,"Failed to persist write");n.reject(i)}}async function $0(t,e){const n=ee(t);try{const r=await lS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Ua.get(i);a&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Ba=!0:s.modifiedDocuments.size>0?me(a.Ba):s.removedDocuments.size>0&&(me(a.Ba),a.Ba=!1))}),await uo(n,r,e)}catch(r){await Os(r)}}function Wm(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ka.forEach((i,a)=>{const l=a.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ee(a);u.onlineState=l;let h=!1;u.queries.forEach((p,y)=>{for(const v of y.ta)v.sa(l)&&(h=!0)}),h&&Pd(u)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KS(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ua.get(e),i=s&&s.key;if(i){let a=new ke(K.comparator);a=a.insert(i,at.newNoDocument(i,Z.min()));const l=oe().add(i),u=new Pl(Z.min(),new Map,new ke(ie),a,l);await $0(r,u),r.$a=r.$a.remove(i),r.Ua.delete(e),Rd(r)}else await Zc(r.localStore,e,!1).then(()=>nh(r,e,n)).catch(Os)}async function XS(t,e){const n=ee(t),r=e.batch.batchId;try{const s=await aS(n.localStore,e);Y0(n,r,null),q0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uo(n,s)}catch(s){await Os(s)}}async function JS(t,e,n){const r=ee(t);try{const s=await function(a,l){const u=ee(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(y=>(me(y!==null),p=y.keys(),u.mutationQueue.removeMutationBatch(h,y))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);Y0(r,e,n),q0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await uo(r,s)}catch(s){await Os(s)}}function q0(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function Y0(t,e,n){const r=ee(t);let s=r.Wa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function nh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||G0(t,r)})}function G0(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(_d(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),Rd(t))}function Qm(t,e,n){for(const r of n)r instanceof U0?(t.Ka.addReference(r.key,e),ZS(t,r)):r instanceof B0?(G(kd,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||G0(t,r.key)):J()}function ZS(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(G(kd,"New document in limbo: "+n),t.Qa.add(r),Rd(t))}function Rd(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new K(Te.fromString(e)),r=t.za.next();t.Ua.set(r,new zS(n)),t.$a=t.$a.insert(n,r),b0(t.remoteStore,new Un(ln(Tl(n.path)),r,"TargetPurposeLimboResolution",_l.ae))}}async function uo(t,e,n){const r=ee(t),s=[],i=[],a=[];r.ka.isEmpty()||(r.ka.forEach((l,u)=>{a.push(r.Ha(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const y=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(h){s.push(h);const y=yd.Yi(u.targetId,h);i.push(y)}}))}),await Promise.all(a),r.La.p_(s),await async function(u,h){const p=ee(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>L.forEach(h,v=>L.forEach(v.Hi,P=>p.persistence.referenceDelegate.addReference(y,v.targetId,P)).next(()=>L.forEach(v.Ji,P=>p.persistence.referenceDelegate.removeReference(y,v.targetId,P)))))}catch(y){if(!Ls(y))throw y;G(vd,"Failed to update sequence numbers: "+y)}for(const y of h){const v=y.targetId;if(!y.fromCache){const P=p.Ts.get(v),k=P.snapshotVersion,D=P.withLastLimboFreeSnapshotVersion(k);p.Ts=p.Ts.insert(v,D)}}}(r.localStore,i))}async function eI(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){G(kd,"User change. New user:",e.toKey());const r=await R0(n.localStore,e);n.currentUser=e,function(i,a){i.Ga.forEach(l=>{l.forEach(u=>{u.reject(new W(j.CANCELLED,a))})}),i.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uo(n,r.Rs)}}function tI(t,e){const n=ee(t),r=n.Ua.get(e);if(r&&r.Ba)return oe().add(r.key);{let s=oe();const i=n.qa.get(e);if(!i)return s;for(const a of i){const l=n.ka.get(a);s=s.unionWith(l.view.Sa)}return s}}function H0(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KS.bind(null,e),e.La.p_=jS.bind(null,e.eventManager),e.La.Ja=FS.bind(null,e.eventManager),e}function nI(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JS.bind(null,e),e}class el{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cl(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return oS(this.persistence,new rS,e.initialUser,this.serializer)}Xa(e){return new k0(gd.ri,this.serializer)}Za(e){return new fS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}el.provider={build:()=>new el};class rI extends el{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){me(this.persistence.referenceDelegate instanceof Ja);const r=this.persistence.referenceDelegate.garbageCollector;return new z2(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?vt.withCacheSize(this.cacheSizeBytes):vt.DEFAULT;return new k0(r=>Ja.ri(r,n),this.serializer)}}class rh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eI.bind(null,this.syncEngine),await MS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LS}()}createDatastore(e){const n=Cl(e.databaseInfo.databaseId),r=function(i){return new vS(i)}(e.databaseInfo);return function(i,a,l,u){return new TS(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new SS(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Wm(this.syncEngine,n,0),function(){return zm.D()?new zm:new pS}())}createSyncEngine(e,n){return function(s,i,a,l,u,h,p){const y=new $S(s,i,a,l,u,h);return p&&(y.ja=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ee(s);G(Dr,"RemoteStore shutting down."),i.W_.add(5),await lo(i),i.z_.shutdown(),i.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}rh.provider={build:()=>new rh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):In("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="FirestoreClient";class sI{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=it.UNAUTHENTICATED,this.clientId=zv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{G(ar,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(G(ar,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Sd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Fu(t,e){t.asyncQueue.verifyOperationInProgress(),G(ar,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await R0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Km(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iI(t);G(ar,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>qm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>qm(e.remoteStore,s)),t._onlineComponents=e}async function iI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(ar,"Using user provided OfflineComponentProvider");try{await Fu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;xs("Error using user provided cache. Falling back to memory cache: "+n),await Fu(t,new el)}}else G(ar,"Using default OfflineComponentProvider"),await Fu(t,new rI(void 0));return t._offlineComponents}async function W0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(ar,"Using user provided OnlineComponentProvider"),await Km(t,t._uninitializedComponentsProvider._online)):(G(ar,"Using default OnlineComponentProvider"),await Km(t,new rh))),t._onlineComponents}function oI(t){return W0(t).then(e=>e.syncEngine)}async function tl(t){const e=await W0(t),n=e.eventManager;return n.onListen=qS.bind(null,e.syncEngine),n.onUnlisten=HS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WS.bind(null,e.syncEngine),n}function aI(t,e,n={}){const r=new _n;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,h){const p=new Nd({next:v=>{p.su(),a.enqueueAndForget(()=>Ad(i,y));const P=v.docs.has(l);!P&&v.fromCache?h.reject(new W(j.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&v.fromCache&&u&&u.source==="server"?h.reject(new W(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),y=new Cd(Tl(l.path),p,{includeMetadataChanges:!0,Ta:!0});return Id(i,y)}(await tl(t),t.asyncQueue,e,n,r)),r.promise}function lI(t,e,n={}){const r=new _n;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,h){const p=new Nd({next:v=>{p.su(),a.enqueueAndForget(()=>Ad(i,y)),v.fromCache&&u.source==="server"?h.reject(new W(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),y=new Cd(l,p,{includeMetadataChanges:!0,Ta:!0});return Id(i,y)}(await tl(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t,e,n){if(!n)throw new W(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uI(t,e,n,r){if(e===!0&&r===!0)throw new W(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jm(t){if(!K.isDocumentKey(t))throw new W(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zm(t){if(K.isDocumentKey(t))throw new W(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function It(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nl(t);throw new W(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="firestore.googleapis.com",eg=!0;class tg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X0,this.ssl=eg}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:eg;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=C0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<U2)throw new W(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yx;switch(r.type){case"firstParty":return new Ex(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xm.get(n);r&&(G("ComponentProvider","Removing Datastore"),Xm.delete(n),r.terminate())}(this),Promise.resolve()}}function cI(t,e,n,r={}){var s;const i=(t=It(t,Dl))._getSettings(),a=`${e}:${n}`;if(i.host!==X0&&i.host!==a&&xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=it.MOCK_USER;else{l=WT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new W(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new it(h)}t._authCredentials=new vx(new Bv(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lr(this.firestore,e,this._query)}}class lt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lt(this.firestore,e,this._key)}}class Jn extends Lr{constructor(e,n,r){super(e,n,Tl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new K(e))}withConverter(e){return new Jn(this.firestore,e,this._path)}}function Kt(t,e,...n){if(t=cn(t),K0("collection","path",e),t instanceof Dl){const r=Te.fromString(e,...n);return Zm(r),new Jn(t,null,r)}{if(!(t instanceof lt||t instanceof Jn))throw new W(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return Zm(r),new Jn(t.firestore,null,r)}}function ms(t,e,...n){if(t=cn(t),arguments.length===1&&(e=zv.newId()),K0("doc","path",e),t instanceof Dl){const r=Te.fromString(e,...n);return Jm(r),new lt(t,null,new K(r))}{if(!(t instanceof lt||t instanceof Jn))throw new W(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return Jm(r),new lt(t.firestore,t instanceof Jn?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="AsyncQueue";class rg{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new D0(this,"async_queue_retry"),this.Su=()=>{const r=ju();r&&G(ng,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=ju();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=ju();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new _n;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ls(e))throw e;G(ng,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw In("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=xd.createAndSchedule(this,e,n,r,i=>this.Fu(i));return this.fu.push(s),s}Du(){this.gu&&J()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function sg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Pn extends Dl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new rg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rg(e),this._firestoreClient=void 0,await e}}}function hI(t,e){const n=typeof t=="object"?t:sx(),r=typeof t=="string"?t:Ya,s=Z1(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=GT("firestore");i&&cI(s,...i)}return s}function Vl(t){if(t._terminated)throw new W(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||dI(t),t._firestoreClient}function dI(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,p){return new Mx(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Q0(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new sI(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rs(Je.fromBase64String(e))}catch(n){throw new W(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rs(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=/^__.*__$/;class pI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new oo(e,this.data,n,this.fieldTransforms)}}class J0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new dr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Z0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class Ol{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Ol(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return nl(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Z0(this.Lu)&&fI.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class mI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cl(e)}ju(e,n,r,s=!1){return new Ol({Lu:e,methodName:n,zu:r,path:Qe.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ll(t){const e=t._freezeSettings(),n=Cl(t._databaseId);return new mI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function e_(t,e,n,r,s,i={}){const a=t.ju(i.merge||i.mergeFields?2:0,e,n,s);Md("Data must be an object, but it was:",a,r);const l=t_(r,a);let u,h;if(i.merge)u=new kt(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const y of i.mergeFields){const v=sh(e,y,n);if(!a.contains(v))throw new W(j.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);r_(p,v)||p.push(v)}u=new kt(p),h=a.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,h=a.fieldTransforms;return new pI(new wt(l),u,h)}class jl extends Ml{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jl}}function gI(t,e,n){return new Ol({Lu:3,zu:e.settings.zu,methodName:t._methodName,Qu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class bd extends Ml{constructor(e,n){super(e),this.Hu=n}_toFieldTransform(e){const n=gI(this,e,!0),r=this.Hu.map(i=>Fs(i,n)),s=new Ps(r);return new a2(e.path,s)}isEqual(e){return e instanceof bd&&Ba(this.Hu,e.Hu)}}function yI(t,e,n,r){const s=t.ju(1,e,n);Md("Data must be an object, but it was:",s,r);const i=[],a=wt.empty();hr(r,(u,h)=>{const p=Od(e,u,n);h=cn(h);const y=s.Uu(p);if(h instanceof jl)i.push(p);else{const v=Fs(h,y);v!=null&&(i.push(p),a.set(p,v))}});const l=new kt(i);return new J0(a,l,s.fieldTransforms)}function vI(t,e,n,r,s,i){const a=t.ju(1,e,n),l=[sh(e,r,n)],u=[s];if(i.length%2!=0)throw new W(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)l.push(sh(e,i[v])),u.push(i[v+1]);const h=[],p=wt.empty();for(let v=l.length-1;v>=0;--v)if(!r_(h,l[v])){const P=l[v];let k=u[v];k=cn(k);const D=a.Uu(P);if(k instanceof jl)h.push(P);else{const b=Fs(k,D);b!=null&&(h.push(P),p.set(P,b))}}const y=new kt(h);return new J0(p,y,a.fieldTransforms)}function _I(t,e,n,r=!1){return Fs(n,t.ju(r?4:3,e))}function Fs(t,e){if(n_(t=cn(t)))return Md("Unsupported field value:",e,t),t_(t,e);if(t instanceof Ml)return function(r,s){if(!Z0(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=Fs(l,s.Ku(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Be.fromDate(r);return{timestampValue:Xa(s.serializer,i)}}if(r instanceof Be){const i=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xa(s.serializer,i)}}if(r instanceof Dd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rs)return{bytesValue:E0(s.serializer,r._byteString)};if(r instanceof lt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Vd)return function(a,l){return{mapValue:{fields:{[Kv]:{stringValue:Xv},[Ga]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Wu("VectorValues must only contain numeric values.");return cd(l.serializer,h)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${Nl(r)}`)}(t,e)}function t_(t,e){const n={};return qv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hr(t,(r,s)=>{const i=Fs(s,e.qu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function n_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof Dd||t instanceof Rs||t instanceof lt||t instanceof Ml||t instanceof Vd)}function Md(t,e,n){if(!n_(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Nl(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function sh(t,e,n){if((e=cn(e))instanceof bl)return e._internalPath;if(typeof e=="string")return Od(t,e);throw nl("Field path arguments must be of type string or ",t,!1,void 0,n)}const wI=new RegExp("[~\\*/\\[\\]]");function Od(t,e,n){if(e.search(wI)>=0)throw nl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bl(...e.split("."))._internalPath}catch{throw nl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nl(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new W(j.INVALID_ARGUMENT,l+t+u)}function r_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ld("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EI extends s_{data(){return super.data()}}function Ld(t,e){return typeof e=="string"?Od(t,e):e instanceof bl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jd{}class TI extends jd{}function Fd(t,e,...n){let r=[];e instanceof jd&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof Ud).length,l=i.filter(u=>u instanceof Fl).length;if(a>1||a>0&&l>0)throw new W(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Fl extends TI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fl(e,n,r)}_apply(e){const n=this._parse(e);return o_(e._query,n),new Lr(e.firestore,e.converter,Hc(e._query,n))}_parse(e){const n=Ll(e.firestore);return function(i,a,l,u,h,p,y){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new W(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){og(y,p);const k=[];for(const D of y)k.push(ig(u,i,D));v={arrayValue:{values:k}}}else v=ig(u,i,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||og(y,p),v=_I(l,a,y,p==="in"||p==="not-in");return Le.create(h,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Uu(t,e,n){const r=e,s=Ld("where",t);return Fl._create(s,r,n)}class Ud extends jd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ud(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Jt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)o_(a,u),a=Hc(a,u)}(e._query,n),new Lr(e.firestore,e.converter,Hc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ig(t,e,n){if(typeof(n=cn(n))=="string"){if(n==="")throw new W(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i0(e)&&n.indexOf("/")!==-1)throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!K.isDocumentKey(r))throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wm(t,new K(r))}if(n instanceof lt)return wm(t,n._key);throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nl(n)}.`)}function og(t,e){if(!Array.isArray(t)||t.length===0)throw new W(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function o_(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xI{convertValue(e,n="none"){switch(ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Ga].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>De(a.doubleValue));return new Vd(i)}convertGeoPoint(e){return new Dd(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=El(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ki(e));default:return null}}convertTimestamp(e){const n=rr(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);me(P0(r));const s=new Xi(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||In(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class l_ extends s_{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ma(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ld("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ma extends l_{data(e={}){return super.data(e)}}class u_{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new gi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ma(this._firestore,this._userDataWriter,r.key,r,new gi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new ma(s._firestore,s._userDataWriter,l.doc.key,l.doc,new gi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new ma(s._firestore,s._userDataWriter,l.doc.key,l.doc,new gi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:SI(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function SI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t){t=It(t,lt);const e=It(t.firestore,Pn);return aI(Vl(e),t._key).then(n=>c_(e,t,n))}class Bd extends xI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}}function AI(t){t=It(t,Lr);const e=It(t.firestore,Pn),n=Vl(e),r=new Bd(e);return i_(t._query),lI(n,t._query).then(s=>new u_(e,r,t,s))}function PI(t,e,n){t=It(t,lt);const r=It(t.firestore,Pn),s=a_(t.converter,e,n);return Ul(r,[e_(Ll(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ft.none())])}function CI(t,e,n,...r){t=It(t,lt);const s=It(t.firestore,Pn),i=Ll(s);let a;return a=typeof(e=cn(e))=="string"||e instanceof bl?vI(i,"updateDoc",t._key,e,n,r):yI(i,"updateDoc",t._key,e),Ul(s,[a.toMutation(t._key,Ft.exists(!0))])}function ag(t){return Ul(It(t.firestore,Pn),[new hd(t._key,Ft.none())])}function kI(t,e){const n=It(t.firestore,Pn),r=ms(t),s=a_(t.converter,e);return Ul(n,[e_(Ll(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ft.exists(!1))]).then(()=>r)}function Zn(t,...e){var n,r,s;t=cn(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||sg(e[a])||(i=e[a],a++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(sg(e[a])){const y=e[a];e[a]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let u,h,p;if(t instanceof lt)h=It(t.firestore,Pn),p=Tl(t._key.path),u={next:y=>{e[a]&&e[a](c_(h,t,y))},error:e[a+1],complete:e[a+2]};else{const y=It(t,Lr);h=It(y.firestore,Pn),p=y._query;const v=new Bd(h);u={next:P=>{e[a]&&e[a](new u_(h,v,y,P))},error:e[a+1],complete:e[a+2]},i_(t._query)}return function(v,P,k,D){const b=new Nd(D),S=new Cd(P,b,k);return v.asyncQueue.enqueueAndForget(async()=>Id(await tl(v),S)),()=>{b.su(),v.asyncQueue.enqueueAndForget(async()=>Ad(await tl(v),S))}}(Vl(h),p,l,u)}function Ul(t,e){return function(r,s){const i=new _n;return r.asyncQueue.enqueueAndForget(async()=>QS(await oI(r),s,i)),i.promise}(Vl(t),e)}function c_(t,e,n){const r=n.docs.get(e._key),s=new Bd(t);return new l_(t,s,e._key,r,new gi(n.hasPendingWrites,n.fromCache),e.converter)}function RI(...t){return new bd("arrayUnion",t)}(function(e,n=!0){(function(s){Ms=s})(rx),$a(new Hi("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Pn(new _x(r.getProvider("auth-internal")),new Tx(a,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new W(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xi(h.options.projectId,p)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),fs(um,cm,e),fs(um,cm,"esm2017")})();const NI={apiKey:"AIzaSyCBZLT3rgxVorNPu5iKdGDV4QL1JBKidZA",authDomain:"investment-dashboard-77e78.firebaseapp.com",projectId:"investment-dashboard-77e78",storageBucket:"investment-dashboard-77e78.firebasestorage.app",messagingSenderId:"412792088409",appId:"1:412792088409:web:cf4317d151df3211d64e48"},DI=Dv(NI),ft=hI(DI),zd={YMAG:{frequency:"weekly",history:{2025:{1:.16,2:.19,3:"TBD",4:.19,5:.19,6:.19,7:.19,8:.19}}},YMAX:{frequency:"weekly",history:{2025:{1:.15,2:.19,3:"TBD"}}},LFGY:{frequency:"weekly",history:{2025:{1:.69,2:.69,3:"TBD"}}},GPTY:{frequency:"weekly",history:{2025:{1:"TBD",2:.34,3:"TBD"}}},TSLY:{frequency:"13x",history:{2025:{1:.72,2:"TBD"}}},GOOY:{frequency:"13x",history:{2025:{1:.33,2:"TBD"}}},YBIT:{frequency:"13x",history:{2025:{1:.79,2:"TBD"}}},OARK:{frequency:"13x",history:{2025:{1:.33,2:"TBD"}}},XOMO:{frequency:"13x",history:{2025:{1:.35,2:"TBD"}}},TSMY:{frequency:"13x",history:{2025:{1:.65,2:"TBD"}}},CRSH:{frequency:"13x",history:{2025:{1:.29,2:"TBD"}}},FIVY:{frequency:"13x",history:{2025:{1:1.68,2:"TBD"}}},FEAT:{frequency:"13x",history:{2025:{1:2.2,2:"TBD"}}},NVDY:{frequency:"13x",history:{2025:{1:.87,2:"TBD"}}},FBY:{frequency:"13x",history:{2025:{1:.54,2:"TBD"}}},GDXY:{frequency:"13x",history:{2025:{1:.48,2:"TBD"}}},JPMO:{frequency:"13x",history:{2025:{1:.5,2:"TBD"}}},MRNY:{frequency:"13x",history:{2025:{1:.26,2:"TBD"}}},MARO:{frequency:"13x",history:{2025:{1:2.3,2:"TBD"}}},PLTY:{frequency:"13x",history:{2025:{1:1.68,2:"TBD"}}},CONY:{frequency:"monthly",history:{2025:{1:.83,2:1.05}}},MSFO:{frequency:"monthly",history:{2025:{1:.37,2:.36}}},AMDY:{frequency:"monthly",history:{2025:{1:.34,2:.38}}},NFLY:{frequency:"monthly",history:{2025:{1:.58,2:1.07}}},PYPY:{frequency:"monthly",history:{2025:{1:.43,2:.67}}},ULTY:{frequency:"monthly",history:{2025:{1:.57,2:.54}}},ABNY:{frequency:"monthly",history:{2025:{1:.42,2:.4}}},MSTY:{frequency:"monthly",history:{2025:{1:2.28,2:"TBD"}}},AMZY:{frequency:"monthly",history:{2025:{1:.4,2:"TBD"}}},APLY:{frequency:"monthly",history:{2025:{1:.28,2:"TBD"}}},DISO:{frequency:"monthly",history:{2025:{1:.28,2:"TBD"}}},SQY:{frequency:"monthly",history:{2025:{1:.63,2:"TBD"}}},SMCY:{frequency:"monthly",history:{2025:{1:1.72,2:"TBD"}}},AIYY:{frequency:"monthly",history:{2025:{1:.38,2:"TBD"}}}},Xo=async(t,e,n)=>{try{const r=Kt(ft,"distributions"),s=Fd(r,Uu("ticker","==",t),Uu("year","==",e),Uu("month","==",n)),i=await AI(s);return i.empty?0:i.docs[0].data().amount}catch(r){return console.error(`Error getting distribution for ${t}:`,r),0}},lg=Object.entries(zd).map(([t,e])=>({ticker:t,frequency:e.frequency,group:VI(e.frequency),name:bI(t)}));function VI(t){switch(t){case"weekly":return"WEEKLY";case"13x":return t.includes("A")?"GROUP_A":"GROUP_B";case"monthly":return t.includes("C")?"GROUP_C":"GROUP_D";default:return""}}function bI(t){return{YMAG:"YieldMax AAPL Option Income Strategy ETF",YMAX:"YieldMax TSLA Option Income Strategy ETF",LFGY:"Leverage Shares FAANG+ ETF",GPTY:"Growth Property Trust ETF",TSLY:"YieldMax TSLA Option Income Strategy ETF"}[t]||`${t} ETF`}const h_=({onClose:t})=>{const[e,n]=Q.useState({ticker:"",totalShares:"",group:"",purchaseDate:new Date().toISOString().split("T")[0]}),r=lg.reduce((a,l)=>{const u=l.group;return a[u]||(a[u]=[]),a[u].push(l),a},{}),s=async a=>{a.preventDefault();try{const l=Kt(ft,"etfs"),u=Number(e.totalShares);if(isNaN(u))throw new Error("Shares must be a valid number");await kI(l,{...e,totalShares:u,createdAt:new Date,ticker:e.ticker.toUpperCase(),purchases:[{date:e.purchaseDate,shares:u,price:0}]}),t()}catch(l){console.error("Error adding ETF:",l),alert("Failed to add ETF: "+l.message)}},i=a=>{const{name:l,value:u}=a.target;if(l==="ticker"){const h=lg.find(p=>p.ticker===u);n(p=>({...p,ticker:u,group:h?h.group:p.group}))}else n(h=>({...h,[l]:u}))};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Add ETF"}),f.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:f.jsx(td,{className:"w-6 h-6"})})]}),f.jsxs("form",{onSubmit:s,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select ETF"}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{name:"ticker",value:e.ticker,onChange:i,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none",children:[f.jsx("option",{value:"",children:"Select an ETF"}),Object.entries(r).map(([a,l])=>f.jsx("optgroup",{label:a.replace("_"," "),children:l.map(u=>f.jsxs("option",{value:u.ticker,children:[u.ticker," (",u.frequency,")"]},u.ticker))},a))]}),f.jsx(xT,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Shares"}),f.jsx("input",{type:"number",name:"totalShares",value:e.totalShares,onChange:i,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter number of shares"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Date"}),f.jsx("input",{type:"date",name:"purchaseDate",value:e.purchaseDate,onChange:i,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),f.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[f.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:"Cancel"}),f.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:"Add ETF"})]})]})]})})},MI=({message:t,type:e="success",onClose:n})=>(Q.useEffect(()=>{const r=setTimeout(()=>{n()},3e3);return()=>clearTimeout(r)},[n]),f.jsx("div",{className:"fixed top-4 right-4 w-96 z-50",children:f.jsx("div",{className:`
        ${e==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}
        p-4 rounded-lg shadow-lg border
        ${e==="success"?"border-green-200":"border-red-200"}
        transform transition-all duration-500 ease-in-out translate-x-0
        hover:scale-105
      `,children:f.jsxs("div",{className:"flex items-start",children:[f.jsx("div",{className:"flex-shrink-0",children:e==="success"?f.jsx(TT,{className:"h-5 w-5 text-green-400"}):f.jsx(OT,{className:"h-5 w-5 text-red-400"})}),f.jsx("div",{className:"ml-3 w-full",children:f.jsx("p",{className:"text-sm font-medium",children:t})}),f.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:f.jsx("button",{onClick:n,className:"inline-flex text-gray-400 hover:text-gray-500",children:f.jsx(td,{className:"h-5 w-5"})})})]})})})),OI={WEEKLY:["YMAG","YMAX","LFGY","GPTY"],GROUP_A:["TSLY","GOOY","YBIT","OARK","XOMO","TSMY","CRSH","FIVY","FEAT"],GROUP_B:["NVDY","FBY","GDXY","JPMO","MRNY","MARO","PLTY"],GROUP_C:["CONY","MSFO","AMDY","NFLY","PYPY","ULTY","ABNY"],GROUP_D:["MSTY","AMZY","APLY","DISO","SQY","SMCY","AIYY"]},le=t=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(n=>({month:n,amount:+(t+(Math.random()*.06-.03)).toFixed(2)})),ih={YMAG:le(.26),YMAX:le(.26),LFGY:le(.26),GPTY:le(.26),TSLY:le(.85),GOOY:le(.95),YBIT:le(.88),OARK:le(.92),XOMO:le(.83),TSMY:le(.9),CRSH:le(.87),FIVY:le(.89),FEAT:le(.91),NVDY:le(.86),FBY:le(.84),GDXY:le(.88),JPMO:le(.85),MRNY:le(.93),MARO:le(.94),PLTY:le(.94),CONY:le(.94),MSFO:le(.94),AMDY:le(.94),NFLY:le(.94),PYPY:le(.94),ULTY:le(.94),ABNY:le(.94),MSTY:le(.94),AMZY:le(.94),APLY:le(.94),DISO:le(.94),SQY:le(.94),SMCY:le(.94),AIYY:le(.94)},LI=t=>{for(const[e,n]of Object.entries(OI))if(n.includes(t))return e;return"UNKNOWN"},jI=t=>{const n=new Date().toLocaleString("default",{month:"short"}),r=ih[t];return r?r.find(i=>new Date(`${i.month} 1, 2024`)>new Date(`${n} 1, 2024`))||r[0]:null},d_=Q.createContext(),FI=({children:t})=>{const[e,n]=Q.useState([]),[r,s]=Q.useState([]),[i,a]=Q.useState(!0),[l,u]=Q.useState(null);Q.useEffect(()=>{try{const S=Kt(ft,"etfs"),T=Fd(S),A=Zn(T,N=>{const M=N.docs.map(O=>({id:O.id,...O.data()}));console.log("Firebase ETFs:",M),n(M),a(!1)});return()=>A()}catch(S){console.error("Error fetching ETFs from Firebase:",S),u("Failed to fetch portfolio data"),a(!1)}},[]),Q.useEffect(()=>{try{const S=Kt(ft,"prices"),T=Zn(S,A=>{const N={};A.forEach(M=>{N[M.id]=M.data().currentPrice}),s(N)});return()=>T()}catch(S){console.error("Error fetching prices from Firebase:",S)}},[]);const h=()=>{const S=e.reduce((M,O)=>M+(O.totalShares||0)*(O.currentPrice||0),0),T=e.reduce((M,O)=>M+(O.totalShares||0)*(O.distribution||0),0),A=e.reduce((M,O)=>O.purchases&&O.purchases.length>0?M+O.purchases.reduce((w,g)=>w+Number(g.shares)*Number(g.price),0):M+(O.totalShares||0)*(O.costBasis||0),0),N=A>0?T*12/A*100:0;return{totalValue:S,monthlyIncome:T,totalCost:A,yieldRate:N}},p=async S=>{},y=async(S,T)=>{},v=async S=>{},P=async(S,T)=>{},k=Q.useMemo(()=>Object.keys(ih),[]),D=(S,T)=>{const A=ih[S];if(!A)return 0;const N=A.find(M=>M.month===T);return N?N.amount:0},b=S=>({group:LI(S),nextDividend:jI(S)});return i?f.jsx("div",{children:"Loading..."}):f.jsx(d_.Provider,{value:{etfs:e,prices:r,loading:i,error:l,stats:h(),addETF:p,updateETF:y,deleteETF:v,addPurchase:P,validTickers:k,getDividendAmount:D,getETFDetails:b},children:t})},f_=()=>{const t=Q.useContext(d_);if(!t)throw new Error("usePortfolio must be used within a PortfolioProvider");return t},p_=Q.createContext(),UI=["YMAG","YMAX","LFGY","GPTY"],BI=["TSLY","GOOY","YBIT","OARK","XOMO","TSMY","CRSH","FIVY","FEAT","NVDY","FBY","GDXY","JPMO","MRNY","MARO","PLTY","CONY","MSFO","AMDY","NFLY","PYPY","ULTY","ABNY","MSTY","AMZY","APLY","DISO","SQY","SMCY","AIYY"],zI=({children:t})=>{const[e,n]=Q.useState({}),[r,s]=Q.useState(!0);Q.useEffect(()=>{const l=Zn(Kt(ft,"distributions"),u=>{const h={};u.forEach(p=>{h[p.id]=p.data()}),n(h),s(!1)},u=>{console.error("Error fetching distributions:",u),s(!1)});return()=>l()},[]);const i=l=>UI.includes(l)?52:BI.includes(l)?13:12,a=l=>{const u=e[l];if(!(u!=null&&u.history))return"N/A";const h=Object.keys(u.history).sort().reverse();if(h.length===0)return"N/A";const p=h[0],y=Object.keys(u.history[p]).sort((k,D)=>D-k);if(y.length===0)return"N/A";const v=y[0],P=u.history[p][v];return P==="TBD"?"TBD":P};return f.jsx(p_.Provider,{value:{distributions:e,loading:r,getLatestDistribution:a,getPaymentsPerYear:i},children:t})},m_=()=>Q.useContext(p_),Bu={YMAG:{frequency:"weekly",group:"WEEKLY",name:"YieldMax AAPL Option Income Strategy ETF",inception:"2023-08-23"},YMAX:{frequency:"weekly",group:"WEEKLY",name:"YieldMax TSLA Option Income Strategy ETF",inception:"2023-07-24"},LFGY:{frequency:"weekly",group:"WEEKLY",name:"Leverage Shares FAANG & Growth ETP",inception:"2023-09-14"},GPTY:{frequency:"weekly",group:"WEEKLY",name:"Growth Property & Technology ETF",inception:"2023-10-02"},TSLY:{frequency:"13x",group:"GROUP_A",name:"YieldMax TSLA Option Income Strategy ETF",inception:"2023-07-24"},GOOY:{frequency:"13x",group:"GROUP_A",name:"YieldMax GOOGL Option Income Strategy ETF",inception:"2023-08-14"},YBIT:{frequency:"13x",group:"GROUP_A",name:"YieldMax Bitcoin Option Income Strategy ETF",inception:"2023-08-23"},OARK:{frequency:"13x",group:"GROUP_A",name:"YieldMax Innovation Option Income Strategy ETF",inception:"2023-08-30"},XOMO:{frequency:"13x",group:"GROUP_A",name:"YieldMax XOMOX Option Income Strategy ETF",inception:"2023-09-11"},TSMY:{frequency:"13x",group:"GROUP_A",name:"YieldMax TSMC Option Income Strategy ETF",inception:"2023-09-18"},CRSH:{frequency:"13x",group:"GROUP_A",name:"YieldMax Crushing It Option Income Strategy ETF",inception:"2023-09-25"},FIVY:{frequency:"13x",group:"GROUP_A",name:"YieldMax FIVE Option Income Strategy ETF",inception:"2023-10-02"},FEAT:{frequency:"13x",group:"GROUP_A",name:"YieldMax FEAT Option Income Strategy ETF",inception:"2023-10-09"},NVDY:{frequency:"13x",group:"GROUP_B",name:"YieldMax NVDA Option Income Strategy ETF",inception:"2023-10-16"},FBY:{frequency:"13x",group:"GROUP_B",name:"YieldMax META Option Income Strategy ETF",inception:"2023-10-23"},GDXY:{frequency:"13x",group:"GROUP_B",name:"YieldMax GDX Option Income Strategy ETF",inception:"2023-10-30"},JPMO:{frequency:"13x",group:"GROUP_B",name:"YieldMax JPM Option Income Strategy ETF",inception:"2023-11-06"},MRNY:{frequency:"13x",group:"GROUP_B",name:"YieldMax MRNA Option Income Strategy ETF",inception:"2023-11-13"},MARO:{frequency:"13x",group:"GROUP_B",name:"YieldMax MSTR Option Income Strategy ETF",inception:"2023-11-20"},PLTY:{frequency:"13x",group:"GROUP_B",name:"YieldMax PLTR Option Income Strategy ETF",inception:"2023-11-27"},CONY:{frequency:"monthly",group:"GROUP_C",name:"YieldMax COIN Option Income Strategy ETF",inception:"2023-12-04"},MSFO:{frequency:"monthly",group:"GROUP_C",name:"YieldMax MSFT Option Income Strategy ETF",inception:"2023-12-11"},AMDY:{frequency:"monthly",group:"GROUP_C",name:"YieldMax AMD Option Income Strategy ETF",inception:"2023-12-18"},NFLY:{frequency:"monthly",group:"GROUP_C",name:"YieldMax NFLX Option Income Strategy ETF",inception:"2023-12-26"},PYPY:{frequency:"monthly",group:"GROUP_C",name:"YieldMax PYPL Option Income Strategy ETF",inception:"2024-01-02"},ULTY:{frequency:"monthly",group:"GROUP_C",name:"YieldMax QQQ Option Income Strategy ETF",inception:"2024-01-08"},ABNY:{frequency:"monthly",group:"GROUP_C",name:"YieldMax ABNB Option Income Strategy ETF",inception:"2024-01-16"},MSTY:{frequency:"monthly",group:"GROUP_D",name:"YieldMax MSFT Option Income Strategy ETF",inception:"2024-01-22"},AMZY:{frequency:"monthly",group:"GROUP_D",name:"YieldMax AMZN Option Income Strategy ETF",inception:"2024-01-29"},APLY:{frequency:"monthly",group:"GROUP_D",name:"YieldMax AAPL Option Income Strategy ETF",inception:"2024-02-05"},DISO:{frequency:"monthly",group:"GROUP_D",name:"YieldMax DIS Option Income Strategy ETF",inception:"2024-02-12"},SQY:{frequency:"monthly",group:"GROUP_D",name:"YieldMax SQ Option Income Strategy ETF",inception:"2024-02-20"},SMCY:{frequency:"monthly",group:"GROUP_D",name:"YieldMax SMH Option Income Strategy ETF",inception:"2024-02-26"},AIYY:{frequency:"monthly",group:"GROUP_D",name:"YieldMax AI Option Income Strategy ETF",inception:"2024-03-04"}},$I={active:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200",hover:"hover:bg-green-50"},pending:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200",hover:"hover:bg-yellow-50"},suspended:{bg:"bg-red-100",text:"text-red-800",border:"border-red-200",hover:"hover:bg-red-50"}},ug=["WEEKLY","GROUP_A","GROUP_B","GROUP_C","GROUP_D"],qI=(t,e)=>!t||t==="TBD"||e==="TBD"?"pending":e==="N/A"?"suspended":"active",li=t=>t==null||isNaN(t)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t),oh=()=>{const{etfs:t=[],totalValue:e=0,totalShares:n=0}=f_()||{},{getLatestDistribution:r,getPaymentsPerYear:s,distributions:i={},loading:a}=m_()||{},[l,u]=Q.useState({}),[h,p]=Q.useState(!0),[y,v]=Q.useState({}),[P,k]=Q.useState({}),[D,b]=Q.useState({}),[S,T]=Q.useState({}),[A,N]=Q.useState({});Q.useEffect(()=>{console.log("Setting up price listener");const x=Zn(Kt(ft,"prices"),_=>{console.log("Received price update from Firestore");const te={};_.forEach(ne=>{const pe=ne.data();console.log(`Price for ${pe.ticker}:`,pe.currentPrice),te[pe.ticker]=pe.currentPrice}),console.log("Setting new prices:",te),u(te),p(!1)},_=>{console.error("Error fetching prices:",_),p(!1)});return()=>x()},[]);const M=async x=>{if(x){console.log(`Starting update for ${x}`),v(_=>({..._,[x]:!0})),k(_=>({..._,[x]:" Scraping price..."}));try{const _=await fetch("https://investment-dashboard-scraper.onrender.com/scrape-price",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticker:x})});if(!_.ok){const q=await _.json().catch(()=>({}));throw console.error("Server error details:",q),new Error(q.error||`Failed to scrape price for ${x}`)}const te=await _.json();console.log(`Received response for ${x}:`,te),await new Promise(q=>setTimeout(q,1e3));const ne=ms(ft,"prices",x);let pe=3,Ie;for(;pe>0;)try{Ie=await II(ne);break}catch(q){if(console.warn(`Retry ${4-pe} failed for ${x}:`,q),pe--,pe===0)throw q;await new Promise(X=>setTimeout(X,1e3))}if(!Ie.exists())throw new Error(`No price data found for ${x}`);const U=Ie.data().currentPrice;console.log(`Got fresh price for ${x}:`,U),u(q=>{const X={...q,[x]:U};return console.log("New prices state:",X),X}),k(q=>({...q,[x]:" Updated!"})),b(q=>({...q,[x]:new Date().toLocaleString()}))}catch(_){console.error(`Error updating ${x}:`,_),k(te=>({...te,[x]:" Failed to update"}))}finally{v(_=>({..._,[x]:!1}))}}},O=()=>!t||!Array.isArray(t)?0:t.reduce((x,_)=>{var U,q;const te=r((U=_==null?void 0:_.ticker)==null?void 0:U.toUpperCase());if(!te||te==="N/A"||te==="TBD")return x;const ne=s((q=_==null?void 0:_.ticker)==null?void 0:q.toUpperCase()),Ie=te*ne/12;return x+Ie*((_==null?void 0:_.shares)||0)},0),w=Object.entries(Bu).reduce((x,[_,te])=>{const{group:ne}=te;return x[ne]||(x[ne]=[]),x[ne].push({ticker:_,...te,currentPrice:l[_]||"TBD",distribution:r(_)||"TBD",...i[_]}),x},{});if(a||h)return f.jsx("div",{className:"text-center py-4",children:"Loading..."});const g=O(),E=x=>{var q;const _=qI(l[x.ticker],r(x.ticker)),te=$I[_],ne=t.find(X=>X.ticker===x.ticker&&X.totalShares>0),pe=!!ne,Ie=pe?"bg-blue-100 border-l-4 border-blue-500":"hover:bg-gray-50",U=l[x.ticker];return console.log(`Rendering ${x.ticker} with price:`,U),f.jsxs("tr",{className:`${Ie} transition-colors`,children:[f.jsx("td",{className:"px-4 py-3",children:f.jsx("div",{className:"flex items-center",children:f.jsx("span",{className:"font-medium text-gray-900",children:x.ticker})})}),f.jsx("td",{className:"px-4 py-3",children:f.jsx("span",{className:"text-gray-900",children:((q=Bu[x.ticker])==null?void 0:q.name)||""})}),f.jsx("td",{className:"px-4 py-3 text-right",children:f.jsxs("div",{className:"flex flex-col items-end",children:[f.jsx("span",{className:"font-medium text-gray-900",children:U?li(U):"Loading..."}),_[x.ticker]&&f.jsx("span",{className:"text-sm text-gray-500",children:_[x.ticker]})]})}),f.jsx("td",{className:"px-4 py-3 text-right",children:pe&&f.jsx("span",{className:"font-medium text-gray-900",children:ne.totalShares.toLocaleString()})}),f.jsx("td",{className:"px-4 py-3 text-right",children:pe&&f.jsx("span",{className:"font-medium text-gray-900",children:li(U*ne.totalShares)})}),f.jsx("td",{className:"px-4 py-3 text-right",children:f.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${te}`,children:_})})]},x.ticker)},I=async x=>{const _=Object.entries(Bu).filter(([ne,pe])=>pe.group===x).map(([ne])=>ne),te=_.length;N(ne=>({...ne,[x]:{current:0,total:te,currentTicker:_[0]}}));for(let ne=0;ne<_.length;ne++){const pe=_[ne];N(Ie=>({...Ie,[x]:{current:ne,total:te,currentTicker:pe}})),await M(pe),N(Ie=>({...Ie,[x]:{current:ne+1,total:te,currentTicker:ne<te-1?_[ne+1]:null}}))}k(ne=>({...ne,[x]:" Group updated!"})),setTimeout(()=>{k(ne=>({...ne,[x]:null})),N(ne=>{const pe={...ne};return delete pe[x],pe})},3e3)},C=()=>!t||!Array.isArray(t)?0:t.reduce((x,_)=>{const te=l[_.ticker]||0;return x+te*(_.totalShares||0)},0);return f.jsxs("div",{className:"space-y-8 p-4",children:[window.location.hostname==="iamtommyzombie.github.io"&&f.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),f.jsx("div",{className:"ml-3",children:f.jsxs("p",{className:"text-sm text-blue-700",children:["This is a demo version. To use price updates, please run the application locally.",f.jsx("a",{href:"https://github.com/IAmTommyZombie/InvestmentDashboard",className:"font-medium underline ml-1",target:"_blank",rel:"noopener noreferrer",children:"View on GitHub"})]})})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Portfolio Value"}),f.jsx(AT,{className:"h-5 w-5 text-gray-400"})]}),f.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:li(e||0)})]}),f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Monthly Income"}),f.jsx(Sv,{className:"h-5 w-5 text-gray-400"})]}),f.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:li(g||0)})]}),f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Total Shares"}),f.jsx(DT,{className:"h-5 w-5 text-gray-400"})]}),f.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:(n||0).toLocaleString("en-US")})]})]}),Object.keys(w).sort((x,_)=>ug.indexOf(x)-ug.indexOf(_)).map(x=>f.jsxs("div",{className:"mb-8",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:x}),f.jsxs("div",{className:"flex items-center gap-4",children:[A[x]&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-48 h-2 bg-gray-200 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-blue-600 transition-all duration-200",style:{width:`${A[x].current/A[x].total*100}%`}})}),f.jsx("span",{className:"text-sm text-gray-600",children:A[x].currentTicker?f.jsxs(f.Fragment,{children:["Updating ",A[x].currentTicker,f.jsxs("span",{className:"ml-2 text-gray-400",children:["(",A[x].current,"/",A[x].total,")"]})]}):`${A[x].current}/${A[x].total}`})]}),f.jsx("button",{onClick:()=>I(x),disabled:A[x],className:`px-3 py-1 rounded-md text-sm ${A[x]?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:window.location.hostname==="iamtommyzombie.github.io"?"Demo Mode":A[x]?"Updating...":"Update Group"})]})]}),P[x]&&P[x].includes("")&&f.jsx("p",{className:"text-sm mb-2 text-gray-600",children:P[x]}),f.jsx("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-600",children:"ETF Details"}),f.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-600",children:"Frequency"}),f.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-600",children:"Price Info"}),f.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-600",children:"Latest Distribution"}),f.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-600",children:"Annual Yield"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w[x].map(_=>E(_))})]})})]},x)),f.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-lg shadow-md p-6",children:[f.jsx("h3",{className:"text-xl font-bold mb-2",children:"Portfolio Total"}),f.jsx("p",{className:"text-3xl font-semibold",children:li(C())})]})]})},cg=t=>{switch(t){case"WEEKLY":return"bg-gray-200";case"GROUP_A":return"bg-green-50";case"GROUP_B":return"bg-yellow-50";case"GROUP_C":return"bg-blue-50";case"GROUP_D":return"bg-red-50";default:return""}},hg=t=>t==="WEEKLY"?"W":t.slice(-1),YI=()=>{const[t,e]=Q.useState([]),[n,r]=Q.useState(!0),[s,i]=Q.useState(null),[a,l]=Q.useState(!1),[u]=Q.useState(new Date().getFullYear()),[h]=Q.useState(new Date().getMonth()),[p,y]=Q.useState({key:"value",direction:"desc"}),[v,P]=Q.useState(!1),[k,D]=Q.useState(null),[b,S]=Q.useState({date:new Date().toISOString().split("T")[0],shares:"",price:""}),[T,A]=Q.useState({}),[N,M]=Q.useState({}),{getLatestDistribution:O,loading:w}=m_(),g=z=>{let $="asc";p.key===z&&p.direction==="asc"&&($="desc"),y({key:z,direction:$})},E=z=>p.key!==z?null:p.direction==="asc"?f.jsx("span",{className:"ml-1",children:""}):f.jsx("span",{className:"ml-1",children:""}),I=z=>[...z].sort((Y,se)=>{let ce,ve;switch(p.key){case"ticker":ce=Y.ticker,ve=se.ticker;break;case"group":ce=Y.group,ve=se.group;break;case"shares":ce=Number(Y.totalShares),ve=Number(se.totalShares);break;case"value":ce=Y.totalShares*(Y.currentPrice||0),ve=se.totalShares*(se.currentPrice||0);break;case"monthlyIncome":const fe=x(Y,u,h+1),be=x(se,u,h+1);ce=fe==="TBD"?-1:fe,ve=be==="TBD"?-1:be;break;case"breakEven":const yt=te(Y),Zt=te(se);ce=yt==="TBD"?1/0:yt.months,ve=Zt==="TBD"?1/0:Zt.months;break;default:return 0}return ce<ve?p.direction==="asc"?-1:1:ce>ve?p.direction==="asc"?1:-1:0});Q.useEffect(()=>{const z=Zn(Kt(ft,"prices"),Y=>{const se={};Y.forEach(ce=>{se[ce.id]=ce.data().currentPrice}),A(se)},Y=>{console.error("Error fetching prices:",Y)}),$=Zn(Kt(ft,"distributions"),Y=>{const se={};Y.forEach(ce=>{se[ce.id]=ce.data().distributions}),M(se)},Y=>{console.error("Error fetching distributions:",Y)});return()=>{z(),$()}},[]),Q.useEffect(()=>{try{const z=Kt(ft,"etfs"),$=Fd(z),Y=Zn($,async se=>{const ce=se.docs.map(fe=>({id:fe.id,...fe.data()})),ve=await Promise.all(ce.map(async fe=>{const be=await Xo(fe.ticker,u,h+1);return{...fe,monthlyIncome:be*fe.totalShares,group:fe.group||"GROUP_A"}}));e(ve),r(!1)});return()=>Y()}catch(z){console.error("Error fetching ETFs:",z),i("Failed to fetch ETFs"),r(!1)}},[u,h]);const C=()=>Array(12).fill().map(($,Y)=>Y).map($=>({month:new Date(u,$).toLocaleString("default",{month:"long"}),etfs:t.map(se=>({...se,monthlyIncome:x(se,u,$+1)}))})).filter($=>$.etfs.length>0),x=async(z,$,Y)=>{const se=await Xo(z.ticker,$,Y);if(se==="TBD")return"TBD";const ce=["WEEKLY"].includes(z.group)?52/12:1;return se*z.totalShares*ce},_=()=>t.reduce((z,$)=>z+$.totalShares*($.currentPrice||0),0),te=z=>{console.log("Calculating break-even for",z.ticker);const $=z.currentPrice||0,Y=z.totalShares*$,se=new Date,ce=se.getMonth()+1,ve=se.getFullYear(),fe=z.group==="WEEKLY"?52/12:13/12;let be=null;for(let zt=ve;zt>=2024;zt--){for(let en=zt===ve?ce:12;en>=1;en--){const bt=Xo(z.ticker,zt,en);if(bt&&bt!=="TBD"&&typeof bt=="number"){be=bt;break}}if(be)break}if(!be)return"TBD";let yt=0;if(z.purchaseDate){const zt=new Date(z.purchaseDate);let en=zt.getFullYear(),bt=zt.getMonth()+1;const co=(ve-en)*12+(ce-bt);for(let Fr=0;Fr<=co;Fr++){const Bl=(bt-1+Fr)%12+1,ho=en+Math.floor((bt-1+Fr)/12),kn=Xo(z.ticker,ho,Bl);kn&&kn!=="TBD"&&typeof kn=="number"&&(yt+=kn*z.totalShares*fe)}}const Zt=be*z.totalShares*fe;if(Zt===0)return"TBD";const jr=(Y-yt)/Zt;return{totalInvestment:Y,totalDistributions:yt,months:jr,years:jr/12}},ne=()=>{const z=t.reduce((fe,be)=>fe+be.totalShares*(be.currentPrice||0),0),$=t.reduce((fe,be)=>{const yt=x(be,u,h+1);return fe+(typeof yt=="number"?yt:0)},0),Y=$*12,se=z>0?Y/z*100:0,ce=t.reduce((fe,be)=>fe+Number(be.totalShares),0),ve=t.reduce((fe,be)=>{const yt=te(be);return fe+(yt!=="TBD"?yt.totalDistributions:0)},0);return{totalValue:z,monthlyIncome:$,yearlyIncome:Y,averageYield:se,totalShares:ce,totalDistributionsReceived:ve}},pe=async z=>{if(!b.shares||!b.price){alert("Please fill in all fields");return}try{const $=ms(ft,"etfs",z);await CI($,{purchases:RI({date:b.date,shares:Number(b.shares),price:Number(b.price)}),totalShares:k.totalShares+Number(b.shares)}),S({date:new Date().toISOString().split("T")[0],shares:"",price:""}),P(!1),D(null)}catch($){console.error("Error adding purchase:",$),alert("Failed to add purchase")}},Ie=()=>{var z;return!v||!k?null:f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsxs("h3",{className:"text-lg font-medium",children:[k.ticker," Purchase History"]}),f.jsx("button",{onClick:()=>{P(!1),D(null)},className:"text-gray-400 hover:text-gray-600",children:""})]}),f.jsx("div",{className:"mb-6",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shares"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(z=k.purchases)==null?void 0:z.map(($,Y)=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$.date}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$.shares}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",$.price.toFixed(2)]}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",($.shares*$.price).toFixed(2)]})]},Y))})]})}),f.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[f.jsx("h4",{className:"text-sm font-medium mb-4",children:"Add New Purchase"}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),f.jsx("input",{type:"date",value:b.date,onChange:$=>S(Y=>({...Y,date:$.target.value})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shares"}),f.jsx("input",{type:"number",value:b.shares,onChange:$=>S(Y=>({...Y,shares:$.target.value})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),f.jsx("input",{type:"number",step:"0.01",value:b.price,onChange:$=>S(Y=>({...Y,price:$.target.value})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),f.jsx("div",{className:"mt-4 flex justify-end",children:f.jsx("button",{onClick:()=>pe(k.id),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Purchase"})})]})]})})};if(w)return f.jsx("div",{children:"Loading..."});if(s)return f.jsxs("div",{children:["Error: ",s]});const U=C();_();const q=ne(),X=I(t);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Total Value"}),f.jsxs("p",{className:"text-2xl font-semibold",children:["$",q.totalValue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Monthly Income"}),f.jsxs("p",{className:"text-2xl font-semibold text-green-600",children:["$",q.monthlyIncome.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Yearly Income"}),f.jsxs("p",{className:"text-2xl font-semibold text-green-600",children:["$",q.yearlyIncome.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Average Yield"}),f.jsxs("p",{className:"text-2xl font-semibold",children:[q.averageYield.toFixed(2),"%"]})]}),f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Total Shares"}),f.jsx("p",{className:"text-2xl font-semibold",children:q.totalShares.toLocaleString()})]}),f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Total Distributions Received"}),f.jsxs("p",{className:"text-2xl font-semibold text-green-600",children:["$",q.totalDistributionsReceived.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[f.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:f.jsx("h3",{className:"text-lg font-medium",children:"Holdings"})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("ticker"),children:["ETF ",E("ticker")]}),f.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("group"),children:["Group ",E("group")]}),f.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("shares"),children:["Shares ",E("shares")]}),f.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("value"),children:["Value ",E("value")]}),f.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("monthlyIncome"),children:["Monthly Income ",E("monthlyIncome")]}),f.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("breakEven"),children:["Break Even ",E("breakEven")]}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:X.map(z=>{const $=te(z);return f.jsxs("tr",{className:cg(z.group),children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:z.ticker}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:hg(z.group)}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z.totalShares}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",(z.totalShares*(z.currentPrice||0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$==="TBD"?"TBD":f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"text-xs text-gray-500",children:["Investment: $",$.totalInvestment.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),f.jsxs("div",{className:"text-xs text-gray-500",children:["Received: $",$.totalDistributions.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),f.jsx("div",{className:"text-xs text-green-600",children:$.years<1?`${Math.ceil($.months)} months`:`${$.years.toFixed(1)} years`})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-green-600",children:z.monthlyIncome==="TBD"?"TBD":`$${z.monthlyIncome.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:()=>{D(z),P(!0)},className:"text-blue-600 hover:text-blue-900",title:"View Purchase History",children:f.jsx(ET,{className:"w-5 h-5"})}),f.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to delete ${z.ticker}?`)&&ag(ms(ft,"etfs",z.id))},className:"text-red-600 hover:text-red-900",children:f.jsx(Xp,{className:"w-5 h-5"})})]})})]},z.id)})})]})})]}),U.map(({month:z,etfs:$})=>f.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[f.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:f.jsx("h3",{className:"text-lg font-medium",children:z})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("ticker"),children:["ETF ",E("ticker")]}),f.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("group"),children:["Group ",E("group")]}),f.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("shares"),children:["Shares ",E("shares")]}),f.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("value"),children:["Value ",E("value")]}),f.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>g("monthlyIncome"),children:["Monthly Income ",E("monthlyIncome")]}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I($).map(Y=>f.jsxs("tr",{className:cg(Y.group),children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:Y.ticker}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:hg(Y.group)}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Y.totalShares}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",(Y.totalShares*(Y.currentPrice||0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-green-600",children:Y.monthlyIncome==="TBD"?"TBD":`$${Y.monthlyIncome.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("button",{onClick:()=>{window.confirm(`Are you sure you want to delete ${Y.ticker}?`)&&ag(ms(ft,"etfs",Y.id))},className:"text-red-600 hover:text-red-900",children:f.jsx(Xp,{className:"w-5 h-5"})})})]},Y.id))})]})})]},z)),f.jsx(Ie,{})]})},GI=()=>f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[f.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:f.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Settings"})}),f.jsxs("div",{className:"p-6 space-y-8",children:[f.jsxs("div",{children:[f.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[f.jsx(wT,{className:"w-4 h-4 mr-2"}),"Notifications"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-700",children:"Email Notifications"}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"sr-only peer"}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-700",children:"Dividend Payment Alerts"}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"sr-only peer"}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-700",children:"Price Change Alerts"}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"sr-only peer"}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),f.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[f.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[f.jsx(CT,{className:"w-4 h-4 mr-2"}),"Display"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-700",children:"Dark Mode"}),f.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100",children:f.jsx(MT,{className:"w-5 h-5 text-gray-600"})})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-700",children:"Compact View"}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"sr-only peer"}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),f.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[f.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[f.jsx(IT,{className:"w-4 h-4 mr-2"}),"Data Management"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{children:f.jsxs("button",{className:"flex items-center text-sm text-gray-700 hover:text-gray-900",children:[f.jsx(PT,{className:"w-4 h-4 mr-2"}),"Export Portfolio Data"]})}),f.jsx("div",{children:f.jsx("button",{className:"flex items-center text-sm text-red-600 hover:text-red-700",children:"Clear All Data"})})]})]}),f.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[f.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[f.jsx(RT,{className:"w-4 h-4 mr-2"}),"Security"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-gray-700",children:"Save Login Information"}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",className:"sr-only peer"}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),f.jsx("div",{children:f.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700",children:"Change Password"})})]})]})]})]})}),g_=Q.createContext(),HI=({children:t})=>{const[e,n]=Q.useState(()=>{const i=sessionStorage.getItem("adminAuth");if(i){const{timestamp:a}=JSON.parse(i);if(Date.now()-a<72e5)return!0;sessionStorage.removeItem("adminAuth")}return!1}),r=()=>{n(!0),sessionStorage.setItem("adminAuth",JSON.stringify({timestamp:Date.now()}))},s=()=>{n(!1),sessionStorage.removeItem("adminAuth")};return Q.useEffect(()=>{const i=setInterval(()=>{const a=sessionStorage.getItem("adminAuth");if(a){const{timestamp:l}=JSON.parse(a);Date.now()-l>=72e5&&s()}},6e4);return()=>clearInterval(i)},[]),f.jsx(g_.Provider,{value:{isAuthenticated:e,login:r,logout:s},children:t})},$d=()=>Q.useContext(g_),WI=()=>{var A;const{logout:t}=$d(),[e,n]=Q.useState({}),[r,s]=Q.useState(""),[i,a]=Q.useState(new Date().getFullYear()),[l,u]=Q.useState(new Date().getMonth()+1),[h,p]=Q.useState(""),[y,v]=Q.useState(!0),[P,k]=Q.useState(!1),D=Object.entries(zd).reduce((N,[M,O])=>{const w=O.frequency==="weekly"?"WEEKLY":O.frequency==="13x"&&M<="FEAT"?"GROUP_A":O.frequency==="13x"?"GROUP_B":M<="ABNY"?"GROUP_C":"GROUP_D";return N[w]||(N[w]=[]),N[w].push({ticker:M,...O}),N},{});Q.useEffect(()=>{const N=Zn(Kt(ft,"distributions"),M=>{const O={};M.forEach(w=>{O[w.id]=w.data()}),n(O),v(!1)},M=>{console.error("Error fetching distributions:",M),v(!1)});return()=>N()},[]);const b=async N=>{if(N.preventDefault(),!(!r||!h))try{const M=ms(Kt(ft,"distributions"),r);await PI(M,{ticker:r,history:{[i]:{[l]:h==="TBD"?"TBD":parseFloat(h)}}},{merge:!0}),p(""),k(!1),alert("Distribution updated successfully!")}catch(M){console.error("Error updating distribution:",M),alert("Error updating distribution")}},S=(N,M,O)=>{a(parseInt(N)),u(parseInt(M)),p(O.toString()),k(!0)},T=N=>new Date(2e3,N-1).toLocaleString("default",{month:"long"});return y?f.jsx("div",{className:"p-4",children:"Loading..."}):f.jsxs("div",{className:"p-4 max-w-4xl mx-auto",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Distribution Admin"}),f.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Logout"})]}),f.jsxs("form",{onSubmit:b,className:"space-y-4 mb-8",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select ETF"}),f.jsxs("select",{value:r,onChange:N=>s(N.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[f.jsx("option",{value:"",children:"Select an ETF"}),Object.entries(D).map(([N,M])=>f.jsx("optgroup",{label:N,children:M.map(O=>f.jsxs("option",{value:O.ticker,children:[O.ticker," (",O.frequency,")"]},O.ticker))},N))]})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),f.jsx("input",{type:"number",value:i,onChange:N=>a(parseInt(N.target.value)),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),f.jsx("select",{value:l,onChange:N=>u(parseInt(N.target.value)),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:12},(N,M)=>f.jsx("option",{value:M+1,children:T(M+1)},M+1))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),f.jsx("div",{className:"relative",children:f.jsx("input",{type:"text",value:h,onChange:N=>p(N.target.value),placeholder:"Enter amount or TBD",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]})]}),f.jsx("button",{type:"submit",className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:P?"Update Distribution":"Add Distribution"}),P&&f.jsx("button",{type:"button",onClick:()=>{k(!1),p("")},className:"w-full px-4 py-2 mt-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel Edit"})]}),r&&f.jsxs("div",{className:"mt-8",children:[f.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["Distribution History for ",r]}),f.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Year"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Month"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:((A=e[r])==null?void 0:A.history)&&Object.entries(e[r].history).sort((N,M)=>M[0]-N[0]).map(([N,M])=>Object.entries(M).sort((O,w)=>w[0]-O[0]).map(([O,w])=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T(O)}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w==="TBD"?"TBD":`$${w}`}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.jsx("button",{onClick:()=>S(N,O,w),className:"text-blue-600 hover:text-blue-800",children:"Edit"})})]},`${N}-${O}`)))})]})})]})]})},QI=()=>{const[t,e]=Q.useState(""),[n,r]=Q.useState(""),[s,i]=Q.useState(""),{login:a}=$d(),l="tscales",u="WhiskeyGinger1389!!",h=p=>{p.preventDefault(),t===l&&n===u?(a(),i("")):i("Invalid credentials")};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8",children:[f.jsx("div",{children:f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Distribution Admin Login"})}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h,children:[f.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),f.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Username",value:t,onChange:p=>e(p.target.value)})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),f.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:p=>r(p.target.value)})]})]}),s&&f.jsx("div",{className:"text-red-500 text-sm text-center",children:s}),f.jsx("div",{children:f.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign in"})})]})]})})},KI=()=>{const{etfs:t}=f_(),[e,n]=Q.useState(!1),[r,s]=Q.useState(!1),[i,a]=Q.useState(null),[l,u]=Q.useState("overview"),{isAuthenticated:h}=$d(),p=[{name:"Overview",view:"overview",icon:kT},{name:"Portfolio",view:"portfolio",icon:Sv},{name:"Settings",view:"settings",icon:bT},{name:"Distribution Admin",view:"distribution-admin",icon:ST}],y=b=>["YMAG","YMAX","LFGY","GPTY"].includes(b)?52:["TSLY","GOOY","YBIT","OARK","XOMO","TSMY","CRSH","FIVY","FEAT","NVDY","FBY","GDXY","JPMO","MRNY","MARO","PLTY","CONY","MSFO","AMDY","NFLY","PYPY","ULTY","ABNY","MSTY","AMZY","APLY","DISO","SQY","SMCY","AIYY"].includes(b)?13:12;t.reduce((b,S)=>{const T=zd[S.ticker.toUpperCase()]||0,A=y(S.ticker.toUpperCase()),M=T*A/12;return b+M*S.shares},0);const k=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),D=()=>{switch(l){case"overview":return f.jsx(oh,{});case"portfolio":return f.jsx(YI,{});case"settings":return f.jsx(GI,{});case"distribution-admin":return h?f.jsx(WI,{}):f.jsx(QI,{});default:return f.jsx(oh,{})}};return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e&&f.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 z-20 lg:hidden",onClick:()=>n(!1)}),f.jsxs("div",{className:`
        fixed inset-y-0 left-0 z-30
        w-64 bg-white border-r border-gray-200
        transform transition-transform duration-200 ease-in-out
        lg:translate-x-0 lg:static lg:z-auto
        ${e?"translate-x-0":"-translate-x-full"}
      `,children:[f.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[f.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"YieldMax Dashboard"}),f.jsx("button",{className:"lg:hidden",onClick:()=>n(!1),children:f.jsx(td,{className:"w-6 h-6 text-gray-600"})})]}),f.jsx("nav",{className:"p-4 space-y-2",children:p.map(b=>f.jsxs("button",{onClick:()=>{u(b.view),n(!1)},className:`
                w-full flex items-center px-4 py-2 rounded-lg
                ${l===b.view?"text-gray-900 bg-gray-100":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}
              `,children:[f.jsx(b.icon,{className:"w-5 h-5 mr-3"}),b.name]},b.name))})]}),f.jsxs("div",{className:"lg:pl-64 flex flex-col min-h-screen",children:[f.jsx("header",{className:"h-16 bg-gradient-to-r from-blue-500 to-blue-600 border-b border-blue-600 flex items-center",children:f.jsxs("div",{className:"flex items-center justify-between w-full px-6",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("button",{className:"lg:hidden mr-4 text-white hover:text-blue-100",onClick:()=>n(!0),children:f.jsx(NT,{className:"w-6 h-6"})}),f.jsx("h2",{className:"text-lg font-medium text-white capitalize",children:l})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:"text-white",children:f.jsx("span",{className:"text-sm",children:k})}),f.jsxs("button",{onClick:()=>s(!0),className:`flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 bg-white rounded-lg 
                  hover:bg-blue-50 transition-colors duration-150 ease-in-out shadow-sm`,children:[f.jsx(VT,{className:"w-4 h-4"}),"Add ETF"]})]})]})}),f.jsx("main",{className:"flex-1 p-6 overflow-auto",children:f.jsx("div",{className:"max-w-7xl mx-auto",children:D()})})]}),r&&f.jsx(h_,{onClose:()=>s(!1),onSuccess:b=>{a({type:"success",message:b})}}),i&&f.jsx(MI,{type:i.type,message:i.message,onClose:()=>a(null)})]})},XI=()=>f.jsx(HI,{children:f.jsx(zI,{children:f.jsx(FI,{children:f.jsxs(KI,{children:[f.jsx(oh,{}),f.jsx(h_,{})]})})})});zu.createRoot(document.getElementById("root")).render(f.jsx(ow.StrictMode,{children:f.jsx(XI,{})}));
